<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Anti-debugging protection -->
    <!-- <script>
      setInterval(function() {
        debugger;
      }, 100);
    </script> -->

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2H559N5J64"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2H559N5J64');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle BTC Miner | GAME</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration and Authentication -->
    <script src="firebase-config.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="firebase-save.js"></script>
</head>
<body>

    <!-- Login Screen (Firebase) -->
    <div id="login-screen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); z-index: 100000; overflow: auto;">
        <iframe src="login-screen.html" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>

    <!-- Age Disclaimer Modal -->
    <div id="age-disclaimer-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 40px; border-radius: 12px; max-width: 500px; text-align: center; border: 2px solid #f7931a; box-shadow: 0 0 30px rgba(247,147,26,0.5);">
            <h2 style="color: #f7931a; margin-bottom: 20px; font-size: 2rem;">‚ö†Ô∏è Age Requirement</h2>
            <p style="color: #fff; font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6;">
                This game is intended for users <strong style="color: #f7931a;">18 years or older</strong>.
            </p>
            <p style="color: #aaa; font-size: 0.95rem; margin-bottom: 30px; line-height: 1.5;">
                This is a <strong>simulation game</strong> with <strong>no real cryptocurrency or monetary value</strong>. All currency and assets are virtual and for entertainment purposes only.
            </p>
            <button onclick="acceptAgeDisclaimer()" style="background: #f7931a; color: #000; border: none; padding: 15px 40px; font-weight: 800; border-radius: 8px; cursor: pointer; font-size: 1.1rem; transition: 0.2s; box-shadow: 0 4px 15px rgba(247,147,26,0.4);">
                I AM 18+ & UNDERSTAND
            </button>
        </div>
    </div>

    <!-- Terms and Conditions Acceptance Modal -->
    <div id="terms-acceptance-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10001; justify-content: center; align-items: center; overflow: auto;">
        <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 40px; border-radius: 12px; max-width: 600px; max-height: 90vh; overflow-y: auto; text-align: center; border: 2px solid #f7931a; box-shadow: 0 0 30px rgba(247,147,26,0.5); margin: 20px;">
            <h2 style="color: #f7931a; margin-bottom: 20px; font-size: 1.8rem;">üìã Terms & Conditions</h2>
            <p style="color: #fff; font-size: 1rem; margin-bottom: 20px; line-height: 1.6;">
                Please read and accept our Terms and Conditions to continue using Idle BTC Miner.
            </p>
            <div style="background: rgba(255,255,255,0.05); border: 1px solid #f7931a; border-radius: 8px; padding: 20px; margin-bottom: 30px; max-height: 300px; overflow-y: auto; text-align: left;">
                <iframe id="terms-preview" src="terms.html" style="width: 100%; height: 280px; border: none; background: transparent;"></iframe>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button onclick="acceptTerms()" style="background: #f7931a; color: #000; border: none; padding: 15px 40px; font-weight: 800; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; box-shadow: 0 4px 15px rgba(247,147,26,0.4);">
                    ‚úì I ACCEPT
                </button>
                <button onclick="declineTerms()" style="background: #333; color: #f7931a; border: 2px solid #f7931a; padding: 15px 40px; font-weight: 800; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s;">
                    ‚úó DECLINE
                </button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10001; justify-content: center; align-items: center; overflow: auto;">
        <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 40px; border-radius: 12px; max-width: 700px; width: 90%; max-height: 90vh; border: 2px solid #f7931a; box-shadow: 0 0 30px rgba(247,147,26,0.5); position: relative;">
            <button onclick="closeLeaderboardModal()" style="position: absolute; top: 15px; right: 15px; background: #f7931a; color: #000; border: none; padding: 10px 20px; font-weight: 800; border-radius: 6px; cursor: pointer; font-size: 1rem; transition: 0.2s; z-index: 1;">
                CLOSE
            </button>
            <h2 style="color: #f7931a; margin-bottom: 20px; font-size: 2rem; text-align: center;">üèÜ LEADERBOARD</h2>
            <div class="leaderboard-content" style="color: #fff;">
                <div style="text-align: center; color: #888;">Loading leaderboard...</div>
            </div>
        </div>
    </div>

    <!-- Privacy & Cookie Policy Modal -->
    <div id="privacy-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; justify-content: center; align-items: center; overflow: auto;">
        <div style="background: #fff; padding: 20px; border-radius: 12px; max-width: 900px; width: 90%; max-height: 90vh; overflow-y: auto; margin: 20px; position: relative; border: 2px solid #f7931a; box-shadow: 0 0 30px rgba(247,147,26,0.5);">
            <button onclick="closePrivacyModal()" style="position: absolute; top: 15px; right: 15px; background: #f7931a; color: #000; border: none; padding: 10px 20px; font-weight: 800; border-radius: 6px; cursor: pointer; font-size: 1rem; transition: 0.2s; z-index: 1;">
                CLOSE
            </button>
            <!-- Policy Tabs -->
            <div style="display: flex; gap: 10px; margin-bottom: 15px; border-bottom: 2px solid #f7931a;">
                <button id="policy-tab-privacy" onclick="switchPolicyTab('privacy')" style="padding: 10px 20px; background: #f7931a; color: #000; border: none; font-weight: 800; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 0.95rem;">
                    PRIVACY POLICY
                </button>
                <button id="policy-tab-cookies" onclick="switchPolicyTab('cookies')" style="padding: 10px 20px; background: #ddd; color: #000; border: none; font-weight: 800; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 0.95rem;">
                    COOKIE POLICY
                </button>
                <button id="policy-tab-terms" onclick="switchPolicyTab('terms')" style="padding: 10px 20px; background: #ddd; color: #000; border: none; font-weight: 800; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 0.95rem;">
                    TERMS & CONDITIONS
                </button>
                <button id="policy-tab-contact" onclick="switchPolicyTab('contact')" style="padding: 10px 20px; background: #ddd; color: #000; border: none; font-weight: 800; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 0.95rem;">
                    CONTACT
                </button>
                <button id="policy-tab-firebase" onclick="switchPolicyTab('firebase')" style="padding: 10px 20px; background: #ddd; color: #000; border: none; font-weight: 800; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 0.95rem;">
                    üîí FIREBASE
                </button>
            </div>
            <iframe id="privacy-iframe" src="privacy.html" style="width: 100%; height: 80vh; border: none;"></iframe>
        </div>
    </div>

    <div id="main-layout">
        <div class="panel">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                <span class="nw-label" style="color: #555 !important; text-transform: uppercase !important; letter-spacing: 3px !important; font-weight: 700 !important;">Crypto Portfolio Valuation</span>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button id="login-btn" style="background: #f7931a; color: #000; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="showLoginScreen()">LOGIN / SIGN UP</button>
                    <button style="background: #FFD700; color: #000; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="openLeaderboardModal()">üèÜ LEADERBOARD</button>
                    <button id="mute-btn" style="background: #888; color: white; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="toggleMute()">SOUND ON</button>
                    <button style="background: #4CAF50; color: white; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="document.getElementById('game-instructions').style.display='block'; localStorage.removeItem('instructionsDismissed');">SHOW HELP</button>
                    <button style="background: #ffa500; color: white; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="resetEarningsStats()">RESET EARNINGS</button>
                    <button style="background: #ff3344; color: white; border: none; padding: 4px 10px; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 0.55rem;" onclick="resetGame()">RESET SAVE</button>
                </div>
            </div>
            <div class="nw-amount" id="nw-val">$0.00</div>

            <!-- Crypto Balances -->
            <div style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px;">
                <div style="font-size: 1.4rem; color: #f7931a; font-weight: bold; font-family: monospace;">‚Çø <span id="bal-btc">0.00000000</span></div>
                <div style="font-size: 1.4rem; color: #627eea; font-weight: bold; font-family: monospace;">Œû <span id="bal-eth">0.00000000</span></div>
                <div style="font-size: 1.4rem; color: #c2a633; font-weight: bold; font-family: monospace;">√ê <span id="bal-doge">0.00</span></div>
                <div style="font-size: 1.4rem; color: #00ff88; font-weight: bold; font-family: monospace;">üî∑ <span id="skill-tokens-display">0</span> Skill Tokens</div>
            </div>

            <div class="mini-stats">
                <div class="stat-item">
                    <span>Hardware Equity</span>
                    <b class="stat-val" id="asset-usd">$0</b>
                </div>
            </div>

            <!-- Skill Tree Button -->
            <button onclick="openSkillTreeModal()" style="width: 100%; background: linear-gradient(135deg, #f7931a 0%, #ff6b35 100%); color: #000; border: none; padding: 12px; font-weight: 800; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; box-shadow: 0 2px 10px rgba(247,147,26,0.3); margin-bottom: 15px;">
                üåü SKILL TREE
            </button>

            <!-- Game Instructions -->
            <div id="game-instructions" style="margin: 12px auto; padding: 8px 16px; background: rgba(255, 193, 7, 0.08); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 4px; max-width: 600px; text-align: center; position: relative;">
                <button onclick="dismissInstructions()" style="position: absolute; top: 4px; right: 4px; background: rgba(255, 255, 255, 0.1); border: none; color: #888; cursor: pointer; font-size: 0.8rem; padding: 2px 6px; border-radius: 3px; font-weight: bold; line-height: 1;">√ó</button>
                <div style="font-size: 0.715rem; color: #ccc; line-height: 1.5;">
                    Begin by <strong>Manually Hashing BTC, ETH or Doge</strong>. Sell or Stake your Crypto at the Exchange.<br>
                    You will find Miners in the BTC, ETH and DOGE tabs. <strong style="color: #ff3344;">DON'T FORGET ABOUT POWER!</strong>
                </div>
            </div>

            <!-- Hashrate Display -->
            <div id="hashrate-display" style="display: flex; gap: 6px; margin-bottom: 0.1px; justify-content: flex-end; flex-wrap: wrap;">
                <div class="stat-box stat-box-session" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">TIME THIS SESSION</span>
                    <b style="font-size: 1.1rem; color: #ffffff; font-family: monospace; font-weight: 900; word-break: break-word;" id="session-time">0m 0s</b>
                </div>
                <div class="stat-box stat-box-session-earnings" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">EARNING THIS SESSION</span>
                    <b style="font-size: 1.1rem; color: #00ff88; font-family: monospace; font-weight: 900; word-break: break-word;" id="session-earning">$0.00</b>
                </div>
                <div class="stat-box stat-box-earnings" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">LIFETIME EARNINGS</span>
                    <b style="font-size: 1.1rem; color: #00ff88; font-family: monospace; font-weight: 900; word-break: break-word;" id="lifetime-earning">$0.00</b>
                </div>
                <div class="stat-box stat-box-btc" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">BTC HASHRATE</span>
                    <b style="font-size: 1.1rem; color: #f7931a; font-family: monospace; font-weight: 900; white-space: nowrap;" id="yield-btc">0.00000000/s</b>
                </div>
                <div class="stat-box stat-box-eth" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">ETH HASHRATE</span>
                    <b style="font-size: 1.1rem; color: #627eea; font-family: monospace; font-weight: 900; white-space: nowrap;" id="yield-eth">0.00000000/s</b>
                </div>
                <div class="stat-box stat-box-doge" style="padding: 9px 15px; background: rgba(0,0,0,0.3); border-radius: 4px; border: 1px solid #222;">
                    <span style="font-size: 0.75rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 3px; font-weight: 800;">DOGE HASHRATE</span>
                    <b style="font-size: 1.1rem; color: #c2a633; font-family: monospace; font-weight: 900; white-space: nowrap;" id="yield-doge">0.00000000/s</b>
                </div>
            </div>

            <!-- Crypto Prices -->
            <div style="margin-top: 20px; padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid #222;">
                <span style="font-size: 0.85rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 8px;">Crypto Prices (Virtual)</span>
                <div id="crypto-prices-flex" style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 120px;">
                        <div style="font-size: 0.65rem; color: #f7931a; font-weight: 800;">BITCOIN</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <b class="stat-val" id="btc-price" style="font-size: 1.4rem;">$100,000</b>
                            <span id="btc-indicator" style="font-size: 1.2rem; font-weight: bold; min-width: 20px;"></span>
                            <span id="btc-change" style="font-size: 0.9rem; font-weight: bold; min-width: 50px;"></span>
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 120px;">
                        <div style="font-size: 0.65rem; color: #627eea; font-weight: 800;">ETHEREUM</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <b class="stat-val" id="eth-price" style="font-size: 1.4rem;">$3,500</b>
                            <span id="eth-indicator" style="font-size: 1.2rem; font-weight: bold; min-width: 20px;"></span>
                            <span id="eth-change" style="font-size: 0.9rem; font-weight: bold; min-width: 50px;"></span>
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 120px;">
                        <div style="font-size: 0.65rem; color: #c2a633; font-weight: 800;">DOGECOIN</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <b class="stat-val" id="doge-price" style="font-size: 1.4rem;">$0.25</b>
                            <span id="doge-indicator" style="font-size: 1.2rem; font-weight: bold; min-width: 20px;"></span>
                            <span id="doge-change" style="font-size: 0.9rem; font-weight: bold; min-width: 50px;"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-wrapper" style="position: relative;">
                <canvas id="nwChart"></canvas>
            </div>
        </div>

        <div class="panel" style="display: flex; flex-direction: column; min-height: 0; position: relative; z-index: 50;">
            <button class="mine-btn" onclick="manualHash()" style="position: relative; z-index: 100;">MANUAL BTC HASH<br>
                <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.7;">+0.00000250 ‚Çø</span>
            </button>
            <button class="mine-btn" style="background: #627eea; padding: 8px;" onclick="manualEthHash()">MANUAL ETH HASH<br>
                <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.7;">+0.00007143 Œû</span>
            </button>
            <button class="mine-btn" style="background: #c2a633; padding: 8px;" onclick="manualDogeHash()">MANUAL DOGE HASH<br>
                <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.7;">+1.00000000 √ê</span>
            </button>
            <button id="autoclicker-btn" style="background: #666; color: white; border: none; width: 100%; padding: 8px; font-weight: 700; border-radius: 10px; cursor: pointer; margin-bottom: 8px; font-size: 0.75rem;" onclick="startAutoClicker()">AUTO CLICKER ‚Ä¢ 5 clicks/sec ‚Ä¢ 30s ‚Ä¢ 5m cooldown</button>

            <!-- Power Status Bar -->
            <div style="padding: 8px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid #222; margin-bottom: 8px;">
                <div style="display: flex; gap: 8px; align-items: center; justify-content: space-between;">
                    <div style="flex: 1;">
                        <span style="font-size: 0.65rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 2px;">Power Status</span>
                        <div style="font-size: 0.65rem; color: #00ff88; font-family: monospace; font-weight: 900;" id="power-used">0W / 0W</div>
                        <div id="power-bar" style="height: 6px; background: #222; border-radius: 3px; margin-top: 2px;">
                            <div id="power-bar-fill" style="height: 100%; background: #00ff88; border-radius: 3px; width: 0%;"></div>
                        </div>
                    </div>
                    <button class="tab-btn" onclick="switchTab('power')" style="border-color: #00ff88; color: #00ff88; padding: 6px 12px; white-space: nowrap;">UPGRADE POWER SUPPLY</button>
                </div>
            </div>

            <!-- Dollar Balance Display -->
            <div style="padding: 6px; background: rgba(0,255,136,0.1); border-radius: 8px; border: 2px solid #00ff88; margin-bottom: 8px; text-align: center;">
                <span style="font-size: 0.6rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 1px; font-weight: 800;">Cash Balance</span>
                <b style="color: #00ff88; font-family: monospace; font-weight: 900;" id="dollar-balance">$0</b>
            </div>

            <!-- Tab Buttons -->
            <div class="tab-buttons" style="margin-bottom: 6px;">
                <button class="tab-btn active" onclick="switchTab('btc-mining')" style="border-color: #f7931a; color: #f7931a;">BTC</button>
                <button class="tab-btn" onclick="switchTab('eth-mining')" style="border-color: #627eea; color: #627eea;">ETH</button>
                <button class="tab-btn" onclick="switchTab('doge-mining')" style="border-color: #c2a633; color: #c2a633;">DOGE</button>
            </div>
            <div class="tab-buttons">
                <button class="tab-btn" onclick="switchTab('market')" style="border-color: #00ff88; color: #00ff88;">CRYPTO EXCHANGE</button>
            </div>

            <!-- BTC Mining Tab -->
            <div id="btc-mining-tab" class="tab-content active" style="flex-direction: column; min-height: 0; flex: 1;">
                <!-- Buy Quantity Toggle -->
                <div style="margin-bottom: 10px;">
                    <span style="font-size: 0.7rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 5px; font-weight: 800;">Purchase Amount</span>
                    <div style="display: flex; gap: 6px;">
                        <button id="qty-toggle-1" class="qty-toggle active" onclick="setBuyQuantity(1)" style="border-color: #888; color: #888;">1x</button>
                        <button id="qty-toggle-2" class="qty-toggle" onclick="setBuyQuantity(2)" style="border-color: #888; color: #888;">2x</button>
                        <button id="qty-toggle-5" class="qty-toggle" onclick="setBuyQuantity(5)" style="border-color: #888; color: #888;">5x</button>
                        <button id="qty-toggle-10" class="qty-toggle" onclick="setBuyQuantity(10)" style="border-color: #888; color: #888;">10x</button>
                    </div>
                </div>
                <div class="upgrade-list" id="btc-shop" style="flex: 1; min-height: 0; overflow-y: auto;"></div>
            </div>

            <!-- ETH Mining Tab -->
            <div id="eth-mining-tab" class="tab-content" style="flex-direction: column; min-height: 0; flex: 1;">
                <!-- Buy Quantity Toggle -->
                <div style="margin-bottom: 10px;">
                    <span style="font-size: 0.7rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 5px; font-weight: 800;">Purchase Amount</span>
                    <div style="display: flex; gap: 6px;">
                        <button id="eth-qty-toggle-1" class="qty-toggle active" onclick="setBuyQuantity(1)" style="border-color: #888; color: #888;">1x</button>
                        <button id="eth-qty-toggle-2" class="qty-toggle" onclick="setBuyQuantity(2)" style="border-color: #888; color: #888;">2x</button>
                        <button id="eth-qty-toggle-5" class="qty-toggle" onclick="setBuyQuantity(5)" style="border-color: #888; color: #888;">5x</button>
                        <button id="eth-qty-toggle-10" class="qty-toggle" onclick="setBuyQuantity(10)" style="border-color: #888; color: #888;">10x</button>
                    </div>
                </div>
                <div class="upgrade-list" id="eth-shop" style="flex: 1; min-height: 0; overflow-y: auto;"></div>
            </div>

            <!-- DOGE Mining Tab -->
            <div id="doge-mining-tab" class="tab-content" style="flex-direction: column; min-height: 0; flex: 1;">
                <!-- Buy Quantity Toggle -->
                <div style="margin-bottom: 10px;">
                    <span style="font-size: 0.7rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 5px; font-weight: 800;">Purchase Amount</span>
                    <div style="display: flex; gap: 6px;">
                        <button id="doge-qty-toggle-1" class="qty-toggle active" onclick="setBuyQuantity(1)" style="border-color: #888; color: #888;">1x</button>
                        <button id="doge-qty-toggle-2" class="qty-toggle" onclick="setBuyQuantity(2)" style="border-color: #888; color: #888;">2x</button>
                        <button id="doge-qty-toggle-5" class="qty-toggle" onclick="setBuyQuantity(5)" style="border-color: #888; color: #888;">5x</button>
                        <button id="doge-qty-toggle-10" class="qty-toggle" onclick="setBuyQuantity(10)" style="border-color: #888; color: #888;">10x</button>
                    </div>
                </div>
                <div class="upgrade-list" id="doge-shop" style="flex: 1; min-height: 0; overflow-y: auto;"></div>
            </div>

            <!-- Power Tab -->
            <div id="power-tab" class="tab-content" style="flex-direction: column; min-height: 0; flex: 1;">
                <!-- Buy Quantity Toggle -->
                <div style="margin-bottom: 10px;">
                    <span style="font-size: 0.7rem; color: #888; text-transform: uppercase; display: block; margin-bottom: 5px; font-weight: 800;">Purchase Amount</span>
                    <div style="display: flex; gap: 6px;">
                        <button class="qty-toggle active" onclick="setBuyQuantity(1)" style="border-color: #888; color: #888;">1x</button>
                        <button class="qty-toggle" onclick="setBuyQuantity(2)" style="border-color: #888; color: #888;">2x</button>
                        <button class="qty-toggle" onclick="setBuyQuantity(5)" style="border-color: #888; color: #888;">5x</button>
                        <button class="qty-toggle" onclick="setBuyQuantity(10)" style="border-color: #888; color: #888;">10x</button>
                    </div>
                </div>
                <div class="upgrade-list" id="power-shop" style="flex: 1; min-height: 0; overflow-y: auto;"></div>
            </div>

            <!-- Market Tab -->
            <div id="market-tab" class="tab-content" style="flex-direction: column; min-height: 0; flex: 1;">
                <div class="upgrade-list" style="flex: 1; min-height: 0; overflow-y: auto; padding: 10px;">
                    <div style="margin-bottom: 15px;">
                        <h3 style="color: #00ff88; margin: 0 0 10px 0; font-size: 1.2rem;">Sell Crypto for Cash</h3>
                        <p style="color: #888; font-size: 0.75rem; margin: 0;">Convert your mined cryptocurrency to dollars to purchase upgrades</p>
                    </div>

                    <!-- BTC Sell -->
                    <div style="background: rgba(247, 147, 26, 0.1); border: 1px solid #f7931a; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #f7931a; font-weight: 800; font-size: 1.1rem;">‚Çø Bitcoin</span>
                            <span style="color: #888; font-size: 0.8rem;">$<span id="market-btc-price">100,000</span> each</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                            <button onclick="sellBTC(0.001)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 0.001</button>
                            <button onclick="sellBTC(0.01)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 0.01</button>
                            <button onclick="sellBTC(0.1)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 0.1</button>
                            <button onclick="sellBTC(1)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 1</button>
                        </div>
                        <button onclick="sellAllBTC()" style="background: #333; color: #f7931a; border: 1px solid #f7931a; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem; width: 100%; margin-top: 6px;">SELL ALL</button>
                    </div>

                    <!-- ETH Sell -->
                    <div style="background: rgba(98, 126, 234, 0.1); border: 1px solid #627eea; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #627eea; font-weight: 800; font-size: 1.1rem;">Œû Ethereum</span>
                            <span style="color: #888; font-size: 0.8rem;">$<span id="market-eth-price">3,500</span> each</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                            <button onclick="sellETH(0.01)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 0.01</button>
                            <button onclick="sellETH(0.1)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 0.1</button>
                            <button onclick="sellETH(1)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 1</button>
                            <button onclick="sellETH(10)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 10</button>
                        </div>
                        <button onclick="sellAllETH()" style="background: #333; color: #627eea; border: 1px solid #627eea; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem; width: 100%; margin-top: 6px;">SELL ALL</button>
                    </div>

                    <!-- DOGE Sell -->
                    <div style="background: rgba(194, 166, 51, 0.1); border: 1px solid #c2a633; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #c2a633; font-weight: 800; font-size: 1.1rem;">√ê Dogecoin</span>
                            <span style="color: #888; font-size: 0.8rem;">$<span id="market-doge-price">0.25</span> each</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                            <button onclick="sellDOGE(1)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 1</button>
                            <button onclick="sellDOGE(10)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 10</button>
                            <button onclick="sellDOGE(100)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 100</button>
                            <button onclick="sellDOGE(1000)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">SELL 1000</button>
                        </div>
                        <button onclick="sellAllDOGE()" style="background: #333; color: #c2a633; border: 1px solid #c2a633; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem; width: 100%; margin-top: 6px;">SELL ALL</button>
                    </div>

                    <!-- Staking Section -->
                    <div style="margin: 25px 0 15px 0; padding-top: 20px; border-top: 2px solid #222;">
                        <h3 style="color: #ffaa33; margin: 0 0 10px 0; font-size: 1.2rem;">üè¶ Crypto Staking Bank</h3>
                        <p style="color: #888; font-size: 0.75rem; margin: 0 0 15px 0;">Lock your crypto to earn 0.1% APR every 2 seconds, paid directly to your cash balance!</p>
                    </div>

                    <!-- BTC Staking -->
                    <div style="background: rgba(247, 147, 26, 0.1); border: 1px solid #f7931a; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #f7931a; font-weight: 800; font-size: 1.1rem;">‚Çø Bitcoin Staking</span>
                            <span style="color: #ffaa33; font-size: 0.8rem;" id="btc-apr-display">$0.00/hr</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem;">Staked: </span>
                            <span style="color: #f7931a; font-family: monospace; font-weight: 800;" id="btc-staked-amount">0.00000000</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Stake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickStake('BTC', 25)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickStake('BTC', 50)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickStake('BTC', 75)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickStake('BTC', 100)" style="background: #f7931a; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                        <div style="margin-bottom: 0px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Unstake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickUnstake('BTC', 25)" style="background: #333; color: #f7931a; border: 1px solid #f7931a; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickUnstake('BTC', 50)" style="background: #333; color: #f7931a; border: 1px solid #f7931a; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickUnstake('BTC', 75)" style="background: #333; color: #f7931a; border: 1px solid #f7931a; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickUnstake('BTC', 100)" style="background: #333; color: #f7931a; border: 1px solid #f7931a; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                    </div>

                    <!-- ETH Staking -->
                    <div style="background: rgba(98, 126, 234, 0.1); border: 1px solid #627eea; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #627eea; font-weight: 800; font-size: 1.1rem;">Œû Ethereum Staking</span>
                            <span style="color: #ffaa33; font-size: 0.8rem;" id="eth-apr-display">$0.00/hr</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem;">Staked: </span>
                            <span style="color: #627eea; font-family: monospace; font-weight: 800;" id="eth-staked-amount">0.00000000</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Stake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickStake('ETH', 25)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickStake('ETH', 50)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickStake('ETH', 75)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickStake('ETH', 100)" style="background: #627eea; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                        <div style="margin-bottom: 0px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Unstake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickUnstake('ETH', 25)" style="background: #333; color: #627eea; border: 1px solid #627eea; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickUnstake('ETH', 50)" style="background: #333; color: #627eea; border: 1px solid #627eea; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickUnstake('ETH', 75)" style="background: #333; color: #627eea; border: 1px solid #627eea; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickUnstake('ETH', 100)" style="background: #333; color: #627eea; border: 1px solid #627eea; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                    </div>

                    <!-- DOGE Staking -->
                    <div style="background: rgba(194, 166, 51, 0.1); border: 1px solid #c2a633; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #c2a633; font-weight: 800; font-size: 1.1rem;">√ê Dogecoin Staking</span>
                            <span style="color: #ffaa33; font-size: 0.8rem;" id="doge-apr-display">$0.00/hr</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem;">Staked: </span>
                            <span style="color: #c2a633; font-family: monospace; font-weight: 800;" id="doge-staked-amount">0.00</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Stake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickStake('DOGE', 25)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickStake('DOGE', 50)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickStake('DOGE', 75)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickStake('DOGE', 100)" style="background: #c2a633; color: #000; border: none; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                        <div style="margin-bottom: 0px;">
                            <span style="color: #888; font-size: 0.7rem; text-transform: uppercase; display: block; margin-bottom: 5px;">Unstake Amount</span>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                <button onclick="quickUnstake('DOGE', 25)" style="background: #333; color: #c2a633; border: 1px solid #c2a633; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">25%</button>
                                <button onclick="quickUnstake('DOGE', 50)" style="background: #333; color: #c2a633; border: 1px solid #c2a633; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">50%</button>
                                <button onclick="quickUnstake('DOGE', 75)" style="background: #333; color: #c2a633; border: 1px solid #c2a633; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">75%</button>
                                <button onclick="quickUnstake('DOGE', 100)" style="background: #333; color: #c2a633; border: 1px solid #c2a633; padding: 8px; border-radius: 6px; font-weight: 800; cursor: pointer; font-size: 0.75rem;">100%</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Skill Tree Modal -->
<div id="skill-tree-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content skill-tree-modal">
        <div class="modal-header">
            <h2>üåü Skill Tree</h2>
            <button onclick="closeSkillTreeModal()" class="modal-close">√ó</button>
        </div>
        <div class="modal-body">
            <div style="text-align: center; margin-bottom: 15px;">
                <span style="font-size: 1.2rem; color: #00ff88; font-weight: bold;">
                    üî∑ <span id="skill-tokens-modal">0</span> Skill Tokens Available
                </span>
            </div>

            <!-- Milestone Progress -->
            <div id="milestone-progress" style="margin-bottom: 20px; padding: 15px; background: rgba(0,255,136,0.1); border-radius: 8px; border: 1px solid rgba(0,255,136,0.3); text-align: center;">
                <div style="font-size: 0.9rem; color: #00ff88; font-weight: bold;">
                    Reach milestones to earn Skill Tokens!
                </div>
            </div>

            <div id="skill-tree-container"></div>
        </div>
    </div>
</div>

<!-- Footer Disclaimer -->
<div style="position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.9); padding: 8px; text-align: center; border-top: 1px solid #333; z-index: 9999;">
    <p style="margin: 0; font-size: 0.7rem; color: #888;">
        <strong style="color: #f7931a;">18+ Only</strong> | This is a simulation game with <strong>NO real cryptocurrency or monetary value</strong>. All assets are virtual and for entertainment only.
        <span style="margin: 0 8px;">|</span>
        <a href="#" onclick="openPrivacyModal(); switchPolicyTab('privacy'); return false;" style="color: #f7931a; text-decoration: underline; cursor: pointer;">Privacy Policy</a>
        <span style="margin: 0 8px;">|</span>
        <a href="#" onclick="openPrivacyModal(); switchPolicyTab('cookies'); return false;" style="color: #f7931a; text-decoration: underline; cursor: pointer;">Cookie Policy</a>
        <span style="margin: 0 8px;">|</span>
        <a href="#" onclick="openPrivacyModal(); switchPolicyTab('terms'); return false;" style="color: #f7931a; text-decoration: underline; cursor: pointer;">Terms & Conditions</a>
        <span style="margin: 0 8px;">|</span>
        <a href="#" class="termly-display-preferences" style="color: #f7931a; text-decoration: underline; cursor: pointer;">Consent Preferences</a>
        <span style="margin: 0 8px;">|</span>
        <a href="#" onclick="openPrivacyModal(); switchPolicyTab('contact'); return false;" style="color: #f7931a; text-decoration: underline; cursor: pointer;">Contact</a>
        <span style="margin: 0 8px;">|</span>
        <span style="color: #666;">Idle BTC Miner 2026 - Aaron Khan</span>
    </p>
</div>

<!-- Inline Policy Tab Switching Functions -->
<script>
    // Privacy modal functions - defined early so footer links work
    function openPrivacyModal() {
        document.getElementById('privacy-modal').style.display = 'flex';
    }

    function closePrivacyModal() {
        document.getElementById('privacy-modal').style.display = 'none';
    }

    // Age disclaimer function - defined early so modal button works
    function acceptAgeDisclaimer() {
        localStorage.setItem('ageDisclaimerAccepted', 'true');
        document.getElementById('age-disclaimer-modal').style.display = 'none';
    }

    function switchPolicyTab(tab) {
        const iframe = document.getElementById('privacy-iframe');
        const privacyTab = document.getElementById('policy-tab-privacy');
        const cookiesTab = document.getElementById('policy-tab-cookies');
        const termsTab = document.getElementById('policy-tab-terms');
        const contactTab = document.getElementById('policy-tab-contact');
        const firebaseTab = document.getElementById('policy-tab-firebase');

        // Reset all tabs to inactive state
        privacyTab.style.background = '#ddd';
        privacyTab.style.color = '#000';
        cookiesTab.style.background = '#ddd';
        cookiesTab.style.color = '#000';
        termsTab.style.background = '#ddd';
        termsTab.style.color = '#000';
        contactTab.style.background = '#ddd';
        contactTab.style.color = '#000';
        firebaseTab.style.background = '#ddd';
        firebaseTab.style.color = '#000';

        if (tab === 'privacy') {
            iframe.src = 'privacy.html';
            privacyTab.style.background = '#f7931a';
            privacyTab.style.color = '#000';
        } else if (tab === 'cookies') {
            iframe.src = 'cookies.html';
            cookiesTab.style.background = '#f7931a';
            cookiesTab.style.color = '#000';
        } else if (tab === 'terms') {
            iframe.src = 'terms.html';
            termsTab.style.background = '#f7931a';
            termsTab.style.color = '#000';
        } else if (tab === 'contact') {
            iframe.src = 'contact.html';
            contactTab.style.background = '#f7931a';
            contactTab.style.color = '#000';
        } else if (tab === 'firebase') {
            iframe.src = 'privacy-modal.html';
            firebaseTab.style.background = '#f7931a';
            firebaseTab.style.color = '#000';
        }
    }

    function openTermsModal() {
        document.getElementById('terms-acceptance-modal').style.display = 'flex';
    }

    function acceptTerms() {
        localStorage.setItem('termsAccepted', 'true');
        document.getElementById('terms-acceptance-modal').style.display = 'none';
    }

    function declineTerms() {
        alert('You must accept the Terms and Conditions to use this service.');
        // Optionally redirect or disable access
    }

    // Check if terms have been accepted on page load
    window.addEventListener('load', function() {
        if (!localStorage.getItem('termsAccepted')) {
            openTermsModal();
        }
    });
</script>

<!-- Cookie Consent Banner -->
<div id="cookie-consent-banner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 20px; border-top: 3px solid #f7931a; z-index: 99999; box-shadow: 0 -5px 20px rgba(0,0,0,0.5);">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
        <div style="flex: 1; min-width: 300px;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <span style="font-size: 2rem; margin-right: 10px;">üç™</span>
                <h3 style="color: #f7931a; margin: 0; font-size: 1.3rem;">Cookie Consent</h3>
            </div>
            <p style="color: #ccc; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                We use cookies to enhance your experience, analyze site traffic, and for analytics purposes. By clicking "Accept All", you consent to our use of cookies. You can manage your preferences or decline non-essential cookies.
            </p>
            <p style="color: #888; margin: 10px 0 0 0; font-size: 0.8rem;">
                <a href="#" onclick="openPrivacyModal(); switchPolicyTab('cookies'); return false;" style="color: #f7931a; text-decoration: underline;">View Cookie Policy</a>
                <span style="margin: 0 5px;">|</span>
                <a href="#" onclick="openPrivacyModal(); switchPolicyTab('privacy'); return false;" style="color: #f7931a; text-decoration: underline;">Privacy Policy</a>
            </p>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
            <button onclick="acceptAllCookies()" style="background: #f7931a; color: #000; border: none; padding: 12px 30px; font-weight: 800; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; box-shadow: 0 4px 15px rgba(247,147,26,0.4); white-space: nowrap;">
                ‚úì Accept All
            </button>
            <button onclick="acceptEssentialOnly()" style="background: #555; color: #fff; border: 1px solid #777; padding: 12px 25px; font-weight: 600; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; white-space: nowrap;">
                Essential Only
            </button>
            <button onclick="openCookieSettings()" style="background: transparent; color: #f7931a; border: 1px solid #f7931a; padding: 12px 25px; font-weight: 600; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; white-space: nowrap;">
                ‚öôÔ∏è Manage Preferences
            </button>
        </div>
    </div>
</div>

<!-- Cookie Consent JavaScript -->
<script>
    // Check if user has already made a cookie choice
    function checkCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            // Show banner after a short delay (after age/terms modals)
            setTimeout(() => {
                const banner = document.getElementById('cookie-consent-banner');
                if (banner) {
                    banner.style.display = 'block';
                }
            }, 2000);
        }
    }

    // Accept all cookies
    function acceptAllCookies() {
        localStorage.setItem('cookieConsent', 'all');
        localStorage.setItem('cookieConsentDate', new Date().toISOString());

        // Enable Google Analytics and other tracking
        window['ga-disable-G-2H559N5J64'] = false;

        // Hide banner
        document.getElementById('cookie-consent-banner').style.display = 'none';

        // Optional: Trigger Termly consent if available
        if (typeof window.termlyConsent !== 'undefined') {
            window.termlyConsent('accept');
        }

        console.log('All cookies accepted');
    }

    // Accept essential cookies only
    function acceptEssentialOnly() {
        localStorage.setItem('cookieConsent', 'essential');
        localStorage.setItem('cookieConsentDate', new Date().toISOString());

        // Disable Google Analytics
        window['ga-disable-G-2H559N5J64'] = true;

        // Hide banner
        document.getElementById('cookie-consent-banner').style.display = 'none';

        // Optional: Trigger Termly essential only if available
        if (typeof window.termlyConsent !== 'undefined') {
            window.termlyConsent('essential');
        }

        console.log('Essential cookies only');
    }

    // Open Termly cookie settings or custom preferences
    function openCookieSettings() {
        // Try to trigger Termly settings if available
        const termlyButton = document.querySelector('.termly-display-preferences');
        if (termlyButton) {
            termlyButton.click();
        } else {
            // Fallback: show custom settings or just accept essential
            if (confirm('Would you like to accept all cookies?\n\nClick OK to accept all cookies.\nClick Cancel to use essential cookies only.')) {
                acceptAllCookies();
            } else {
                acceptEssentialOnly();
            }
        }
    }

    // Revoke consent (for testing or user preference changes)
    function revokeCookieConsent() {
        localStorage.removeItem('cookieConsent');
        localStorage.removeItem('cookieConsentDate');
        document.getElementById('cookie-consent-banner').style.display = 'block';
    }

    // Check consent on page load
    window.addEventListener('DOMContentLoaded', checkCookieConsent);
</script>

<!-- Load skill tree system first so its functions are available to game.js -->
<script src="skilltree.js"></script>

<!-- Load main game after skill tree functions are defined -->
<script src="game.js"></script>

<!-- Load staking system after main game variables are defined -->
<script src="staking.js"></script>

<!-- Load leaderboard system -->
<script src="leaderboard.js"></script>

<!-- Initialize Firebase -->
<script>
    // Function to show login screen
    function showLoginScreen() {
        const loginScreen = document.getElementById('login-screen');
        if (loginScreen) {
            loginScreen.style.display = 'flex';
        }
    }

    // Make it globally available
    window.showLoginScreen = showLoginScreen;

    // Initialize Firebase when page loads
    window.addEventListener('DOMContentLoaded', () => {
        console.log('üöÄ Initializing Firebase...');

        // Initialize Firebase
        const firebaseReady = initializeFirebase();

        if (firebaseReady) {
            console.log('‚úÖ Firebase ready!');

            // Setup authentication listener
            if (window.setupAuthListener) {
                setupAuthListener();
            }

            // Start auto-save
            startAutoSave();

            // Note: Manual sync button is now integrated into user UI
            console.log('‚úÖ Manual save integrated into user menu');

            // Show login screen first on initial load
            // User must login or play as guest
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('main-layout').style.display = 'none';
        } else {
            console.warn('‚ö†Ô∏è Firebase not initialized - running in offline mode');
            // Allow game to run without Firebase in offline mode
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-layout').style.display = 'flex';
        }
    });

    // Clear game save data on page load to prevent loading other account's data
    // But preserve user preferences like consent and dismissed instructions
    console.log('üîÑ Page loaded - clearing previous game session data');
    localStorage.removeItem('satoshiTerminalSave');

    // Save game before user closes/refreshes page
    window.addEventListener('beforeunload', (e) => {
        if (typeof auth !== 'undefined' && auth && auth.currentUser) {
            saveGameToCloud();
        }
    });
</script>

</body>

</html>
