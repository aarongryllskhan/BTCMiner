function getNextMultiplierCost(e){const t=[15e5,15e6,15e7,15e8];if(e<t.length)return t[e];let n=t[t.length-1];for(let a=t.length;a<=e;a++)n*=1e3;return n}function getManualHashRateCost(e){const t=[1e5,1e6,1e7,1e8,1e9];if(e<t.length)return t[e];let n=t[t.length-1];for(let a=t.length;a<=e;a++)n*=10;return n}let btcPrice=1e5,btcBalance=0,btcLifetime=0,btcPerSec=0,btcClickValue=25e-7;const BTC_MIN_PRICE=5e4,BTC_MAX_PRICE=2e5;let ethPrice=3500,ethBalance=0,ethLifetime=0,ethPerSec=0,ethClickValue=7143e-8;const ETH_MIN_PRICE=1500,ETH_MAX_PRICE=8e3;let dogePrice=.25,dogeBalance=0,dogeLifetime=0,dogePerSec=0,dogeClickValue=1;const DOGE_MIN_PRICE=.05,DOGE_MAX_PRICE=2;let btcMultiplierLevel=0,ethMultiplierLevel=0,dogeMultiplierLevel=0;const MULTIPLIER_COSTS=[1e4,1e5,1e6,1e9];let btcManualHashRateLevel=0,ethManualHashRateLevel=0,dogeManualHashRateLevel=0,hardwareEquity=0;class BigNumber{constructor(e=0,t=0){if(0!==e){for(;e>=1e3&&t<2e3;)e/=1e3,t+=3;for(;e<1&&0!==e&&t>-2e3;)e*=1e3,t-=3}this.mantissa=e,this.exponent=t}toNumber(){return 0===this.mantissa?0:this.mantissa*Math.pow(10,this.exponent)}add(e){if(0===this.mantissa)return new BigNumber(e.mantissa,e.exponent);if(0===e.mantissa)return new BigNumber(this.mantissa,this.exponent);if(Math.abs(this.exponent-e.exponent)>3)return this.exponent>e.exponent?new BigNumber(this.mantissa,this.exponent):new BigNumber(e.mantissa,e.exponent);if(this.exponent===e.exponent)return new BigNumber(this.mantissa+e.mantissa,this.exponent);if(this.exponent>e.exponent){const t=this.exponent-e.exponent,n=e.mantissa/Math.pow(10,t);return new BigNumber(this.mantissa+n,this.exponent)}{const t=e.exponent-this.exponent,n=this.mantissa/Math.pow(10,t);return new BigNumber(e.mantissa+n,e.exponent)}}multiply(e){return 0===this.mantissa||0===e.mantissa?new BigNumber(0,0):new BigNumber(this.mantissa*e.mantissa,this.exponent+e.exponent)}divide(e){return 0===e.mantissa||0===this.mantissa?new BigNumber(0,0):new BigNumber(this.mantissa/e.mantissa,this.exponent-e.exponent)}compare(e){return this.exponent!==e.exponent?this.exponent>e.exponent?1:-1:this.mantissa>e.mantissa?1:this.mantissa<e.mantissa?-1:0}static fromNumber(e){if(0===e)return new BigNumber(0,0);const t=Math.floor(Math.log10(Math.abs(e))),n=e/Math.pow(10,t);return new BigNumber(n,t)}}let dollarBalance=0,lastTickTime=Date.now(),lastPriceUpdateTime=0,manualHashClickTime=0,manualHashCooldownEnd=0,clickTimestamps=[],lastCoinSpawnTime=0,priceSwingsStarted=!1,sessionStartTime=Date.now(),sessionStartBalance=0,sessionStartNetWorth=0,sessionEarnings=0,lifetimeEarnings=0,earningsThisRun=0,lastSyncedSessionEarnings=0;const ABBREVIATIONS=[{threshold:Infinity,suffix:"Qng"},{threshold:Infinity,suffix:"Qg"},{threshold:Infinity,suffix:"Dg"},{threshold:Infinity,suffix:"Tg"},{threshold:Infinity,suffix:"Qag"},{threshold:Infinity,suffix:"Qig"},{threshold:Infinity,suffix:"Sxg"},{threshold:Infinity,suffix:"Spg"},{threshold:Infinity,suffix:"Ocg"},{threshold:Infinity,suffix:"Nog"},{threshold:Infinity,suffix:"Ung"},{threshold:Infinity,suffix:"Dung"},{threshold:Infinity,suffix:"Tung"},{threshold:Infinity,suffix:"Qaung"},{threshold:Infinity,suffix:"Qiung"},{threshold:Infinity,suffix:"Sxung"},{threshold:Infinity,suffix:"Spung"},{threshold:Infinity,suffix:"Ocung"},{threshold:Infinity,suffix:"Noung"},{threshold:Infinity,suffix:"Unng"},{threshold:Infinity,suffix:"Dunng"},{threshold:Infinity,suffix:"Tunng"},{threshold:Infinity,suffix:"Qaung"},{threshold:Infinity,suffix:"Qiung"},{threshold:Infinity,suffix:"Sxun"},{threshold:Infinity,suffix:"Spun"},{threshold:Infinity,suffix:"Ocun"},{threshold:Infinity,suffix:"Noun"},{threshold:Infinity,suffix:"Unt"},{threshold:Infinity,suffix:"Dunt"},{threshold:Infinity,suffix:"Tunt"},{threshold:Infinity,suffix:"Qaunt"},{threshold:Infinity,suffix:"Qiunt"},{threshold:Infinity,suffix:"Sxunt"},{threshold:Infinity,suffix:"Spunt"},{threshold:Infinity,suffix:"Ocunt"},{threshold:Infinity,suffix:"Nount"},{threshold:Infinity,suffix:"Unqua"},{threshold:Infinity,suffix:"Dunqua"},{threshold:Infinity,suffix:"Tunqua"},{threshold:Infinity,suffix:"Qaqua"},{threshold:Infinity,suffix:"Qiqua"},{threshold:Infinity,suffix:"Sxqua"},{threshold:Infinity,suffix:"Spqua"},{threshold:Infinity,suffix:"Ocqua"},{threshold:Infinity,suffix:"Noqua"},{threshold:Infinity,suffix:"VgCe"},{threshold:Infinity,suffix:"UDcCe"},{threshold:Infinity,suffix:"DcCe"},{threshold:Infinity,suffix:"NCe"},{threshold:Infinity,suffix:"OCe"},{threshold:Infinity,suffix:"SpCe"},{threshold:Infinity,suffix:"SxCe"},{threshold:Infinity,suffix:"QiCe"},{threshold:Infinity,suffix:"QaCe"},{threshold:Infinity,suffix:"TCe"},{threshold:Infinity,suffix:"DCe"},{threshold:Infinity,suffix:"UCe"},{threshold:Infinity,suffix:"NCe"},{threshold:Infinity,suffix:"OCe"},{threshold:Infinity,suffix:"SpCe"},{threshold:Infinity,suffix:"SxCe"},{threshold:Infinity,suffix:"QiCe"},{threshold:Infinity,suffix:"QaCe"},{threshold:Infinity,suffix:"TCe"},{threshold:1e306,suffix:"UCe"},{threshold:1e303,suffix:"Ce"},{threshold:1e300,suffix:"NoN"},{threshold:1e297,suffix:"OcN"},{threshold:1e294,suffix:"SpN"},{threshold:1e291,suffix:"SxN"},{threshold:1e288,suffix:"QiNg"},{threshold:1e285,suffix:"QNg"},{threshold:1e282,suffix:"TNg"},{threshold:1e279,suffix:"DNg"},{threshold:1e276,suffix:"UNg"},{threshold:1e273,suffix:"Ng"},{threshold:1e270,suffix:"NoO"},{threshold:1e267,suffix:"OcO"},{threshold:1e264,suffix:"SpO"},{threshold:1e261,suffix:"SxO"},{threshold:1e258,suffix:"QiO"},{threshold:1e255,suffix:"QOg"},{threshold:1e252,suffix:"TOg"},{threshold:1e249,suffix:"DOg"},{threshold:1e246,suffix:"UOg"},{threshold:1e243,suffix:"Og"},{threshold:1e240,suffix:"NoSp"},{threshold:1e237,suffix:"OcSp"},{threshold:1e234,suffix:"SpSp"},{threshold:1e231,suffix:"SxSp"},{threshold:1e228,suffix:"QiSp"},{threshold:1e225,suffix:"QSp"},{threshold:1e222,suffix:"TSp"},{threshold:1e219,suffix:"DSp"},{threshold:1e216,suffix:"USp"},{threshold:1e213,suffix:"Spt"},{threshold:1e210,suffix:"NoS"},{threshold:1e207,suffix:"OcS"},{threshold:1e204,suffix:"SpS"},{threshold:1e201,suffix:"SxS"},{threshold:1e198,suffix:"QiS"},{threshold:1e195,suffix:"QSg"},{threshold:1e192,suffix:"TSg"},{threshold:1e189,suffix:"DSg"},{threshold:1e186,suffix:"USg"},{threshold:1e183,suffix:"Sg"},{threshold:1e180,suffix:"NoQi"},{threshold:1e177,suffix:"OcQi"},{threshold:1e174,suffix:"SpQi"},{threshold:1e171,suffix:"SxQi"},{threshold:1e168,suffix:"QiQi"},{threshold:1e165,suffix:"QQi"},{threshold:1e162,suffix:"TQi"},{threshold:1e159,suffix:"DQi"},{threshold:1e156,suffix:"UQi"},{threshold:1e153,suffix:"Qui"},{threshold:1e150,suffix:"NoQ"},{threshold:1e147,suffix:"OcQ"},{threshold:1e144,suffix:"SpQ"},{threshold:1e141,suffix:"SxQ"},{threshold:1e138,suffix:"QiQ"},{threshold:1e135,suffix:"QQu"},{threshold:1e132,suffix:"TQu"},{threshold:1e129,suffix:"DQu"},{threshold:1e126,suffix:"UQu"},{threshold:1e123,suffix:"Qua"},{threshold:1e120,suffix:"NoT"},{threshold:1e117,suffix:"OcT"},{threshold:1e114,suffix:"SpT"},{threshold:1e111,suffix:"SxT"},{threshold:1e108,suffix:"QiT"},{threshold:1e105,suffix:"QaT"},{threshold:1e102,suffix:"TTr"},{threshold:1e99,suffix:"DTr"},{threshold:1e96,suffix:"UTr"},{threshold:1e93,suffix:"Tr"},{threshold:1e90,suffix:"NoV"},{threshold:1e87,suffix:"OcV"},{threshold:1e84,suffix:"SpV"},{threshold:1e81,suffix:"SxV"},{threshold:1e78,suffix:"QiV"},{threshold:1e75,suffix:"QaV"},{threshold:1e72,suffix:"TVi"},{threshold:1e69,suffix:"DVi"},{threshold:1e66,suffix:"UVi"},{threshold:1e63,suffix:"Vi"},{threshold:1e60,suffix:"NoD"},{threshold:1e57,suffix:"OcD"},{threshold:1e54,suffix:"SpD"},{threshold:1e51,suffix:"SxD"},{threshold:1e48,suffix:"QiD"},{threshold:1e45,suffix:"QaD"},{threshold:1e42,suffix:"TVi"},{threshold:1e39,suffix:"DDe"},{threshold:1e36,suffix:"UDe"},{threshold:1e33,suffix:"De"},{threshold:1e30,suffix:"No"},{threshold:1e27,suffix:"Oc"},{threshold:1e24,suffix:"Sp"},{threshold:1e21,suffix:"Sx"},{threshold:1e18,suffix:"Qi"},{threshold:1e15,suffix:"Qa"},{threshold:1e12,suffix:"T"},{threshold:1e9,suffix:"B"},{threshold:1e6,suffix:"M"},{threshold:1e3,suffix:"K"}];window.gameState||(window.gameState={lifetimeEarnings:0,dollarBalance:0}),window.btcPerSec=btcPerSec,window.ethPerSec=ethPerSec,window.dogePerSec=dogePerSec,window.btcPrice=btcPrice,window.ethPrice=ethPrice,window.dogePrice=dogePrice,window.totalMiningMultiplier=1;let buyQuantity=1,chartHistory=[],chartTimestamps=[],btcChartHistory=[],ethChartHistory=[],dogeChartHistory=[],cashChartHistory=[],lastChartUpdateTime=Date.now(),chartStartTime=Date.now();function trimChartData(){const e=600;chartHistory.length>e&&(chartHistory=chartHistory.slice(-600),chartTimestamps=chartTimestamps.slice(-600),btcChartHistory=btcChartHistory.slice(-600),ethChartHistory=ethChartHistory.slice(-600),dogeChartHistory=dogeChartHistory.slice(-600),cashChartHistory=cashChartHistory.slice(-600))}let chartMarkers=[],lastMarkerTime=Date.now(),chartIntervalMinutes=10,hashRateChartHistory=[],powerChartHistory=[],currentPowerValues=[],powerChartColors=[],cumulativePowerUsed=0,maxPowerCapacity=1,ethHashRateChartHistory=[],dogeHashRateChartHistory=[],hashRateChartTimestamps=[],lastHashRateChartUpdateTime=Date.now(),currentChartView="networth",hashRateChartInstance=null,powerChartInstance=null,currentHashrateView="hashrate",lastUIUpdateTime=0,lastChartDataCollectionTime=0,lastPowerChartUpdateTime=0,lastShopReinitTime=0,lastStatsUpdateTime=0,lastChartScaleCalcTime=0,lastChartDataLength=0,lastAscensionUIUpdateTime=0,lastMilestoneCheckTime=0,lastAchievementCheckTime=0,rugpullMilestoneAnnounced=!1,chartYAxisScaleMultiplier=10,userControllingZoom=!1,userHasSetZoom=!1,userLockedChartMax=null,zoomResetTimeout=null,cachedChartMax=0,lastCachedChartLength=0,cachedChartLabels=[],lastCachedLabelCount=0,hackingGameActive=!1,hackingGameDifficulty="EASY",hackingVulnerabilitiesToFind=[],hackingVulnerabilitiesFound=[],hackingGameStartTime=0,hackingGameTimeLimit=3e4,hackingLivesRemaining=0,hackingMaxLives=0,speedBoostActive=!1,speedBoostEndTime=0,speedBoostMultiplier=1,hackingGamesPlayed=0,hackingGamesWon=0,hackingGamesWonByDifficulty={EASY:0,MEDIUM:0,HARD:0},hackingConsecutiveWins=0,hackingNextNotificationTime=0,hackingTotalRewardsEarned=0,hackingLastRewards={btc:0,eth:0,doge:0,usd:0,totalUsd:0},hackingCooldowns={EASY:0,MEDIUM:0,HARD:0},whackGameActive=!1,whackGameManuallyClosed=!1,whackGameDifficulty="EASY",whackGameStartTime=0,whackGameTimeLimit=3e4,whackGameScore=0,whackGameBlocksHit=0,whackGameLivesRemaining=0,whackGameMaxLives=0,whackGameGamesPlayed=0,whackGameGamesWon=0,whackGameTotalRewardsEarned=0,whackLastRewards={btc:0,eth:0,doge:0,usd:0,totalUsd:0},whackCooldowns={EASY:0,MEDIUM:0,HARD:0},whackActiveBlock=null,whackActiveBlocks=new Set,whackSpawnInterval=null,whackGameInterval=null,networkGameActive=!1,networkGameDifficulty="EASY",networkGameStartTime=0,networkGameTimeLimit=1e4,networkGameMaxHP=5e4,networkGameCurrentHP=5e4,networkGameTotalDamage=0,networkGameClickDamageTotal=0,networkGameClickDamage=20,networkGameGamesPlayed=0,networkGameGamesWon=0,networkGameWonThisRound=!1,networkGameTotalRewardsEarned=0,networkLastRewards={btc:0,eth:0,doge:0,usd:0,totalUsd:0},networkGameInterval=null,packetGameGamesPlayed=0,packetGameGamesWon=0,packetGameTotalRewardsEarned=0,packetLastRewards={btc:0,eth:0,doge:0,usd:0,totalUsd:0},packetCooldowns={EASY:0,MEDIUM:0,HARD:0},totalPowerAvailable=0,totalPowerUsed=0,totalPowerUSD=0;const powerUpgrades=[{id:0,name:"Basic Power Strip",baseUsd:10,basePower:25},{id:1,name:"Regulated PSU",baseUsd:100,basePower:750},{id:2,name:"High-Efficiency PSU",baseUsd:1100,basePower:4500},{id:3,name:"Server-Grade PSU",baseUsd:12e3,basePower:12e3},{id:4,name:"Mining Power Distribution Unit",baseUsd:132e3,basePower:35e3},{id:5,name:"Modular Data Center Power System",baseUsd:1452e3,basePower:12e4},{id:6,name:"Dedicated Substation Power Unit",baseUsd:16e6,basePower:45e4},{id:7,name:"Industrial Grid Connection",baseUsd:176e6,basePower:3e6},{id:8,name:"Hydroelectric Power Station",baseUsd:194e7,basePower:15e6},{id:9,name:"Nuclear Reactor Array",baseUsd:214e8,basePower:5e7},{id:10,name:"Fusion Energy Complex",baseUsd:235e9,basePower:25e7},{id:11,name:"Dyson Sphere Power Collector",baseUsd:258e10,basePower:12e8},{id:12,name:"Stellar Energy Tapestry",baseUsd:284e11,basePower:5e9}].map(e=>({...e,level:0,currentUsd:e.baseUsd,currentPower:0})),equipmentPowerReqs={0:0,1:2.5,2:75,3:450,4:1200,5:3500,6:12e3,7:45e3,8:3e5,9:15e5,10:5e6,11:25e6,12:12e7,13:65e7,14:35e8,15:18e9};let audioContext,indicatorTimeouts={btc:null,eth:null,doge:null};function updatePriceIndicator(e,t,n){const a=n-t,o=(a/t*100).toFixed(2),i=a>=0,s=e+"-indicator",l=e+"-change",r=document.getElementById(s),c=document.getElementById(l);indicatorTimeouts[e]&&clearTimeout(indicatorTimeouts[e]),r&&c&&(r.textContent=i?"‚ñ≤":"‚ñº",r.style.color=i?"#00ff88":"#ff3344",c.textContent=(i?"+":"")+o+"%",c.style.color=i?"#00ff88":"#ff3344",indicatorTimeouts[e]=setTimeout(()=>{r.textContent="",c.textContent="",indicatorTimeouts[e]=null},800))}function btcTinySwing(){setTimeout(()=>{let e=btcPrice;const t=1e5,n=Math.abs(btcPrice-t)/Math.abs(1e5);let a,o=5e-4*Math.random()+5e-4;a=Math.random()<.5+.45*n?btcPrice>t?-1:1:Math.random()>.5?1:-1;let i=e*(1+a*o);btcPrice=Math.max(5e4,Math.min(2e5,i)),updatePriceIndicator("btc",e,btcPrice),updateUI(),btcTinySwing()},2e3)}function btcFrequentSwing(){let e=58e3*Math.random()+2e3;setTimeout(()=>{let e=.009*Math.random()+.001,t=btcPrice;const n=1e5,a=Math.abs(btcPrice-n)/Math.abs(1e5);let o=t*(1+e);if(Math.random()<.75+.25*a){o=t+.03*(1e5-t)}else{o=t*(1+(Math.random()>.5?1:-1)*e)}btcPrice=Math.max(5e4,Math.min(2e5,o)),updatePriceIndicator("btc",t,btcPrice),updateUI(),btcFrequentSwing()},e)}function ethTinySwing(){setTimeout(()=>{let e=ethPrice;const t=3500,n=Math.abs(ethPrice-t)/Math.abs(4500);let a,o=5e-4*Math.random()+5e-4;a=Math.random()<.5+.45*n?ethPrice>t?-1:1:Math.random()>.5?1:-1;let i=e*(1+a*o);ethPrice=Math.max(1500,Math.min(8e3,i)),updatePriceIndicator("eth",e,ethPrice),updateUI(),ethTinySwing()},2300)}function ethFrequentSwing(){let e=72e3*Math.random()+3e3;setTimeout(()=>{let e=.011*Math.random()+.001,t=ethPrice;const n=Math.abs(ethPrice-3500)/Math.abs(4500);let a=t*(1+e);if(Math.random()<.75+.25*n){a=t+.03*(3500-t)}else{a=t*(1+(Math.random()>.5?1:-1)*e)}ethPrice=Math.max(1500,Math.min(8e3,a)),updatePriceIndicator("eth",t,ethPrice),updateUI(),ethFrequentSwing()},e)}function dogeTinySwing(){setTimeout(()=>{let e=dogePrice;const t=.25,n=Math.abs(dogePrice-t)/Math.abs(1.75);let a,o=.001*Math.random()+5e-4;a=Math.random()<.5+.45*n?dogePrice>t?-1:1:Math.random()>.5?1:-1;let i=e*(1+a*o*1.5);dogePrice=Math.max(.05,Math.min(2,i)),updatePriceIndicator("doge",e,dogePrice),updateUI(),dogeTinySwing()},2700)}function dogeFrequentSwing(){let e=43e3*Math.random()+2e3;setTimeout(()=>{let e=.0165*Math.random()+.0015,t=dogePrice;const n=Math.abs(dogePrice-.25)/Math.abs(1.75);let a=t*(1+1.5*e);if(Math.random()<.75+.25*n){a=t+.03*(.25-t)}else{a=t*(1+(Math.random()>.5?1:-1)*e*1.5)}dogePrice=Math.max(.05,Math.min(2,a)),updatePriceIndicator("doge",t,dogePrice),updateUI(),dogeFrequentSwing()},e)}function btcBigSwing(){let e=3e5*Math.random()+3e5;setTimeout(()=>{let e=.075*Math.random()+.025,t=(Math.random()>.5?1:-1)*e,n=btcPrice;btcPrice=Math.max(5e4,Math.min(2e5,btcPrice*(1+t))),updatePriceIndicator("btc",n,btcPrice);const a=(btcPrice-n)/n*100;"function"==typeof window.showNewsPopup?window.showNewsPopup("btc",a,a>=0):console.warn("‚ö†Ô∏è showNewsPopup not available yet, retrying..."),updateUI(),btcBigSwing()},e)}function ethBigSwing(){let e=48e4*Math.random()+24e4;setTimeout(()=>{let e=.095*Math.random()+.025,t=(Math.random()>.5?1:-1)*e,n=ethPrice;ethPrice=Math.max(1500,Math.min(8e3,ethPrice*(1+t))),updatePriceIndicator("eth",n,ethPrice);const a=(ethPrice-n)/n*100;"function"==typeof window.showNewsPopup?window.showNewsPopup("eth",a,a>=0):console.warn("‚ö†Ô∏è showNewsPopup not available yet, retrying..."),updateUI(),ethBigSwing()},e)}function dogeBigSwing(){let e=3e5*Math.random()+18e4;setTimeout(()=>{let e=.15*Math.random()+.03,t=(Math.random()>.5?1:-1)*e,n=dogePrice;dogePrice=Math.max(.05,Math.min(2,dogePrice*(1+1.8*t))),updatePriceIndicator("doge",n,dogePrice);const a=(dogePrice-n)/n*100;"function"==typeof window.showNewsPopup?window.showNewsPopup("doge",a,a>=0):console.warn("‚ö†Ô∏è showNewsPopup not available yet, retrying..."),updateUI(),dogeBigSwing()},e)}try{audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.error("Could not create audio context:",e),audioContext=null}function playClickSound(){if(!isMuted&&audioContext)try{const e=audioContext.currentTime,t=audioContext.createOscillator(),n=audioContext.createGain();t.connect(n),n.connect(audioContext.destination),t.frequency.setValueAtTime(800,e),t.frequency.exponentialRampToValueAtTime(600,e+.1),t.type="sine",n.gain.setValueAtTime(.05,e),n.gain.exponentialRampToValueAtTime(.001,e+.1),t.start(e),t.stop(e+.1)}catch(e){console.error("Error playing click sound:",e)}}function playUpgradeSound(){if(!isMuted&&audioContext)try{const e=audioContext.currentTime,t=audioContext.createOscillator(),n=audioContext.createGain();t.connect(n),n.connect(audioContext.destination),t.frequency.setValueAtTime(500,e),t.frequency.exponentialRampToValueAtTime(1200,e+.2),t.type="square",n.gain.setValueAtTime(.04,e),n.gain.exponentialRampToValueAtTime(.001,e+.2),t.start(e),t.stop(e+.2)}catch(e){console.error("Error playing upgrade sound:",e)}}function isMilestoneLevel(e){return 5===e||10===e||25===e||50===e||e>=100&&(e-100)%50==0}function getNextMilestoneAfter(e){if(e<5)return 5;if(e<10)return 10;if(e<25)return 25;if(e<50)return 50;const t=50*Math.ceil((e+1)/50);return t>=100?t:100}function generateMilestones(e=1e4){const t=[5,10,25,50];for(let n=100;n<=e;n+=50)t.push(n);return t}const MILESTONE_LEVELS=generateMilestones(1e4);function calculateMilestoneDoublingCost(e){return 20*e.baseUsd}const btcUpgrades=[{id:0,name:"Manual Hash Rate",baseUsd:100,baseYield:0,isClickUpgrade:!0,clickIncrease:25e-8},{id:1,name:"USB Miner",baseUsd:5,baseYield:25e-6},{id:2,name:"GTX 1660 Super",baseUsd:50,baseYield:25e-5},{id:3,name:"RTX 5090 Rig",baseUsd:550,baseYield:.002},{id:4,name:"ASIC Mining Unit",baseUsd:6e3,baseYield:.012},{id:5,name:"Liquid ASIC Rig",baseUsd:66e3,baseYield:.066},{id:6,name:"Mobile Mining Container",baseUsd:726e3,baseYield:.3564},{id:7,name:"Geothermal Mining Farm",baseUsd:8e6,baseYield:1.99584},{id:8,name:"Data Center Facility",baseUsd:88e6,baseYield:11.176704},{id:9,name:"Orbital Data Relay",baseUsd:97e7,baseYield:65.9425536},{id:10,name:"Quantum Computer",baseUsd:107e8,baseYield:402.24957696},{id:11,name:"Advanced Quantum Rig",baseUsd:117e9,baseYield:2514.059856},{id:12,name:"Superintelligent AI Network",baseUsd:129e10,baseYield:15712.8741},{id:13,name:"Dimensional Mining Array",baseUsd:142e11,baseYield:98205.463125},{id:14,name:"Multiversal Hash Grid",baseUsd:156e12,baseYield:613784.14453125},{id:15,name:"Infinite Energy Extractor",baseUsd:172e13,baseYield:3836150.90332031}].map(e=>({...e,level:0,currentUsd:e.baseUsd,currentYield:0,milestoneDoublings:MILESTONE_LEVELS.reduce((e,t)=>(e[t]=!1,e),{}),doubleMultiplier:1})),ethUpgrades=[{id:0,name:"Manual Hash Rate",baseUsd:100,baseYield:0,isClickUpgrade:!0,clickIncrease:7143e-8},{id:1,name:"Single GPU Rig",baseUsd:5,baseYield:71429e-8},{id:2,name:"RTX 4090 Miner",baseUsd:50,baseYield:.00714286},{id:3,name:"8-GPU Mining Rig",baseUsd:550,baseYield:.05714286},{id:4,name:"Professional ETH Farm",baseUsd:6e3,baseYield:.34285714},{id:5,name:"Staking Validator Node",baseUsd:66e3,baseYield:1.88571429},{id:6,name:"Multi-Validator Farm",baseUsd:726e3,baseYield:10.18285714},{id:7,name:"ETH Mining Complex",baseUsd:8e6,baseYield:57.024},{id:8,name:"Enterprise Staking Pool",baseUsd:88e6,baseYield:319.3344},{id:9,name:"Layer 2 Validation Network",baseUsd:97e7,baseYield:1884.07296},{id:10,name:"Ethereum Foundation Node",baseUsd:107e8,baseYield:11492.845056},{id:11,name:"Global Validator Consortium",baseUsd:117e9,baseYield:71830.2816},{id:12,name:"Sharding Supernetwork",baseUsd:129e10,baseYield:448939.26},{id:13,name:"Zero-Knowledge Proof Farm",baseUsd:142e11,baseYield:2805870.375},{id:14,name:"Interchain Bridge Network",baseUsd:156e12,baseYield:17536689.84375},{id:15,name:"Ethereum 3.0 Genesis Node",baseUsd:172e13,baseYield:109604311.52343747}].map(e=>({...e,level:0,currentUsd:e.baseUsd,currentYield:0,milestoneDoublings:MILESTONE_LEVELS.reduce((e,t)=>(e[t]=!1,e),{}),doubleMultiplier:1})),dogeUpgrades=[{id:0,name:"Manual Hash Rate",baseUsd:100,baseYield:0,isClickUpgrade:!0,clickIncrease:.01},{id:1,name:"Basic Scrypt Miner",baseUsd:5,baseYield:10},{id:2,name:"L3+ ASIC Miner",baseUsd:50,baseYield:100},{id:3,name:"Mini DOGE Farm",baseUsd:550,baseYield:800},{id:4,name:"Scrypt Mining Pool",baseUsd:6e3,baseYield:4800},{id:5,name:"Industrial DOGE Facility",baseUsd:66e3,baseYield:26400},{id:6,name:"DOGE Megafarm",baseUsd:726e3,baseYield:142560},{id:7,name:"WOW Mining Complex",baseUsd:8e6,baseYield:798336},{id:8,name:"Moon Mining Station",baseUsd:88e6,baseYield:4470681.6},{id:9,name:"Interplanetary DOGE Network",baseUsd:97e7,baseYield:26377021.44},{id:10,name:"To The Moon Supercomputer",baseUsd:107e8,baseYield:160899830.78},{id:11,name:"Mars Colony Mining Base",baseUsd:117e9,baseYield:1005623942.4},{id:12,name:"Asteroid Belt DOGE Harvester",baseUsd:129e10,baseYield:6285149640},{id:13,name:"Jovian Satellite Network",baseUsd:142e11,baseYield:39282185250},{id:14,name:"Solar System DOGE Grid",baseUsd:156e12,baseYield:245513657812.5},{id:15,name:"Intergalactic SHIBE Matrix",baseUsd:172e13,baseYield:1534460361328.12}].map(e=>({...e,level:0,currentUsd:e.baseUsd,currentYield:0,milestoneDoublings:MILESTONE_LEVELS.reduce((e,t)=>(e[t]=!1,e),{}),doubleMultiplier:1})),upgrades=btcUpgrades;let importInProgress=!1;function saveGame(){if(importInProgress)return void console.log("Save blocked - import in progress");const e=600,t=chartHistory.length>e?chartHistory.slice(-600):chartHistory,n=chartTimestamps.length>e?chartTimestamps.slice(-600):chartTimestamps,a=btcChartHistory.length>e?btcChartHistory.slice(-600):btcChartHistory,o=ethChartHistory.length>e?ethChartHistory.slice(-600):ethChartHistory,i=dogeChartHistory.length>e?dogeChartHistory.slice(-600):dogeChartHistory,s=cashChartHistory.length>e?cashChartHistory.slice(-600):cashChartHistory,l=powerChartHistory.length>e?powerChartHistory.slice(-600):powerChartHistory,r=powerChartColors.length>e?powerChartColors.slice(-600):powerChartColors,c=hashRateChartTimestamps.length>e?hashRateChartTimestamps.slice(-600):hashRateChartTimestamps,d={btcBalance:btcBalance,btcLifetime:btcLifetime,btcClickValue:btcClickValue,btcPerSec:btcPerSec,btcPrice:btcPrice,ethBalance:ethBalance,ethLifetime:ethLifetime,ethClickValue:ethClickValue,ethPerSec:ethPerSec,ethPrice:ethPrice,dogeBalance:dogeBalance,dogeLifetime:dogeLifetime,dogeClickValue:dogeClickValue,dogePerSec:dogePerSec,dogePrice:dogePrice,btcMultiplierLevel:btcMultiplierLevel,ethMultiplierLevel:ethMultiplierLevel,dogeMultiplierLevel:dogeMultiplierLevel,btcManualHashRateLevel:btcManualHashRateLevel,ethManualHashRateLevel:ethManualHashRateLevel,dogeManualHashRateLevel:dogeManualHashRateLevel,dollarBalance:dollarBalance,hardwareEquity:hardwareEquity,lastSaveTime:Date.now(),autoClickerCooldownEnd:autoClickerCooldownEnd,lifetimeEarnings:lifetimeEarnings,sessionEarnings:sessionEarnings,sessionStartTime:sessionStartTime,lifetimeEarningsDisplay:void 0!==window.rugpullState?window.rugpullState.lifetimeEarningsDisplay:0,chartHistory:t,chartTimestamps:n,btcChartHistory:a,ethChartHistory:o,dogeChartHistory:i,cashChartHistory:s,chartStartTime:chartStartTime,powerChartHistory:l,powerChartColors:r,hashRateChartTimestamps:c,totalPowerAvailable:totalPowerAvailable,totalPowerUSD:totalPowerUSD,staking:getStakingData(),powerUpgrades:powerUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentPower:e.currentPower})),btcUpgrades:btcUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),ethUpgrades:ethUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),dogeUpgrades:dogeUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),ascensionData:"function"==typeof getAscensionData?getAscensionData():{},achievements:"undefined"!=typeof achievementsData?achievementsData.achievements:{},hackingData:{gamesPlayed:hackingGamesPlayed,gamesWon:hackingGamesWon,gamesWonByDifficulty:hackingGamesWonByDifficulty,consecutiveWins:hackingConsecutiveWins,totalRewardsEarned:hackingTotalRewardsEarned,speedBoostEndTime:speedBoostActive?speedBoostEndTime:0,speedBoostMultiplier:speedBoostActive?speedBoostMultiplier:1,nextNotificationTime:hackingNextNotificationTime,cooldowns:hackingCooldowns},whackData:{gamesPlayed:whackGameGamesPlayed,gamesWon:whackGameGamesWon,totalRewardsEarned:whackGameTotalRewardsEarned,cooldowns:whackCooldowns},networkData:{gamesPlayed:networkGameGamesPlayed,gamesWon:networkGameGamesWon,totalRewardsEarned:networkGameTotalRewardsEarned},packetData:{gamesPlayed:packetGameGamesPlayed,gamesWon:packetGameGamesWon,totalRewardsEarned:packetGameTotalRewardsEarned,cooldowns:packetCooldowns}};try{const e=JSON.stringify(d);localStorage.setItem("satoshiTerminalSave",e);const t=localStorage.getItem("satoshiTerminalSave");t&&0!==t.length||console.error("‚úó SAVE FAILED - Could not verify in localStorage")}catch(e){console.error("‚úó ERROR saving game to localStorage:",e),alert("Failed to save game! Your progress may not be saved. Error: "+e.message)}}function loadGame(){try{const e=localStorage.getItem("satoshiTerminalSave");if(!e)return;const t=JSON.parse(e);if(t.achievements&&"undefined"!=typeof achievementsData&&Object.keys(t.achievements).forEach(e=>{achievementsData.achievements[e]=t.achievements[e]}),btcBalance=t.btcBalance||0,btcLifetime=t.btcLifetime||0,btcClickValue=t.btcClickValue||25e-7,btcClickValue<1e-6&&btcClickValue>0&&(btcClickValue=25e-7),btcPrice=t.btcPrice||1e5,ethBalance=t.ethBalance||0,ethLifetime=t.ethLifetime||0,ethClickValue=t.ethClickValue||7143e-8,ethClickValue<1e-5&&ethClickValue>0&&(ethClickValue=7143e-8),ethPrice=t.ethPrice||3500,dogeBalance=t.dogeBalance||0,dogeLifetime=t.dogeLifetime||0,dogeClickValue=t.dogeClickValue||1,dogeClickValue<.1&&dogeClickValue>0&&(dogeClickValue=1),dogePrice=t.dogePrice||.25,btcMultiplierLevel=t.btcMultiplierLevel||0,ethMultiplierLevel=t.ethMultiplierLevel||0,dogeMultiplierLevel=t.dogeMultiplierLevel||0,btcManualHashRateLevel=t.btcManualHashRateLevel||0,ethManualHashRateLevel=t.ethManualHashRateLevel||0,dogeManualHashRateLevel=t.dogeManualHashRateLevel||0,dollarBalance=parseFloat(t.dollarBalance)||0,hardwareEquity=parseFloat(t.hardwareEquity)||0,lifetimeEarnings=parseFloat(t.lifetimeEarnings)||0,t.lifetimeEarningsDisplay&&void 0!==window.rugpullState&&(window.rugpullState.lifetimeEarningsDisplay=parseFloat(t.lifetimeEarningsDisplay)||0),window.rugpullState&&window.gameState&&(window.gameState.lifetimeEarnings=window.rugpullState.lifetimeEarningsDisplay||0),sessionEarnings=0,sessionStartTime=Date.now(),t.staking&&loadStakingData(t.staking),sessionStartBalance=btcBalance,sessionStartNetWorth=btcBalance*btcPrice+ethBalance*ethPrice+dogeBalance*dogePrice+hardwareEquity+dollarBalance,chartStartTime=t.chartStartTime||Date.now(),t.powerUpgrades&&t.powerUpgrades.forEach(e=>{const t=powerUpgrades.find(t=>t.id===e.id);t&&(t.level=e.level||0,t.currentUsd=Math.floor(t.baseUsd*Math.pow(1.15,t.level)),t.currentPower=e.currentPower||0)}),totalPowerAvailable=t.totalPowerAvailable||0,totalPowerUSD=t.totalPowerUSD||0,t.btcUpgrades?t.btcUpgrades.forEach(e=>{const t=btcUpgrades.find(t=>t.id===e.id);t&&(t.level=e.level||0,t.currentUsd=e.currentUsd||t.baseUsd,t.currentYield=e.currentYield||0,e.milestoneDoublings&&(t.milestoneDoublings=e.milestoneDoublings),t.doubleMultiplier=e.doubleMultiplier||1)}):t.upgrades&&t.upgrades.forEach((e,t)=>{let n;n=void 0!==e.id?btcUpgrades.find(t=>t.id===e.id):btcUpgrades[t],n&&(n.level=e.level||0,n.currentUsd=e.currentUsd||n.baseUsd,n.currentYield=e.currentYield||0,n.milestoneDoublings=MILESTONE_LEVELS.reduce((e,t)=>(e[t]=!1,e),{}),n.doubleMultiplier=1)}),t.ethUpgrades&&t.ethUpgrades.forEach(e=>{const t=ethUpgrades.find(t=>t.id===e.id);t&&(t.level=e.level||0,t.currentUsd=e.currentUsd||t.baseUsd,t.currentYield=e.currentYield||0,e.milestoneDoublings&&(t.milestoneDoublings=e.milestoneDoublings),t.doubleMultiplier=e.doubleMultiplier||1)}),t.dogeUpgrades&&t.dogeUpgrades.forEach(e=>{const t=dogeUpgrades.find(t=>t.id===e.id);t&&(t.level=e.level||0,t.currentUsd=e.currentUsd||t.baseUsd,t.currentYield=e.currentYield||0,e.milestoneDoublings&&(t.milestoneDoublings=e.milestoneDoublings),t.doubleMultiplier=e.doubleMultiplier||1)}),t.ascensionData&&"function"==typeof loadAscensionData&&(loadAscensionData(t.ascensionData),void 0!==window.lifetimeEarningsThisRugpull&&0===window.lifetimeEarningsThisRugpull&&lifetimeEarnings>0&&(window.lifetimeEarningsThisRugpull=lifetimeEarnings),"function"==typeof updateAscensionUI&&updateAscensionUI()),t.hackingData){hackingGamesPlayed=t.hackingData.gamesPlayed||0,hackingGamesWon=t.hackingData.gamesWon||0,hackingGamesWonByDifficulty=t.hackingData.gamesWonByDifficulty||{EASY:0,MEDIUM:0,HARD:0},hackingConsecutiveWins=t.hackingData.consecutiveWins||0,hackingTotalRewardsEarned=t.hackingData.totalRewardsEarned||0,hackingNextNotificationTime=t.hackingData.nextNotificationTime||0,t.hackingData.cooldowns&&(hackingCooldowns=t.hackingData.cooldowns);const e=t.hackingData.speedBoostEndTime||0;e>Date.now()?(speedBoostActive=!0,speedBoostEndTime=e,speedBoostMultiplier=t.hackingData.speedBoostMultiplier||1):(speedBoostActive=!1,speedBoostMultiplier=1)}t.whackData&&(whackGameGamesPlayed=t.whackData.gamesPlayed||0,whackGameGamesWon=t.whackData.gamesWon||0,whackGameTotalRewardsEarned=t.whackData.totalRewardsEarned||0,t.whackData.cooldowns&&(whackCooldowns=t.whackData.cooldowns)),t.networkData&&(networkGameGamesPlayed=t.networkData.gamesPlayed||0,networkGameGamesWon=t.networkData.gamesWon||0,networkGameTotalRewardsEarned=t.networkData.totalRewardsEarned||0),t.packetData&&(packetGameGamesPlayed=t.packetData.gamesPlayed||0,packetGameGamesWon=t.packetData.gamesWon||0,packetGameTotalRewardsEarned=t.packetData.totalRewardsEarned||0,t.packetData.cooldowns&&(packetCooldowns=t.packetData.cooldowns)),calculateTotalPowerUsed(),restorePermanentMilestoneDoublings();const n="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;btcPerSec=btcUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+n),ethPerSec=ethUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+n),dogePerSec=dogeUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+n),window.btcPerSec=btcPerSec,window.ethPerSec=ethPerSec,window.dogePerSec=dogePerSec,autoClickerCooldownEnd=t.autoClickerCooldownEnd||0;const a=t.lastSaveTime||Date.now();let o=(Date.now()-a)/1e3;const i=14400;o>i&&(o=i);const s=14400,l="function"==typeof getOfflineCap?getOfflineCap():s,r=Math.min(o,l),c=o>l,d="function"==typeof getOfflineBoost?1+getOfflineBoost():1,u=("function"==typeof getTokenGenerationRate?getTokenGenerationRate():0)*r,h=btcPerSec*r*d,m=ethPerSec*r*d,g=dogePerSec*r*d;let p=1e-4;if("function"==typeof getSkillBonus){p*=1+(getSkillBonus("staking_apy")||0)/100}const f=r/2;let y=0;const w=1+("function"==typeof getSkillBonus?getSkillBonus("earnings_boost"):0);if(t.staking){const e=t.staking.stakedBTC||0,n=t.staking.stakedETH||0,a=t.staking.stakedDOGE||0;if(e>0){y+=e*p*f*btcPrice*w}if(n>0){y+=n*p*f*ethPrice*w}if(a>0){y+=a*p*f*dogePrice*w}y>0&&(addEarnings(y),lifetimeEarnings+=y,sessionEarnings+=y)}if(u>0&&"undefined"!=typeof rugpullCurrency&&(rugpullCurrency+=u),h>0){btcBalance+=h,btcLifetime+=h;const e=h*btcPrice;lifetimeEarnings+=e,sessionEarnings+=e,"function"==typeof window.rugpullAddEarnings&&window.rugpullAddEarnings(e)}if(m>0){ethBalance+=m,ethLifetime+=m;const e=m*ethPrice;lifetimeEarnings+=e,sessionEarnings+=e,"function"==typeof window.rugpullAddEarnings&&window.rugpullAddEarnings(e)}if(g>0){dogeBalance+=g,dogeLifetime+=g;const e=g*dogePrice;lifetimeEarnings+=e,sessionEarnings+=e,"function"==typeof window.rugpullAddEarnings&&window.rugpullAddEarnings(e)}if(o>=5&&(window.offlineEarningsToShow={btc:h,eth:m,doge:g,stakingCash:y,corruptTokens:u,seconds:o,wasCapped:c,cappedSeconds:r}),updateUI(),t.chartHistory&&t.chartHistory.length>0){chartHistory=t.chartHistory,chartTimestamps=t.chartTimestamps||[],t.btcChartHistory&&(btcChartHistory=t.btcChartHistory),t.ethChartHistory&&(ethChartHistory=t.ethChartHistory),t.dogeChartHistory&&(dogeChartHistory=t.dogeChartHistory),t.cashChartHistory&&(cashChartHistory=t.cashChartHistory);const e=null;if(null!==e&&chartHistory.length>e){const t=chartHistory.length,n=Math.ceil(chartHistory.length/e);let a=[],o=[],i=[],s=[],l=[],r=[];for(let e=0;e<chartHistory.length;e+=n)a.push(chartHistory[e]),o.push(chartTimestamps[e]),i.push(btcChartHistory[e]),s.push(ethChartHistory[e]),l.push(dogeChartHistory[e]),r.push(cashChartHistory[e]);a[a.length-1]!==chartHistory[chartHistory.length-1]&&(a.push(chartHistory[chartHistory.length-1]),o.push(chartTimestamps[chartTimestamps.length-1]),i.push(btcChartHistory[btcChartHistory.length-1]),s.push(ethChartHistory[ethChartHistory.length-1]),l.push(dogeChartHistory[dogeChartHistory.length-1]),r.push(cashChartHistory[cashChartHistory.length-1])),chartHistory=a,chartTimestamps=o,btcChartHistory=i,ethChartHistory=s,dogeChartHistory=l,cashChartHistory=r;let c=[],d=[],u=[],h=[],m=[],g=[];for(let e=0;e<chartTimestamps.length;e++)if(0===e||e===chartTimestamps.length-1)d.push(chartTimestamps[e]),c.push(chartHistory[e]),u.push(btcChartHistory[e]),h.push(ethChartHistory[e]),m.push(dogeChartHistory[e]),g.push(cashChartHistory[e]);else{const t=e-1;(chartHistory[e]!==chartHistory[t]||btcChartHistory[e]!==btcChartHistory[t]||ethChartHistory[e]!==ethChartHistory[t]||dogeChartHistory[e]!==dogeChartHistory[t]||cashChartHistory[e]!==cashChartHistory[t])&&(d.push(chartTimestamps[e]),c.push(chartHistory[e]),u.push(btcChartHistory[e]),h.push(ethChartHistory[e]),m.push(dogeChartHistory[e]),g.push(cashChartHistory[e]))}chartHistory=c,chartTimestamps=d,btcChartHistory=u,ethChartHistory=h,dogeChartHistory=m,cashChartHistory=g,console.log("Auto-decimated chart data from",t,"to",chartHistory.length,"points on load (factor:",n,")")}if(chartHistory.length>0&&0!==chartHistory[0]){const e=chartTimestamps.length>0?chartTimestamps[0].time:Date.now()-1e3;chartHistory.unshift(0),btcChartHistory.unshift(0),ethChartHistory.unshift(0),dogeChartHistory.unshift(0),cashChartHistory.unshift(0),chartTimestamps.unshift({time:e-1e3,value:0,cash:0,btc:0,eth:0,doge:0})}}else chartHistory=[],chartTimestamps=[],btcChartHistory=[],ethChartHistory=[],dogeChartHistory=[],cashChartHistory=[];t.powerChartHistory&&t.powerChartHistory.length>0?(powerChartHistory=t.powerChartHistory,powerChartColors=t.powerChartColors||[],hashRateChartTimestamps=[]):(powerChartHistory=[],powerChartColors=[],hashRateChartTimestamps=[])}catch(e){console.error("‚úó ERROR loading game from localStorage:",e),console.error("Error stack:",e.stack)}}function getExportableGameState(){const e=600,t=chartHistory.length>e?chartHistory.slice(-600):chartHistory,n=chartTimestamps.length>e?chartTimestamps.slice(-600):chartTimestamps,a=btcChartHistory.length>e?btcChartHistory.slice(-600):btcChartHistory,o=ethChartHistory.length>e?ethChartHistory.slice(-600):ethChartHistory,i=dogeChartHistory.length>e?dogeChartHistory.slice(-600):dogeChartHistory,s=cashChartHistory.length>e?cashChartHistory.slice(-600):cashChartHistory,l=powerChartHistory.length>e?powerChartHistory.slice(-600):powerChartHistory,r=powerChartColors.length>e?powerChartColors.slice(-600):powerChartColors,c=hashRateChartTimestamps.length>e?hashRateChartTimestamps.slice(-600):hashRateChartTimestamps;return{version:"1.1.0",exportDate:Date.now(),btcBalance:btcBalance,btcLifetime:btcLifetime,btcClickValue:btcClickValue,btcPerSec:btcPerSec,btcPrice:btcPrice,ethBalance:ethBalance,ethLifetime:ethLifetime,ethClickValue:ethClickValue,ethPerSec:ethPerSec,ethPrice:ethPrice,dogeBalance:dogeBalance,dogeLifetime:dogeLifetime,dogeClickValue:dogeClickValue,dogePerSec:dogePerSec,dogePrice:dogePrice,dollarBalance:dollarBalance,hardwareEquity:hardwareEquity,lastSaveTime:Date.now(),autoClickerCooldownEnd:autoClickerCooldownEnd,lifetimeEarnings:lifetimeEarnings,sessionEarnings:sessionEarnings,sessionStartTime:sessionStartTime,lifetimeEarningsDisplay:void 0!==window.rugpullState?window.rugpullState.lifetimeEarningsDisplay:0,chartHistory:t,chartTimestamps:n,btcChartHistory:a,ethChartHistory:o,dogeChartHistory:i,cashChartHistory:s,chartStartTime:chartStartTime,powerChartHistory:l,powerChartColors:r,hashRateChartTimestamps:c,totalPowerAvailable:totalPowerAvailable,totalPowerUSD:totalPowerUSD,staking:getStakingData(),powerUpgrades:powerUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentPower:e.currentPower})),btcUpgrades:btcUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),ethUpgrades:ethUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),dogeUpgrades:dogeUpgrades.map(e=>({id:e.id,level:e.level,currentUsd:e.currentUsd,currentYield:e.currentYield,milestoneDoublings:e.milestoneDoublings,doubleMultiplier:e.doubleMultiplier})),ascensionData:"function"==typeof getAscensionData?getAscensionData():{},achievements:"undefined"!=typeof achievementsData?achievementsData.achievements:{},hackingData:{gamesPlayed:hackingGamesPlayed,gamesWon:hackingGamesWon,consecutiveWins:hackingConsecutiveWins,totalRewardsEarned:hackingTotalRewardsEarned,speedBoostEndTime:speedBoostActive?speedBoostEndTime:0,speedBoostMultiplier:speedBoostActive?speedBoostMultiplier:1,nextNotificationTime:hackingNextNotificationTime,cooldowns:hackingCooldowns}}}function encodeGameState(e){try{const t=JSON.stringify(e,(e,t)=>"number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER?t.toString():t);return btoa(unescape(encodeURIComponent(t)))}catch(e){return console.error("Error encoding game state:",e),null}}function decodeGameState(e){try{const t=e.trim().replace(/\s/g,""),n=decodeURIComponent(escape(atob(t)));return JSON.parse(n,(e,t)=>{if("string"==typeof t&&!isNaN(t)&&""!==t){const e=parseFloat(t);if(e>Number.MAX_SAFE_INTEGER||e<-Number.MAX_SAFE_INTEGER)return e}return t})}catch(e){return console.error("Error decoding game state:",e),null}}function openExportImportModal(){const e=document.getElementById("export-import-modal");if(e){e.style.display="flex";const t=document.getElementById("export-status"),n=document.getElementById("import-status");t&&(t.style.display="none"),n&&(n.style.display="none");const a=document.getElementById("import-save-textarea");a&&(a.value="")}}function closeExportImportModal(){const e=document.getElementById("export-import-modal");e&&(e.style.display="none")}function exportSaveToClipboard(){try{const e=getExportableGameState();if(!e)return showExportStatus("Failed to get game state!",!1),void console.error("getExportableGameState returned null or undefined");const t=encodeGameState(e);if(!t)return showExportStatus("Failed to encode save data!",!1),void console.error("encodeGameState returned null or undefined");console.log("Encoded save string, length:",t.length),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(()=>{showExportStatus("Save copied to clipboard!",!0),console.log("Save exported to clipboard via clipboard API, length:",t.length,"characters")}).catch(e=>{console.warn("Clipboard API failed, trying fallback:",e),copyToClipboardFallback(t)}):(console.log("Clipboard API not available, using fallback"),copyToClipboardFallback(t))}catch(e){console.error("Error in exportSaveToClipboard:",e),showExportStatus("Error exporting save!",!1)}}function copyToClipboardFallback(e){try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");document.body.removeChild(t),n?(showExportStatus("Save copied to clipboard!",!0),console.log("Save exported to clipboard via fallback, length:",e.length,"characters")):(showExportStatus("Failed to copy to clipboard!",!1),console.error('execCommand("copy") returned false'))}catch(e){console.error("Fallback clipboard copy failed:",e),showExportStatus("Failed to copy to clipboard!",!1)}}function exportSaveToFile(){try{const e=getExportableGameState();if(!e)return showExportStatus("Failed to get game state!",!1),void console.error("getExportableGameState returned null or undefined");const t=encodeGameState(e);if(!t)return showExportStatus("Failed to encode save data!",!1),void console.error("encodeGameState returned null or undefined");console.log("Encoded save string, length:",t.length);const n=new Date,a=`IdleBTCMiner_${n.toISOString().slice(0,10).replace(/-/g,"")}.txt`,o=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=a,s.style.display="none",document.body.appendChild(s),setTimeout(()=>{s.click(),document.body.removeChild(s),URL.revokeObjectURL(i),showExportStatus(`Save downloaded as ${a}`,!0),console.log("Save exported to file:",a)},100)}catch(e){console.error("Error in exportSaveToFile:",e),showExportStatus("Error exporting save!",!1)}}function importSaveFromText(){try{console.log("=== IMPORT SAVE STARTED ===");const e=document.getElementById("import-save-textarea");if(!e||!e.value.trim())return void showImportStatus("Please paste a save string first!",!1);console.log("Textarea value length:",e.value.trim().length);const t=decodeGameState(e.value);if(!t)return void showImportStatus("Invalid save data! Could not decode.",!1);if(console.log("Decoded state successfully"),console.log("BTC Balance in import:",t.btcBalance),console.log("Dollar Balance in import:",t.dollarBalance),!validateImportedState(t))return void showImportStatus("Invalid save data! Missing required fields.",!1);if(console.log("Validation passed"),!confirm("This will overwrite your current save. Are you sure you want to continue?"))return void console.log("User cancelled import");console.log("User confirmed, blocking auto-save and applying import..."),importInProgress=!0,applyImportedState(t),console.log("Import applied to localStorage"),showImportStatus("Save imported! Reloading...",!0),closeExportImportModal(),console.log("Forcing page reload NOW"),window.location.href=window.location.href.split("?")[0]+"?imported="+Date.now()}catch(e){console.error("IMPORT ERROR:",e),importInProgress=!1,showImportStatus("Import failed: "+e.message,!1)}}function importSaveFromFile(e){const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=function(t){const n=t.target.result,a=document.getElementById("import-save-textarea");a&&(a.value=n);const o=decodeGameState(n);o?validateImportedState(o)?confirm("This will overwrite your current save. Are you sure you want to continue?")?(importInProgress=!0,applyImportedState(o),showImportStatus("Save imported! Reloading...",!0),closeExportImportModal(),window.location.href=window.location.href.split("?")[0]+"?imported="+Date.now()):e.target.value="":showImportStatus("Invalid save file! Missing required fields.",!1):showImportStatus("Invalid save file! Could not decode.",!1)},n.onerror=function(){showImportStatus("Failed to read file!",!1)},n.readAsText(t)}function validateImportedState(e){const t=["btcBalance","dollarBalance","btcUpgrades"];for(const n of t)if(void 0===e[n])return console.error("Missing required field:",n),!1;return!!Array.isArray(e.btcUpgrades)||(console.error("btcUpgrades is not an array"),!1)}function applyImportedState(e){try{const t={...e,lastSaveTime:Date.now()},n=JSON.stringify(t);console.log("=== IMPORT DEBUG ==="),console.log("Importing BTC balance:",e.btcBalance),console.log("Importing ETH balance:",e.ethBalance),console.log("Importing DOGE balance:",e.dogeBalance),console.log("Importing dollar balance:",e.dollarBalance),console.log("Importing hardware equity:",e.hardwareEquity),console.log("Importing lifetime earnings:",e.lifetimeEarnings),console.log("Save string length:",n.length),localStorage.setItem("satoshiTerminalSave",n);const a=localStorage.getItem("satoshiTerminalSave");a&&a.length===n.length?console.log("IMPORT SUCCESS - Data verified in localStorage"):console.error("IMPORT WARNING - Data verification failed")}catch(e){throw console.error("Error applying imported state:",e),e}}function showExportStatus(e,t){const n=document.getElementById("export-status");n&&(n.textContent=e,n.style.color=t?"#00ff88":"#ff3344",n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3))}function showImportStatus(e,t){const n=document.getElementById("import-status");n&&(n.textContent=e,n.style.color=t?"#00ff88":"#ff3344",n.style.display="block")}function calculateTotalPowerUsed(){let e=0;upgrades.forEach(t=>{t.level>0&&void 0!==equipmentPowerReqs[t.id]&&(e+=equipmentPowerReqs[t.id]*t.level)}),ethUpgrades.forEach(t=>{t.level>0&&void 0!==equipmentPowerReqs[t.id]&&(e+=equipmentPowerReqs[t.id]*t.level)}),dogeUpgrades.forEach(t=>{t.level>0&&void 0!==equipmentPowerReqs[t.id]&&(e+=equipmentPowerReqs[t.id]*t.level)});let t=0;"function"==typeof getSkillBonus&&(t=getSkillBonus("miner_efficiency")||0),totalPowerUsed=e*(1-t)}function getTotalPowerAvailableWithBonus(){try{const e="function"==typeof getPowerBoost?getPowerBoost():0;return totalPowerAvailable*(1+e)}catch(e){return totalPowerAvailable}}function getEffectivePowerRequirement(e){if(!e||e<=0)return e;try{if("function"==typeof getSkillBonus){const t=getSkillBonus("miner_efficiency")||0,n=getSkillBonus("power_efficiency")||0,a=Math.min(t+n,.99);return Math.max(0,e*(1-a))}return e}catch(t){return e}}function getEffectiveCryptoPrice(e){return e*(1+("function"==typeof getSkillBonus?getSkillBonus("crypto_price"):0))}function getCashMultiplier(){return 1+("function"==typeof getSkillBonus?getSkillBonus("cash_multiplier"):0)+("function"==typeof getSkillBonus?getSkillBonus("crypto_doubler"):0)}function addEarnings(e){dollarBalance+=e,earningsThisRun+=e,"function"==typeof window.rugpullAddEarnings&&window.rugpullAddEarnings(e)}function tryAutoSellCrypto(e,t){const n=void 0!==window.metaUpgrades?window.metaUpgrades:null,a=void 0!==window.upgradeToggleState?window.upgradeToggleState:null;if(!n||!a)return!1;const o=n.auto_sell&&n.auto_sell.purchased,i=!0===a.auto_sell;if(!(o&&i))return!1;const s=getCashMultiplier();if("btc"===e){return addEarnings(t*getEffectiveCryptoPrice(btcPrice)*.75*s),!0}if("eth"===e){return addEarnings(t*getEffectiveCryptoPrice(ethPrice)*.75*s),!0}if("doge"===e){return addEarnings(t*getEffectiveCryptoPrice(dogePrice)*.75*s),!0}return!1}function dismissInstructions(){const e=document.getElementById("game-instructions");e&&(e.style.display="none",localStorage.setItem("instructionsDismissed","true"))}function resetEarningsStats(){const e=document.getElementById("reset-earnings-modal");e&&(e.style.display="flex")}function resetGame(){const e=document.getElementById("reset-save-modal");e&&(e.style.display="flex")}function showOfflineEarningsModal(e,t,n,a,o,i,s,l){console.log("showOfflineEarningsModal called with:",e,t,n,a,o,i,s,l);const r=document.createElement("div");r.className="offline-modal-overlay";const c=document.createElement("div");c.className="offline-modal";const d=("function"==typeof getOfflineCap?getOfflineCap():14400)/3600,u=Math.floor(i/3600),h=Math.floor(i%3600/60),m=Math.floor(i%60);let g="";u>0&&(g+=u+"h "),h>0&&(g+=h+"m "),m>0&&(g+=m+"s"),g||(g="< 1s");let p="";if(e>0&&(p+=`<div class="earnings" style="color: #f7931a;">‚Çø ${e.toFixed(8)}</div>`),t>0&&(p+=`<div class="earnings" style="color: #627eea;">Œû ${t.toFixed(8)}</div>`),n>0&&(p+=`<div class="earnings" style="color: #c2a633;">√ê ${n.toFixed(2)}</div>`),a>0){let e;e=a>=1e9?"$"+(a/1e9).toFixed(2)+"b":a>=1e6?"$"+(a/1e6).toFixed(2)+"m":a>=1e3?"$"+(a/1e3).toFixed(2)+"k":"$"+a.toFixed(2),p+=`<div class="earnings" style="color: #4caf50;">üí∞ ${e}</div>`}o>0&&(p+=`<div class="earnings" style="color: #ffeb3b; font-size: 1.2rem;">üî¥ ${o.toFixed(3)} Corrupt Tokens</div>`),p||(p='<div class="earnings" style="color: #888; font-size: 1.2rem;">$0.00</div>\n                           <div style="color: #666; font-size: 0.9rem; margin-top: 10px;">Purchase miners to earn while offline!</div>');let f="";f=s?`<div style="color: #ff9800; font-size: 0.85rem; margin-top: 8px; padding: 8px; background: rgba(255,152,0,0.1); border-radius: 4px; border: 1px solid rgba(255,152,0,0.3);">‚ö†Ô∏è Offline earnings capped at ${d} hours</div>`:`<div style="color: #4caf50; font-size: 0.85rem; margin-top: 8px; padding: 8px; background: rgba(76,175,80,0.1); border-radius: 4px; border: 1px solid rgba(76,175,80,0.3);">‚ÑπÔ∏è Current Offline Earnings Capped at ${d} Hours</div>`,c.innerHTML=`\n            <h2>‚è∞ Welcome Back!</h2>\n            <div class="earnings-label">Offline Earnings${s?` (${d} hour max)`:""}</div>\n            ${p}\n            <div class="time-offline">While you were away for ${g}</div>\n            ${f}\n            <button id="claim-btn">Claim Rewards</button>\n        `,document.body.appendChild(r),document.body.appendChild(c),document.getElementById("claim-btn").onclick=()=>{r.remove(),c.remove()},console.log("Modal created and appended")}window.confirmResetEarnings=function(){lifetimeEarnings=0,sessionEarnings=0,earningsThisRun=0,void 0!==window.rugpullState&&(window.rugpullState.lifetimeEarningsDisplay=0),"function"==typeof window.resetRugpullTracker&&window.resetRugpullTracker(),sessionStartTime=Date.now(),saveGame(),updateUI(),showResetEarningsSuccessModal()},window.closeResetEarningsModal=function(){const e=document.getElementById("reset-earnings-modal");e&&(e.style.display="none")},window.showResetEarningsSuccessModal=function(){const e=document.getElementById("reset-earnings-success-modal");e&&(e.style.display="flex")},window.closeResetEarningsSuccessModal=function(){const e=document.getElementById("reset-earnings-success-modal");e&&(e.style.display="none")},window.resetRugpullMilestoneFlag=function(){rugpullMilestoneAnnounced=!1,console.log("üîÑ Rugpull milestone announcement flag reset - ready to declare next goal")},window.confirmResetGame=function(){localStorage.removeItem("satoshiTerminalSave"),localStorage.removeItem("instructionsDismissed"),localStorage.removeItem("achievements"),btcBalance=0,btcLifetime=0,btcPerSec=0,btcClickValue=25e-7,ethBalance=0,ethLifetime=0,ethPerSec=0,ethClickValue=7143e-8,dogeBalance=0,dogeLifetime=0,dogePerSec=0,dogeClickValue=1,dollarBalance=0,hardwareEquity=0,autoClickerCooldownEnd=0,sessionStartTime=Date.now(),sessionStartBTC=0,sessionStartETH=0,sessionStartDOGE=0,sessionStartBalance=0,sessionStartNetWorth=0,sessionEarnings=0,lifetimeEarnings=0,earningsThisRun=0,chartHistory=[],chartTimestamps=[],btcChartHistory=[],ethChartHistory=[],dogeChartHistory=[],cashChartHistory=[],hashRateChartHistory=[],ethHashRateChartHistory=[],dogeHashRateChartHistory=[],hashRateChartTimestamps=[],powerChartHistory=[],currentPowerValues=[],powerChartColors=[],chartMarkers=[],chartStartTime=Date.now(),lastChartUpdateTime=Date.now(),lastChartDataLength=0,totalPowerAvailable=0,totalPowerUsed=0,powerUpgrades.forEach(e=>{e.level=0,e.currentUsd=e.baseUsd,e.currentPower=0});try{const e={};MILESTONE_LEVELS.forEach(t=>{e[t]=!1}),btcUpgrades.forEach(t=>{t.level=0,t.currentUsd=t.baseUsd,t.currentYield=0,t.milestoneDoublings={...e},t.doubleMultiplier=1,console.log(`Reset ${t.name}: doubleMultiplier = ${t.doubleMultiplier}`)}),ethUpgrades.forEach(t=>{t.level=0,t.currentUsd=t.baseUsd,t.currentYield=0,t.milestoneDoublings={...e},t.doubleMultiplier=1}),dogeUpgrades.forEach(t=>{t.level=0,t.currentUsd=t.baseUsd,t.currentYield=0,t.milestoneDoublings={...e},t.doubleMultiplier=1}),console.log("‚úì Upgrades reset successfully"),console.log("BTC USB Miner doubleMultiplier after reset:",btcUpgrades[1].doubleMultiplier)}catch(e){console.error("Error resetting upgrades:",e)}stakedBTC=0,stakedETH=0,stakedDOGE=0,btcMultiplierLevel=0,ethMultiplierLevel=0,dogeMultiplierLevel=0,btcManualHashRateLevel=0,ethManualHashRateLevel=0,dogeManualHashRateLevel=0,"function"==typeof resetSkillTree&&resetSkillTree(),"function"==typeof resetAscensionData&&(console.log("Calling resetAscensionData()..."),resetAscensionData(),console.log("After reset - rugpullCurrency:","undefined"!=typeof rugpullCurrency?rugpullCurrency:"undefined")),void 0!==window.rugpullState&&(window.rugpullState.lifetimeEarningsDisplay=0),void 0!==window.lifetimeEarningsThisRugpull&&(window.lifetimeEarningsThisRugpull=0),hackingGameActive=!1,hackingGameDifficulty="EASY",hackingVulnerabilitiesToFind=[],hackingVulnerabilitiesFound=[],hackingGameStartTime=0,hackingGameTimeLimit=3e4,hackingLivesRemaining=0,hackingMaxLives=0,speedBoostActive=!1,speedBoostEndTime=0,speedBoostMultiplier=1,hackingGamesPlayed=0,hackingGamesWon=0,hackingConsecutiveWins=0,hackingNextNotificationTime=0,hackingTotalRewardsEarned=0,hackingCooldowns={EASY:0,MEDIUM:0,HARD:0},whackGameGamesPlayed=0,whackGameGamesWon=0,whackGameTotalRewardsEarned=0,whackCooldowns={EASY:0,MEDIUM:0,HARD:0},networkGameGamesPlayed=0,networkGameGamesWon=0,networkGameTotalRewardsEarned=0,packetGameGamesPlayed=0,packetGameGamesWon=0,packetGameTotalRewardsEarned=0,packetCooldowns={EASY:0,MEDIUM:0,HARD:0},"undefined"!=typeof achievementsData&&(achievementsData.achievements={},"function"==typeof initAchievements&&initAchievements(),notificationsShownThisSession.clear(),console.log("‚úì Achievements reset on save reset")),console.log("Calling saveGame() after reset..."),saveGame(),initBtcShop(),initEthShop(),initDogeShop(),initPowerShop(),lastUIUpdateTime=0,updateUI(),updateStakingUI(),"caches"in window&&caches.keys().then(function(e){for(let t of e)caches.delete(t)}),closeResetSaveModal(),showResetSaveSuccessModal()},window.closeResetSaveModal=function(){const e=document.getElementById("reset-save-modal");e&&(e.style.display="none")},window.showResetSaveSuccessModal=function(){const e=document.getElementById("reset-save-success-modal");e&&(e.style.display="flex")},window.reloadPageForReset=function(){window.location.reload(!0)},window.resetGame=resetGame;let isMuted=!1;function toggleMute(){isMuted=!isMuted;const e=document.getElementById("mute-btn");e&&(e.innerText=isMuted?"SOUND OFF":"SOUND ON")}let vfxEnabled=!0;function toggleVFX(){vfxEnabled=!vfxEnabled;const e=document.getElementById("vfx-btn");e&&(e.innerText=vfxEnabled?"VFX ON":"VFX OFF")}function toggleFullscreen(){const e=document.documentElement;document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}let autoClickerActive=!1,autoClickerCooldownEnd=0;const AUTO_CLICKER_DURATION=3e4,AUTO_CLICKER_COOLDOWN=3e5;function startAutoClicker(){if(autoClickerCooldownEnd>Date.now())return;autoClickerActive=!0,autoClickerCooldownEnd=Date.now()+3e5;let e=150;const t=setInterval(()=>{e>0?(manualHash(),manualEthHash(),manualDogeHash(),e--):(clearInterval(t),autoClickerActive=!1,updateAutoClickerButtonState())},200);updateAutoClickerButtonState()}function updateAutoClickerButtonState(){const e=document.getElementById("autoclicker-btn");if(!e)return;const t=Date.now();if(autoClickerCooldownEnd>t){const n=autoClickerCooldownEnd-t,a=Math.ceil(n/1e3);e.disabled=!0,e.innerText=`AUTO CLICKER ‚Ä¢ COOLDOWN: ${a}s`}else e.disabled=!1,e.innerText="AUTO CLICKER ‚Ä¢ 5 clicks/sec ‚Ä¢ 30s ‚Ä¢ 5m cooldown"}function initBtcShop(){const e=document.getElementById("btc-shop");e.innerHTML="",btcUpgrades.forEach((t,n)=>{if(t.isClickUpgrade)return;const a=document.createElement("button");a.className="u-item btn-primary btn-primary-btc",a.id=`up-${t.id}`,a.onclick=()=>buyLevelMultiple(n,buyQuantity);const o=equipmentPowerReqs[t.id]||0,i=getEffectivePowerRequirement(o),s=o>0?`<span style="font-size:0.9rem;color:var(--btc);font-weight:700;display:block;margin-top:3px" id="power-${t.id}">${formatPower(i)} Consumed per level</span>`:"";a.innerHTML=`\n            <div style="text-align:left;flex:1">\n                <div style="font-size:0.9rem;color:#f7931a;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:block;margin-bottom:2px"><span id="mult-${t.id}" style="color:#ff4400;margin-right:4px"></span>${t.name} <span style="color:#888;font-size:0.85rem">${formatLevelTag(t.level)}</span></div>\n                <div style="font-size:1.1rem;color:var(--green);font-family:monospace;font-weight:700;display:block;margin-bottom:3px" id="yield-${t.id}">+0 ‚Çø/s - Current Speed</div>\n                <div style="font-size:0.9rem;color:#f7931a;font-weight:700;display:block;margin-top:3px" id="increase-${t.id}">+0 ‚Çø/s per level</div>\n                ${s}\n            </div>\n            <div style="text-align:right;display:flex;flex-direction:column;align-items:flex-end">\n                <span style="font-size:1.3rem;font-weight:900;display:block;color:#fff" id="usd-${t.id}">$${formatNumberForDisplay(t.baseUsd)}</span>\n                <span style="font-size:0.75rem;color:#00ff88;font-family:monospace;font-weight:900;margin-top:2px" id="afford-${t.id}">x0</span>\n            </div>`,!t.isClickUpgrade&&t.doubleMultiplier>1&&(a.setAttribute("data-has-multiplier","true"),a.setAttribute("data-multiplier",t.doubleMultiplier)),e.appendChild(a);let l=null;a.addEventListener("touchstart",e=>{l&&clearTimeout(l),a.classList.add("button-pressed"),l=setTimeout(()=>{a.classList.remove("button-pressed"),l=null},200)}),a.addEventListener("touchend",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)}),a.addEventListener("click",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)})})}function initPowerShop(){const e=document.getElementById("power-shop");e.innerHTML="",powerUpgrades.forEach((t,n)=>{const a=document.createElement("button");a.className="u-item",a.id=`pow-${t.id}`,a.onclick=()=>buyPowerUpgrade(n);t.currentUsd;a.innerHTML=`\n                <div style="text-align:left;flex:1">\n                    <div style="font-size:0.9rem;color:#00ff88;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:block;margin-bottom:2px">${t.name} <span style="color:#888;font-size:0.85rem">${formatLevelTag(t.level)}</span></div>\n                    <div style="font-size:1.1rem;color:var(--green);font-family:monospace;font-weight:700;display:block;margin-bottom:3px" id="pow-current-${t.id}">+0W - Current Power</div>\n                    <div style="font-size:1.1rem;color:#00ff88;font-family:monospace;font-weight:700;display:block" id="pow-power-${t.id}">+0W Produced per level</div>\n                </div>\n                <div style="text-align:right;display:flex;flex-direction:column;align-items:flex-end">\n                    <span style="font-size:1.3rem;font-weight:900;display:block;color:#fff" id="pow-usd-${t.id}">$${formatNumberForDisplay(t.currentUsd)}</span>\n                    <span style="font-size:0.75rem;color:#00ff88;font-family:monospace;font-weight:900;margin-top:2px" id="pow-afford-${t.id}">x0</span>\n                </div>`,e.appendChild(a);let o=null;a.addEventListener("touchstart",e=>{o&&clearTimeout(o),a.classList.add("button-pressed"),o=setTimeout(()=>{a.classList.remove("button-pressed"),o=null},200)}),a.addEventListener("touchend",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)}),a.addEventListener("click",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)})})}function initEthShop(){const e=document.getElementById("eth-shop");e.innerHTML="",ethUpgrades.forEach((t,n)=>{if(t.isClickUpgrade)return;const a=document.createElement("button");a.className="u-item btn-primary btn-primary-eth",a.id=`eth-up-${t.id}`,a.onclick=()=>buyEthLevel(n,buyQuantity);const o=equipmentPowerReqs[t.id]||0,i=getEffectivePowerRequirement(o),s=o>0?`<span style="font-size:0.9rem;color:#627eea;font-weight:700;display:block;margin-top:3px" id="eth-power-${t.id}">${formatPower(i)} Consumed per level</span>`:"";a.innerHTML=`\n                <div style="text-align:left;flex:1">\n                    <div style="font-size:0.9rem;color:#627eea;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:block;margin-bottom:2px"><span id="eth-mult-${t.id}" style="color:#627eea;margin-right:4px"></span>${t.name} <span style="color:#888;font-size:0.85rem">${formatLevelTag(t.level)}</span></div>\n                    <div style="font-size:1.1rem;color:var(--green);font-family:monospace;font-weight:700;display:block;margin-bottom:3px" id="eth-yield-${t.id}">+0 Œû/s - Current Speed</div>\n                    <div style="font-size:0.9rem;color:#627eea;font-weight:700;display:block;margin-top:3px" id="eth-increase-${t.id}">+0 Œû/s per level</div>\n                    ${s}\n                </div>\n                <div style="text-align:right;display:flex;flex-direction:column;align-items:flex-end">\n                    <span style="font-size:1.3rem;font-weight:900;display:block;color:#fff" id="eth-usd-${t.id}">$${formatNumberForDisplay(t.baseUsd)}</span>\n                    <span style="font-size:0.75rem;color:#00ff88;font-family:monospace;font-weight:900;margin-top:2px" id="eth-afford-${t.id}">x0</span>\n                </div>`,!t.isClickUpgrade&&t.doubleMultiplier>1&&(a.setAttribute("data-has-multiplier","true"),a.setAttribute("data-multiplier",t.doubleMultiplier)),e.appendChild(a);let l=null;a.addEventListener("touchstart",e=>{l&&clearTimeout(l),a.classList.add("button-pressed"),l=setTimeout(()=>{a.classList.remove("button-pressed"),l=null},200)}),a.addEventListener("touchend",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)}),a.addEventListener("click",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)})})}function initDogeShop(){const e=document.getElementById("doge-shop");e.innerHTML="",dogeUpgrades.forEach((t,n)=>{if(t.isClickUpgrade)return;const a=document.createElement("button");a.className="u-item btn-primary btn-primary-doge",a.id=`doge-up-${t.id}`,a.onclick=()=>buyDogeLevel(n,buyQuantity);const o=equipmentPowerReqs[t.id]||0,i=getEffectivePowerRequirement(o),s=o>0?`<span style="font-size:0.9rem;color:#c2a633;font-weight:700;display:block;margin-top:3px" id="doge-power-${t.id}">${formatPower(i)} Consumed per level</span>`:"";a.innerHTML=`\n                <div style="text-align:left;flex:1">\n                    <div style="font-size:0.9rem;color:#c2a633;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:block;margin-bottom:2px"><span id="doge-mult-${t.id}" style="color:#c2a633;margin-right:4px"></span>${t.name} <span style="color:#888;font-size:0.85rem">${formatLevelTag(t.level)}</span></div>\n                    <div style="font-size:1.1rem;color:var(--green);font-family:monospace;font-weight:700;display:block;margin-bottom:3px" id="doge-yield-${t.id}">+0 √ê/s - Current Speed</div>\n                    <div style="font-size:0.9rem;color:#c2a633;font-weight:700;display:block;margin-top:3px" id="doge-increase-${t.id}">+0 √ê/s per level</div>\n                    ${s}\n                </div>\n                <div style="text-align:right;display:flex;flex-direction:column;align-items:flex-end">\n                    <span style="font-size:1.3rem;font-weight:900;display:block;color:#fff" id="doge-usd-${t.id}">$${formatNumberForDisplay(t.baseUsd)}</span>\n                    <span style="font-size:0.75rem;color:#00ff88;font-family:monospace;font-weight:900;margin-top:2px" id="doge-afford-${t.id}">x0</span>\n                </div>`,!t.isClickUpgrade&&t.doubleMultiplier>1&&(a.setAttribute("data-has-multiplier","true"),a.setAttribute("data-multiplier",t.doubleMultiplier)),e.appendChild(a);let l=null;a.addEventListener("touchstart",e=>{l&&clearTimeout(l),a.classList.add("button-pressed"),l=setTimeout(()=>{a.classList.remove("button-pressed"),l=null},200)}),a.addEventListener("touchend",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)}),a.addEventListener("click",()=>{a.blur(),setTimeout(()=>{document.activeElement===a&&a.blur()},0)})})}function switchTab(e){document.querySelectorAll(".tab-content").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".btn-tab").forEach(e=>e.classList.remove("active"));const t=document.getElementById("power-upgrade-btn");t&&t.classList.remove("active");document.getElementById(e+"-tab").classList.add("active"),event&&event.target&&event.target.classList.add("active"),"power"===e&&t&&t.classList.add("active"),"power"===e&&powerChartInstance&&hashRateChartInstance&&hashRateChartInstance.data.labels&&setTimeout(()=>{const e=hashRateChartInstance.data.labels.length,t=Math.max(0,hashRateChartTimestamps.length-e),n=e,a=powerChartHistory.slice(t,t+n),o=hashRateChartTimestamps.slice(t,t+n).map(e=>{const t=e?.time||Date.now();return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})});powerChartInstance.data.labels=o,powerChartInstance.data.datasets[0].data=a,powerChartInstance._powerChartColors=powerChartColors.slice(t,t+n),powerChartInstance.update("none")},50),setBuyQuantity(1),window.innerWidth<=768&&setTimeout(()=>{const e=document.querySelector(".tab-buttons");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},50),"btc-mining"===e?trackBTCTabClick():"eth-mining"===e?trackETHTabClick():"doge-mining"===e&&trackDOGETabClick()}function setBuyQuantity(e){buyQuantity=e;const t="#888";document.querySelectorAll(".qty-toggle").forEach(e=>{e.classList.remove("active"),e.style.borderColor=t,e.style.color=t}),document.querySelectorAll(".qty-toggle").forEach(t=>{t.textContent.trim()===`${e}x`&&(t.classList.add("active"),t.style.borderColor="#666",t.style.color="#fff",t.style.boxShadow="0 0 10px rgba(255, 255, 255, 0.2)")})}function updateDoublingButtons(){}function showSellFeedback(e){e&&(e.classList.add("sell-success"),playUpgradeSound(),setTimeout(()=>{e.classList.remove("sell-success")},500))}function sellBTC(e){if(btcBalance<e)return void alert("Not enough Bitcoin!");const t=e*btcPrice;btcBalance-=e,addEarnings(t),spawnCoinsForClick("usd",t),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),playUpgradeSound()}function sellAllBTC(e){if(btcBalance<=0)return;const t=getEffectiveCryptoPrice(btcPrice),n=btcBalance*t*.95;addEarnings(n),btcBalance=0,spawnCoinsForClick("usd",n),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),showSellFeedback(e)}function sellETH(e){if(ethBalance<e)return void alert("Not enough Ethereum!");const t=e*getEffectiveCryptoPrice(ethPrice)*.95;ethBalance-=e,addEarnings(t),spawnCoinsForClick("usd",t),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),playUpgradeSound()}function sellAllETH(e){if(ethBalance<=0)return;const t=getEffectiveCryptoPrice(ethPrice),n=ethBalance*t*.95;addEarnings(n),ethBalance=0,spawnCoinsForClick("usd",n),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),showSellFeedback(e)}function sellDOGE(e){if(dogeBalance<e)return void alert("Not enough Dogecoin!");const t=e*getEffectiveCryptoPrice(dogePrice)*.95;dogeBalance-=e,addEarnings(t),spawnCoinsForClick("usd",t),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),playUpgradeSound()}function sellAllDOGE(e){if(dogeBalance<=0)return;const t=getEffectiveCryptoPrice(dogePrice),n=dogeBalance*t;addEarnings(n),dogeBalance=0,spawnCoinsForClick("usd",n),"undefined"!=typeof tutorialData&&(tutorialData.cryptoSoldOnce=!0),updateUI(),saveGame(),showSellFeedback(e)}function quickSellBTC(e,t){if(btcBalance<=0)return;const n=btcBalance*(e/100),a=n*getEffectiveCryptoPrice(btcPrice)*.95;btcBalance-=n,addEarnings(a),spawnCoinsForClick("usd",a),updateUI(),saveGame(),showSellFeedback(t)}function quickSellETH(e,t){if(ethBalance<=0)return;const n=ethBalance*(e/100),a=n*getEffectiveCryptoPrice(ethPrice)*.95;ethBalance-=n,addEarnings(a),spawnCoinsForClick("usd",a),updateUI(),saveGame(),showSellFeedback(t)}function quickSellDOGE(e,t){if(dogeBalance<=0)return;const n=dogeBalance*(e/100),a=n*getEffectiveCryptoPrice(dogePrice)*.95;dogeBalance-=n,addEarnings(a),spawnCoinsForClick("usd",a),updateUI(),saveGame(),showSellFeedback(t)}function buyPowerUpgrade(e){const t=powerUpgrades[e],n=t.currentUsd;if(dollarBalance>=n){dollarBalance-=n,totalPowerUSD+=n,hardwareEquity+=t.currentUsd,t.level++,t.currentPower=t.basePower*t.level,totalPowerAvailable+=t.basePower;const a=getTotalPowerAvailableWithBonus();a>maxPowerCapacity&&(maxPowerCapacity=a),t.currentUsd=Math.floor(t.baseUsd*Math.pow(1.15,t.level)),0===e&&"function"==typeof trackPowerStripPurchase&&trackPowerStripPurchase(),lastUIUpdateTime=0,updateUI(),saveGame(),playUpgradeSound(),"function"==typeof checkAchievements&&(window.totalPowerUSD=totalPowerUSD,checkAchievements(totalPowerAvailable))}}const hackingDifficultyConfig={EASY:{vulnerabilities:3,timeLimit:3e4,codeLines:12,lives:8,baseUsdValue:100,speedBoost:1.1,boostDuration:12e4,cooldown:3e5},MEDIUM:{vulnerabilities:5,timeLimit:19e3,codeLines:16,lives:11,baseUsdValue:1e3,speedBoost:1.25,boostDuration:12e4,cooldown:9e5},HARD:{vulnerabilities:5,timeLimit:13e3,codeLines:18,lives:13,baseUsdValue:5e3,speedBoost:1.5,boostDuration:12e4,cooldown:18e5}},codeTemplates={EASY:['pragma solidity ^0.8.0;\ncontract Vault {\n    mapping(address => uint) balances;\n    \n    function withdraw(uint amount) public {\n        require(balances[msg.sender] > 0);        [V]\n        balances[msg.sender] -= amount;\n        (bool success, ) = msg.sender.call{value: amount}("");  [V]\n        require(success);\n    }\n    \n    function deposit() external payable {\n        balances[msg.sender] = msg.value;         [V]\n    }\n}',"contract Token {\n    mapping(address => uint) public balances;\n    \n    function transfer(address to, uint amount) public {\n        balances[msg.sender] -= amount;           [V]\n        balances[to] += amount;                    [V]\n    }\n    \n    function mint(uint amount) public {\n        balances[msg.sender] += amount;            [V]\n    }\n}"],MEDIUM:["contract Auction {\n    address public highestBidder;\n    uint public highestBid;\n    \n    function bid() public payable {\n        require(msg.value > highestBid);\n        if (highestBidder != address(0)) {\n            payable(highestBidder).transfer(highestBid);  [V]\n        }\n        highestBidder = msg.sender;                [V]\n        highestBid = msg.value;                    [V]\n    }\n    \n    function claimPrize() public {\n        require(msg.sender == highestBidder);      [V]\n        payable(msg.sender).transfer(address(this).balance);\n    }\n}","contract Lottery {\n    address[] public players;\n    \n    function enter() public payable {\n        require(msg.value == 0.1 ether);           [V]\n        players.push(msg.sender);\n    }\n    \n    function random() private view returns (uint) {\n        return uint(keccak256(abi.encodePacked(block.timestamp)));  [V]\n    }\n    \n    function pickWinner() public {\n        uint index = random() % players.length;    [V]\n        payable(players[index]).transfer(address(this).balance);  [V]\n        delete players;                             [V]\n    }\n}"],HARD:['contract Exchange {\n    mapping(address => uint) public ethBalances;\n    mapping(address => uint) public tokenBalances;\n    uint public ethToTokenRate = 100;\n    \n    function depositEth() public payable {\n        ethBalances[msg.sender] += msg.value;      [V]\n    }\n    \n    function swapEthForTokens(uint ethAmount) public {\n        require(ethBalances[msg.sender] >= ethAmount);\n        uint tokens = ethAmount * ethToTokenRate;   [V]\n        ethBalances[msg.sender] -= ethAmount;       [V]\n        tokenBalances[msg.sender] += tokens;        [V]\n        (bool success, ) = msg.sender.call{value: ethAmount}("");  [V]\n        require(success);\n    }\n    \n    function updateRate(uint newRate) public {\n        ethToTokenRate = newRate;                   [V]\n    }\n}']},whackDifficultyConfig={EASY:{timeLimit:15e3,lives:14,spawnRate:700,blockVisibility:950,simultaneousBlocks:1,baseUsdValue:50,cooldown:18e4},MEDIUM:{timeLimit:15e3,lives:18,spawnRate:550,blockVisibility:800,simultaneousBlocks:2,baseUsdValue:500,cooldown:6e5},HARD:{timeLimit:15e3,lives:22,spawnRate:480,blockVisibility:760,simultaneousBlocks:2,baseUsdValue:2e3,cooldown:12e5}};function generateVulnerableCode(e){const t=codeTemplates[e],n=t[Math.floor(Math.random()*t.length)].split("\n"),a=[];return n.forEach((e,t)=>{e.includes("[V]")&&(a.push(t),n[t]=e.replace("[V]","").trim())}),{lines:n,vulnerableIndices:a}}function initHackingMinigame(e){let t=0,n="";if("EASY"===e?(t=0,n="EASY"):"MEDIUM"===e?(t=0,n="MEDIUM"):"HARD"===e&&(t=0,n="HARD"),!("undefined"!=typeof metaUpgrades&&metaUpgrades.minigame_unlock&&metaUpgrades.minigame_unlock.purchased)&&lifetimeEarnings<t)return;if(Date.now()<(hackingCooldowns[e]||0))return;hackingGameDifficulty=e,hackingGameActive=!0,console.log(`[HACKING] Starting ${e} game`);const a=hackingDifficultyConfig[e];hackingGameTimeLimit=a.timeLimit,hackingGameStartTime=Date.now();const{lines:o,vulnerableIndices:i}=generateVulnerableCode(e);hackingVulnerabilitiesToFind=i.slice(0,a.vulnerabilities),hackingVulnerabilitiesFound=[],hackingMaxLives=a.lives,hackingLivesRemaining=hackingMaxLives;const s=document.getElementById("hacking-notification");s&&(s.style.display="none");const l=document.getElementById("hacking-modal");if(!l)return;l.style.display="flex";const r=document.getElementById("hacking-result-message"),c=document.getElementById("hacking-game-info");r&&(r.style.display="none"),c&&(c.style.display="block"),document.getElementById("hacking-difficulty-display").textContent=e,document.getElementById("hacking-found-count").textContent=`0/${a.vulnerabilities}`,document.getElementById("hacking-lives-display").textContent=`‚ù§Ô∏è ${hackingLivesRemaining}/${hackingMaxLives}`;const d=document.getElementById("hacking-code-container");d.innerHTML="",o.forEach((e,t)=>{const n=document.createElement("div");n.className="hacking-code-line",n.textContent=`${String(t+1).padStart(2," ")} | ${e}`,n.setAttribute("data-line-index",t),n.style.cursor="pointer",n.onclick=()=>checkHackingVulnerability(t),d.appendChild(n)}),updateHackingTimer()}function checkHackingVulnerability(e){if(!hackingGameActive)return;if(hackingVulnerabilitiesFound.includes(e))return;const t=document.querySelector(`[data-line-index="${e}"]`);if(hackingVulnerabilitiesToFind.includes(e)){hackingVulnerabilitiesFound.push(e),t.classList.add("vulnerability-found"),t.style.background="rgba(0, 255, 136, 0.3)",t.style.border="1px solid #00ff88";const n=hackingDifficultyConfig[hackingGameDifficulty];document.getElementById("hacking-found-count").textContent=`${hackingVulnerabilitiesFound.length}/${n.vulnerabilities}`,hackingVulnerabilitiesFound.length===n.vulnerabilities&&endHackingGame(!0)}else{hackingLivesRemaining--,t.style.background="rgba(255, 51, 68, 0.6)",t.style.border="2px solid #ff3344",setTimeout(()=>{t.style.background="",t.style.border=""},500);const e=document.getElementById("hacking-modal").querySelector("div");e.classList.add("modal-shake"),setTimeout(()=>{e.classList.remove("modal-shake")},500),document.getElementById("hacking-lives-display").textContent=`‚ù§Ô∏è ${hackingLivesRemaining}/${hackingMaxLives}`,hackingLivesRemaining<=0&&endHackingGame(!1)}}function updateHackingTimer(){if(!hackingGameActive)return;const e=Date.now()-hackingGameStartTime,t=Math.max(0,hackingGameTimeLimit-e),n=Math.ceil(t/1e3),a=document.getElementById("hacking-timer");a&&(a.textContent=`${n}s`,a.style.color=n<=3?"#ff3344":n<=5?"#ff9500":"#00ff88"),t<=0?endHackingGame(!1):setTimeout(updateHackingTimer,100)}function endHackingGame(e){hackingGameActive=!1,hackingGamesPlayed++;document.getElementById("hacking-modal");const t=hackingDifficultyConfig[hackingGameDifficulty];hackingCooldowns[hackingGameDifficulty]=Date.now()+t.cooldown;const n=Math.ceil(t.cooldown/1e3);if(console.log(`[HACKING] Setting ${hackingGameDifficulty} cooldown to ${t.cooldown}ms (${n}s)`),console.log("[HACKING] All cooldowns:",hackingCooldowns),window.hackingCooldowns=hackingCooldowns,e){hackingGamesWon++,hackingGamesWonByDifficulty[hackingGameDifficulty]++,hackingConsecutiveWins++;const e=Date.now()-hackingGameStartTime,n=Math.max(1,1.5-e/hackingGameTimeLimit),a=1+.1*Math.min(hackingConsecutiveWins,5),o=awardHackingRewards(hackingGameDifficulty,n*a);if(hackingLastRewards=o,speedBoostActive){const e=speedBoostMultiplier-1,n=t.speedBoost-1;speedBoostMultiplier=1+e+n;const a=Math.max(0,speedBoostEndTime-Date.now());speedBoostEndTime=Date.now()+Math.max(a,t.boostDuration),console.log(`‚ö° Speed boost STACKED: +${(100*(speedBoostMultiplier-1)).toFixed(0)}% for ${Math.ceil((speedBoostEndTime-Date.now())/6e4)} minutes`)}else speedBoostMultiplier=t.speedBoost,speedBoostEndTime=Date.now()+t.boostDuration,speedBoostActive=!0,console.log(`‚ö° Speed boost activated: +${(100*(speedBoostMultiplier-1)).toFixed(0)}% for ${t.boostDuration/6e4} minutes`);"function"==typeof checkAchievements&&setTimeout(()=>{checkAchievements(totalPowerUsed)},100)}else hackingConsecutiveWins=0;updateHackingStats();const a=document.getElementById("hacking-modal"),o=document.getElementById("hacking-results-modal");if(a&&(a.style.display="none"),o){const t=document.getElementById("hacking-results-title");t&&(t.textContent=e?"üîê AUDIT COMPLETE":"üîê AUDIT FAILED");const n=document.getElementById("hacking-results-lines");n&&(n.textContent=hackingVulnerabilitiesFound.length);const a=document.getElementById("hacking-results-rewards-breakdown");a&&(a.innerHTML=e?`<div style="color: #f7931a; font-weight: 700; margin-bottom: 8px;">Rewards Earned:</div>\n                        <div style="color: #fff; font-size: 0.9rem; line-height: 1.6;">\n                            ‚Çø ${hackingLastRewards.btc>=1?hackingLastRewards.btc.toFixed(4):hackingLastRewards.btc.toFixed(8)} BTC<br>\n                            Œû ${hackingLastRewards.eth>=1?hackingLastRewards.eth.toFixed(4):hackingLastRewards.eth.toFixed(8)} ETH<br>\n                            √ê ${hackingLastRewards.doge.toFixed(2)} DOGE<br>\n                            üíµ $${abbreviateNumber(hackingLastRewards.totalUsd)}\n                        </div>`:'<div style="color: #888;">No rewards earned</div>'),o.style.display="flex"}scheduleHackingNotification(),saveGame()}function awardHackingRewards(e,t){const n="undefined"!=typeof ascensionLevel?ascensionLevel:0,a=window.btcPerSec??btcPerSec??0,o=window.ethPerSec??ethPerSec??0,i=window.dogePerSec??dogePerSec??0,s=window.btcPrice??btcPrice??1e5,l=window.ethPrice??ethPrice??3500,r=window.dogePrice??dogePrice??.25;const c=hackingVulnerabilitiesFound.length*(50+(a*s+o*l+i*r))*t*Math.pow(1.15,n)*(1+("function"==typeof getSkillBonus?getSkillBonus("minigame_rewards"):0)/100),d=.4*c/btcPrice;btcBalance+=d,btcLifetime+=d;const u=.35*c/ethPrice;ethBalance+=u,ethLifetime+=u;const h=.2*c/dogePrice;dogeBalance+=h,dogeLifetime+=h;const m=.05*c;return addEarnings(m),hackingTotalRewardsEarned+=c,lifetimeEarnings+=c,sessionEarnings+=c,{btc:d,eth:u,doge:h,usd:m,totalUsd:c}}function getHackingSpeedBoost(){if(!speedBoostActive)return 1;return Date.now()>=speedBoostEndTime?(speedBoostActive=!1,speedBoostMultiplier=1,1):speedBoostMultiplier}function scheduleHackingNotification(){const e=60*(30+30*Math.random())*1e3;hackingNextNotificationTime=Date.now()+e}function displayHackingNotification(){const e=document.getElementById("hacking-notification");e&&(e.style.display="flex")}function closeHackingModal(){const e=document.getElementById("hacking-modal");if(e&&(e.style.display="none"),vfxEnabled&&hackingGamesWon>0&&"function"==typeof spawnExplosionCoins){const e=(hackingLastRewards?.btc*btcPrice||0)+(hackingLastRewards?.eth*ethPrice||0)+(hackingLastRewards?.doge*dogePrice||0),t=Math.max(80,Math.min(300,Math.floor(e/10)));spawnExplosionCoins("btc",t/4),spawnExplosionCoins("eth",t/4),spawnExplosionCoins("doge",t/4),spawnExplosionCoins("usd",t/4)}document.getElementById("hacking-code-container").style.display="block",document.getElementById("hacking-result-message").style.display="none",document.getElementById("hacking-close-btn").style.display="none"}function closeHackingResultsModal(){const e=document.getElementById("hacking-results-modal");if(e&&(e.style.display="none"),vfxEnabled&&hackingGamesWon>0&&"function"==typeof spawnExplosionCoins){const e=(hackingLastRewards?.btc*btcPrice||0)+(hackingLastRewards?.eth*ethPrice||0)+(hackingLastRewards?.doge*dogePrice||0),t=Math.max(80,Math.min(300,Math.floor(e/10)));spawnExplosionCoins("btc",t/4),spawnExplosionCoins("eth",t/4),spawnExplosionCoins("doge",t/4),spawnExplosionCoins("usd",t/4)}}function dismissHackingNotification(){const e=document.getElementById("hacking-notification");e&&(e.style.display="none"),scheduleHackingNotification()}function updateHackingStats(){const e=document.getElementById("hacking-stats-content");if(!e)return;const t=hackingGamesPlayed>0?(hackingGamesWon/hackingGamesPlayed*100).toFixed(1):"0.0";let n="";n=hackingTotalRewardsEarned>=1e12?"$"+(hackingTotalRewardsEarned/1e12).toFixed(2)+"T":hackingTotalRewardsEarned>=1e9?"$"+(hackingTotalRewardsEarned/1e9).toFixed(2)+"B":hackingTotalRewardsEarned>=1e6?"$"+(hackingTotalRewardsEarned/1e6).toFixed(2)+"M":hackingTotalRewardsEarned>=1e3?"$"+(hackingTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+hackingTotalRewardsEarned.toFixed(2),e.innerHTML=`\n            <div style="margin-bottom: 10px;">\n                <span style="color: #888; font-size: 0.8rem;">Games Played:</span>\n                <span style="color: #fff; font-weight: 700; margin-left: 10px;">${hackingGamesPlayed}</span>\n            </div>\n            <div style="margin-bottom: 10px;">\n                <span style="color: #888; font-size: 0.8rem;">Win Rate:</span>\n                <span style="color: #00ff88; font-weight: 700; margin-left: 10px;">${t}%</span>\n            </div>\n            <div style="margin-bottom: 10px;">\n                <span style="color: #888; font-size: 0.8rem;">Consecutive Wins:</span>\n                <span style="color: #f7931a; font-weight: 700; margin-left: 10px;">${hackingConsecutiveWins}</span>\n            </div>\n            <div style="margin-bottom: 10px;">\n                <span style="color: #888; font-size: 0.8rem;">Total Rewards:</span>\n                <span style="color: #fff; font-weight: 700; margin-left: 10px;">${n}</span>\n            </div>\n            ${speedBoostActive?`\n            <div style="margin-top: 15px; padding: 10px; background: rgba(0, 255, 136, 0.1); border: 1px solid #00ff88; border-radius: 6px;">\n                <div style="color: #00ff88; font-weight: 700; margin-bottom: 5px;">‚ö° ACTIVE SPEED BOOST</div>\n                <div style="color: #fff; font-size: 0.9rem;">+${(100*(speedBoostMultiplier-1)).toFixed(0)}% Mining Speed</div>\n                <div style="color: #888; font-size: 0.8rem;">${Math.ceil((speedBoostEndTime-Date.now())/6e4)} minutes remaining</div>\n            </div>\n            `:""}\n        `}function updateWhackStats(){const e=document.getElementById("whack-games-played");e&&(e.textContent=whackGameGamesPlayed);const t=document.getElementById("whack-games-won");t&&(t.textContent=whackGameGamesWon);let n="";n=whackGameTotalRewardsEarned>=1e12?"$"+(whackGameTotalRewardsEarned/1e12).toFixed(2)+"T":whackGameTotalRewardsEarned>=1e9?"$"+(whackGameTotalRewardsEarned/1e9).toFixed(2)+"B":whackGameTotalRewardsEarned>=1e6?"$"+(whackGameTotalRewardsEarned/1e6).toFixed(2)+"M":whackGameTotalRewardsEarned>=1e3?"$"+(whackGameTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+whackGameTotalRewardsEarned.toFixed(2);const a=document.getElementById("whack-total-rewards");a&&(a.textContent=n.slice(1))}function updateNetworkStats(){const e=document.getElementById("network-games-played");e&&(e.textContent=networkGameGamesPlayed);const t=document.getElementById("network-games-won");t&&(t.textContent=networkGameGamesWon);let n="";n=networkGameTotalRewardsEarned>=1e12?"$"+(networkGameTotalRewardsEarned/1e12).toFixed(2)+"T":networkGameTotalRewardsEarned>=1e9?"$"+(networkGameTotalRewardsEarned/1e9).toFixed(2)+"B":networkGameTotalRewardsEarned>=1e6?"$"+(networkGameTotalRewardsEarned/1e6).toFixed(2)+"M":networkGameTotalRewardsEarned>=1e3?"$"+(networkGameTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+networkGameTotalRewardsEarned.toFixed(2);const a=document.getElementById("network-total-rewards");a&&(a.textContent=n.slice(1))}function updateMinigamesTab(){const e=document.getElementById("hacking-games-won-display");e&&(e.textContent=hackingGamesWon);const t=document.getElementById("hacking-games-played-display");t&&(t.textContent=hackingGamesPlayed);const n=document.getElementById("hacking-rewards-display");if(n){let e="";e=hackingTotalRewardsEarned>=1e6?"$"+(hackingTotalRewardsEarned/1e6).toFixed(2)+"M":hackingTotalRewardsEarned>=1e3?"$"+(hackingTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+hackingTotalRewardsEarned.toFixed(0),n.textContent=e}const a=document.getElementById("whack-games-won-display");a&&(a.textContent=whackGameGamesWon);const o=document.getElementById("whack-games-played-display");o&&(o.textContent=whackGameGamesPlayed);const i=document.getElementById("whack-rewards-display");if(i){let e="";e=whackGameTotalRewardsEarned>=1e6?"$"+(whackGameTotalRewardsEarned/1e6).toFixed(2)+"M":whackGameTotalRewardsEarned>=1e3?"$"+(whackGameTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+whackGameTotalRewardsEarned.toFixed(0),i.textContent=e}const s=document.getElementById("network-games-won-display");s&&(s.textContent=networkGameGamesWon);const l=document.getElementById("network-games-played-display");l&&(l.textContent=networkGameGamesPlayed);const r=document.getElementById("network-rewards-display");if(r){let e="";e=networkGameTotalRewardsEarned>=1e6?"$"+(networkGameTotalRewardsEarned/1e6).toFixed(2)+"M":networkGameTotalRewardsEarned>=1e3?"$"+(networkGameTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+networkGameTotalRewardsEarned.toFixed(0),r.textContent=e}const c=document.getElementById("packet-games-won-display");c&&(c.textContent=packetGameGamesWon);const d=document.getElementById("packet-games-played-display");d&&(d.textContent=packetGameGamesPlayed);const u=document.getElementById("packet-rewards-display");if(u){let e="";e=packetGameTotalRewardsEarned>=1e6?"$"+(packetGameTotalRewardsEarned/1e6).toFixed(2)+"M":packetGameTotalRewardsEarned>=1e3?"$"+(packetGameTotalRewardsEarned/1e3).toFixed(2)+"K":"$"+packetGameTotalRewardsEarned.toFixed(0),u.textContent=e}}function updateHackingCooldownDisplays(){const e=Date.now(),t={EASY:0,MEDIUM:0,HARD:0};["EASY","MEDIUM","HARD"].forEach(n=>{const a=hackingCooldowns[n]||0,o=document.getElementById(`hacking-${n.toLowerCase()}-cooldown`),i=document.getElementById(`hacking-${n.toLowerCase()}-locked`),s=document.getElementById(`hacking-${n.toLowerCase()}-btn`);if(!o||!s||!i)return;const l=lifetimeEarnings<(t[n]||0),r=e<a&&!l;if(l)i.style.visibility="visible",i.style.pointerEvents="none",i.innerHTML=`üîí<br>$${(t[n]||0).toLocaleString()}`,o.style.visibility="hidden",s.style.cursor="pointer",s.style.opacity="1",s.dataset.locked="true";else if(r){i.style.visibility="hidden",o.style.visibility="visible",o.style.opacity="1",o.style.pointerEvents="none",s.style.cursor="pointer",s.style.opacity="0.6",s.style.pointerEvents="auto",s.dataset.locked="false";const t=a-e,l=Math.ceil(t/1e3),r=`${Math.floor(l/60)}:${(l%60).toString().padStart(2,"0")}`;o.textContent=r,"MEDIUM"!==n&&"HARD"!==n||console.log(`[HACKING-COOLDOWN] ${n} timer set to: "${r}", element visibility: ${o.style.visibility}, opacity: ${o.style.opacity}`)}else i.style.visibility="hidden",o.style.visibility="hidden",s.style.cursor="pointer",s.style.opacity="1",s.style.pointerEvents="auto",s.dataset.locked="false"});const n=Date.now(),a={EASY:5e3,MEDIUM:25e3,HARD:75e3};["EASY","MEDIUM","HARD"].forEach(e=>{const t=whackCooldowns[e]||0,o=document.getElementById(`whack-${e.toLowerCase()}-cooldown`),i=document.getElementById(`whack-${e.toLowerCase()}-locked`),s=document.getElementById(`whack-${e.toLowerCase()}-btn`);if(!o||!s||!i)return;const l=lifetimeEarnings<(a[e]||0),r=n<t&&!l;if(l)i.style.display="flex",i.style.pointerEvents="none",i.innerHTML=`üîí<br>$${(a[e]||0).toLocaleString()}`,o.style.display="none",s.style.cursor="pointer",s.style.opacity="1",s.dataset.locked="true";else if(r){i.style.display="none",o.style.removeProperty("display"),o.style.setProperty("display","flex","important"),o.style.pointerEvents="none",s.style.cursor="not-allowed",s.style.opacity="0.6",s.dataset.locked="false";const e=t-n,a=Math.ceil(e/1e3),l=Math.floor(a/60),r=a%60;o.textContent=`${l}:${r.toString().padStart(2,"0")}`}else i.style.display="none",o.style.display="none",s.style.cursor="pointer",s.style.opacity="1",s.dataset.locked="false"})}function updateMinigameCardLocks(){const e=document.getElementById("packet-card-locked");e&&(e.style.display="none");const t=document.getElementById("packet-medium-locked");t&&(lifetimeEarnings<1e5?(t.style.display="flex",document.getElementById("packet-medium-btn").disabled=!0,document.getElementById("packet-medium-btn").style.opacity="0.6"):(t.style.display="none",document.getElementById("packet-medium-btn").disabled=!1,document.getElementById("packet-medium-btn").style.opacity="1"));const n=document.getElementById("packet-hard-locked");n&&(lifetimeEarnings<1e6?(n.style.display="flex",document.getElementById("packet-hard-btn").disabled=!0,document.getElementById("packet-hard-btn").style.opacity="0.6"):(n.style.display="none",document.getElementById("packet-hard-btn").disabled=!1,document.getElementById("packet-hard-btn").style.opacity="1"));const a="undefined"!=typeof metaUpgrades&&metaUpgrades.minigame_unlock&&metaUpgrades.minigame_unlock.purchased,o=document.getElementById("network-card-locked"),i=document.getElementById("network-play-btn");o&&(!a&&lifetimeEarnings<2e4?(o.style.display="flex",i&&(i.disabled=!0,i.style.opacity="0.6")):(o.style.display="none",i&&(i.disabled=!1,i.style.opacity="1")));const s=document.getElementById("whack-card-locked");s&&(s.style.display=!a&&lifetimeEarnings<5e4?"flex":"none");const l=document.getElementById("whack-easy-locked");l&&(!a&&lifetimeEarnings<5e4?(l.style.display="flex",document.getElementById("whack-easy-btn").disabled=!0,document.getElementById("whack-easy-btn").style.opacity="0.6"):(l.style.display="none",document.getElementById("whack-easy-btn").disabled=!1,document.getElementById("whack-easy-btn").style.opacity="1"));const r=document.getElementById("whack-medium-locked");r&&(!a&&lifetimeEarnings<15e4?(r.style.display="flex",document.getElementById("whack-medium-btn").disabled=!0,document.getElementById("whack-medium-btn").style.opacity="0.6"):(r.style.display="none",document.getElementById("whack-medium-btn").disabled=!1,document.getElementById("whack-medium-btn").style.opacity="1"));const c=document.getElementById("whack-hard-locked");c&&(!a&&lifetimeEarnings<5e5?(c.style.display="flex",document.getElementById("whack-hard-btn").disabled=!0,document.getElementById("whack-hard-btn").style.opacity="0.6"):(c.style.display="none",document.getElementById("whack-hard-btn").disabled=!1,document.getElementById("whack-hard-btn").style.opacity="1"));const d=document.getElementById("hacking-card-locked");d&&(d.style.display=!a&&lifetimeEarnings<5e5?"flex":"none")}function updatePacketInterceptorStats(e,t){packetGameGamesPlayed++,e>0&&packetGameGamesWon++;const n="undefined"!=typeof rugpullLevel?Math.pow(1.15,rugpullLevel):1,a="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,o=t*n*(1+a)*(1+("function"==typeof getSkillBonus?getSkillBonus("minigame_rewards"):0)/100);console.log(`[Packet Interceptor] Base Reward: $${t}, Rugpull: ${n.toFixed(1)}x, Ascension: ${(100*a).toFixed(1)}%, Final: $${o.toFixed(2)}`);const i=.4*o/btcPrice;btcBalance+=i,btcLifetime+=i;const s=.35*o/ethPrice;ethBalance+=s,ethLifetime+=s;const l=.2*o/dogePrice;dogeBalance+=l,dogeLifetime+=l;const r=.05*o;if(addEarnings(r),packetGameTotalRewardsEarned+=o,lifetimeEarnings+=o,sessionEarnings+=o,packetLastRewards={btc:i,eth:s,doge:l,usd:r,totalUsd:o},"undefined"!=typeof packetGameState){const e=packetGameState.difficulty,t={EASY:3e4,MEDIUM:6e4,HARD:12e4};packetCooldowns[e]=Date.now()+(t[e]||3e4)}updateMinigamesTab(),updateMinigameCardLocks(),updatePacketCooldownDisplays(),saveGame()}function updateWhackCooldownDisplays(){const e=Date.now();["EASY","MEDIUM","HARD"].forEach(t=>{const n=whackCooldowns[t]||0,a=document.getElementById(`whack-${t.toLowerCase()}-cooldown`),o=document.getElementById(`whack-${t.toLowerCase()}-btn`);if(!a||!o)return;if(e<n){a.style.removeProperty("display"),a.style.setProperty("display","flex","important"),a.style.pointerEvents="none",o.style.cursor="not-allowed",o.style.opacity="0.6";const t=n-e,i=Math.ceil(t/1e3),s=Math.floor(i/60),l=i%60;a.textContent=`${s}:${l.toString().padStart(2,"0")}`}else a.style.display="none",o.style.cursor="pointer",o.style.opacity="1"})}function updatePacketCooldownDisplays(){const e=Date.now();["EASY","MEDIUM","HARD"].forEach(t=>{const n=packetCooldowns[t]||0,a=document.getElementById(`packet-${t.toLowerCase()}-cooldown`),o=document.getElementById(`packet-${t.toLowerCase()}-btn`);if(!a||!o)return;if(e<n){a.style.removeProperty("display"),a.style.setProperty("display","flex","important"),a.style.pointerEvents="none",o.style.cursor="not-allowed",o.style.opacity="0.6",o.dataset.locked="false";const t=n-e,i=Math.ceil(t/1e3),s=Math.floor(i/60),l=i%60;a.textContent=`${s}:${l.toString().padStart(2,"0")}`}else a.style.display="none",o.style.cursor="pointer",o.style.opacity="1",o.dataset.locked="false"})}function initWhackMinigame(e){let t=0,n="";if("EASY"===e?(t=5e4,n="EASY"):"MEDIUM"===e?(t=25e3,n="MEDIUM"):"HARD"===e&&(t=75e3,n="HARD"),lifetimeEarnings<t)return;if(Date.now()<(whackCooldowns[e]||0))return;whackGameDifficulty=e,whackGameActive=!0;const a=whackDifficultyConfig[e];whackGameTimeLimit=a.timeLimit,whackGameStartTime=Date.now(),whackGameScore=0,whackGameBlocksHit=0,whackGameMaxLives=a.lives,whackGameLivesRemaining=whackGameMaxLives,whackActiveBlock=null,whackActiveBlocks.clear();const o=document.getElementById("whack-modal");if(!o)return;o.style.display="flex",document.body.classList.add("modal-open");const i=document.getElementById("whack-game-info"),s=document.getElementById("whack-results-message"),l=document.getElementById("whack-close-btn");i&&(i.style.display="block"),s&&(s.style.display="none"),l&&(l.style.display="none"),document.getElementById("whack-difficulty-display").textContent=e,document.getElementById("whack-lives-display").textContent=`‚ù§Ô∏è ${whackGameLivesRemaining}/${whackGameMaxLives}`,document.getElementById("whack-score-display").textContent="0",document.getElementById("whack-time-display").textContent="30s";const r=document.getElementById("whack-grid");r.innerHTML="";for(let e=0;e<16;e++){const t=document.createElement("div");t.className="whack-block",t.setAttribute("data-block-id",e),t.onclick=()=>hitBlock(e),r.appendChild(t)}whackStartGame(a)}function whackStartGame(e){whackSpawnBlock(e.spawnRate),whackGameInterval=setInterval(()=>{const e=Date.now()-whackGameStartTime,t=Math.max(0,whackGameTimeLimit-e),n=Math.ceil(t/1e3),a=document.getElementById("whack-time-display");a&&(a.textContent=n+"s"),t<=0&&endWhackGame(!1)},100)}function whackSpawnBlock(e){const t=whackDifficultyConfig[whackGameDifficulty],n=t.blockVisibility||800,a=t.simultaneousBlocks||1;whackSpawnInterval=setInterval(()=>{if(whackGameActive&&whackActiveBlocks.size<a){let e=Math.floor(16*Math.random()),t=0;for(;whackActiveBlocks.has(e)&&t<10;)e=Math.floor(16*Math.random()),t++;if(!whackActiveBlocks.has(e)){const t=document.querySelector(`[data-block-id="${e}"]`);t&&(whackActiveBlocks.add(e),t.classList.add("active"),setTimeout(()=>{whackActiveBlocks.has(e)&&(whackActiveBlocks.delete(e),t.classList.remove("active"),whackGameActive&&missBlock())},n))}}},e)}function hitBlock(e){if(!whackGameActive)return;const t=document.querySelector(`[data-block-id="${e}"]`);if(t&&t.classList.contains("active")){whackGameScore+=10,whackGameBlocksHit++,whackActiveBlocks.delete(e),t&&(t.classList.remove("active"),t.classList.add("hit"),setTimeout(()=>t.classList.remove("hit"),200));const n=document.getElementById("whack-score-display");n&&(n.textContent=whackGameBlocksHit),playClickSound()}else if(t&&!t.classList.contains("active")){const e=document.getElementById("whack-grid");e&&(e.classList.add("whack-error-flash"),setTimeout(()=>e.classList.remove("whack-error-flash"),300)),missBlock()}}function missBlock(){if(!whackGameActive)return;const e=document.getElementById("whack-grid");if(e&&(e.classList.add("whack-error-flash"),setTimeout(()=>e.classList.remove("whack-error-flash"),300)),null!==whackActiveBlock){const e=document.querySelector(`[data-block-id="${whackActiveBlock}"]`);e&&e.classList.remove("active"),whackActiveBlock=null}whackGameLivesRemaining--;const t=document.getElementById("whack-lives-display");t&&(t.textContent=`‚ù§Ô∏è ${whackGameLivesRemaining}/${whackGameMaxLives}`),whackGameLivesRemaining<=0&&endWhackGame(!1)}function endWhackGame(e){if(whackGameManuallyClosed)return whackGameManuallyClosed=!1,whackSpawnInterval&&clearInterval(whackSpawnInterval),void(whackGameInterval&&clearInterval(whackGameInterval));whackGameActive=!1,whackSpawnInterval&&clearInterval(whackSpawnInterval),whackGameInterval&&clearInterval(whackGameInterval),whackGameGamesPlayed++;const t=whackDifficultyConfig[whackGameDifficulty];let n=0;if(whackGameLivesRemaining>0){whackGameGamesWon++;const e="undefined"!=typeof ascensionLevel?ascensionLevel:0,t=window.btcPerSec??btcPerSec??0,a=window.ethPerSec??ethPerSec??0,o=window.dogePerSec??dogePerSec??0,i=window.btcPrice??btcPrice??1e5,s=window.ethPrice??ethPrice??3500,l=window.dogePrice??dogePrice??.25,r=whackGameBlocksHit;const c=15,d=r*(50+(t*i+a*s+o*l))*Math.min(1.5,r/c)*Math.pow(1.15,e)*(1+("function"==typeof getSkillBonus?getSkillBonus("minigame_rewards"):0)/100),u=.4*d/btcPrice;btcBalance+=u,btcLifetime+=u;const h=.35*d/ethPrice;ethBalance+=h,ethLifetime+=h;const m=.2*d/dogePrice;dogeBalance+=m,dogeLifetime+=m;const g=.05*d;addEarnings(g),n=d,whackGameTotalRewardsEarned+=d,lifetimeEarnings+=d,sessionEarnings+=d,whackLastRewards={btc:u,eth:h,doge:m,usd:g,totalUsd:d}}whackCooldowns[whackGameDifficulty]=Date.now()+t.cooldown;const a=document.getElementById("whack-modal"),o=document.getElementById("whack-results-modal");if(a&&(a.style.display="none"),o){const e=document.getElementById("whack-results-title");e&&(e.textContent=whackGameLivesRemaining>0?"‚ö° VICTORY!":"‚ö° DEFEAT!");const t=document.getElementById("whack-results-score");t&&(t.textContent=whackGameBlocksHit);const n=document.getElementById("whack-results-blocks");n&&(n.textContent=whackGameBlocksHit);const a=document.getElementById("whack-results-lives");a&&(a.textContent=whackGameLivesRemaining);const i=document.getElementById("whack-results-rewards-breakdown");i&&(i.innerHTML=whackGameLivesRemaining>0?`<div style="color: #f7931a; font-weight: 700; margin-bottom: 8px;">Rewards Earned:</div>\n                        <div style="color: #fff; font-size: 0.9rem; line-height: 1.6;">\n                            ‚Çø ${whackLastRewards.btc>=1?whackLastRewards.btc.toFixed(4):whackLastRewards.btc.toFixed(8)} BTC<br>\n                            Œû ${whackLastRewards.eth>=1?whackLastRewards.eth.toFixed(4):whackLastRewards.eth.toFixed(8)} ETH<br>\n                            √ê ${whackLastRewards.doge.toFixed(2)} DOGE<br>\n                            üíµ $${abbreviateNumber(whackLastRewards.totalUsd)}\n                        </div>\n                        <div style="font-size: 0.75rem; color: #aaa; margin-top: 10px; margin-bottom: 5px; font-style: italic;">\n                            Paid as: 40% BTC ‚Ä¢ 35% ETH ‚Ä¢ 20% DOGE ‚Ä¢ 5% Cash\n                        </div>\n                        <div style="font-size: 0.7rem; color: #888; margin-bottom: 0px;">\n                            Base Reward: $50 + your mining hash rate value\n                        </div>`:'<div style="color: #888;">No rewards earned</div>'),o.style.display="flex"}updateUI(),saveGame()}function closeWhackResultsModal(){const e=document.getElementById("whack-results-modal");if(e&&(e.style.display="none"),vfxEnabled&&whackGameGamesWon>0&&"function"==typeof spawnExplosionCoins){const e=whackLastRewards?.totalUsd||0,t=Math.max(15,Math.min(50,Math.floor(e/50)));spawnExplosionCoins("btc",t/4),spawnExplosionCoins("eth",t/4),spawnExplosionCoins("doge",t/4),spawnExplosionCoins("usd",t/4)}}function closeWhackMidGame(){if(whackGameActive){whackGameActive=!1,whackGameManuallyClosed=!0;const e=whackDifficultyConfig[whackGameDifficulty];whackCooldowns[whackGameDifficulty]=Date.now()+e.cooldown,console.log(`[WHACK] Applied cooldown to ${whackGameDifficulty}: ${e.cooldown}ms`),updateWhackCooldownDisplays()}const e=document.getElementById("whack-modal");e&&(e.style.display="none");const t=document.getElementById("whack-results-modal");t&&(t.style.display="none")}function closeWhackModal(){const e=document.getElementById("whack-modal");if(e&&(e.style.display="none"),document.body.classList.remove("modal-open"),vfxEnabled&&whackGameGamesWon>0&&"function"==typeof spawnExplosionCoins){const e=whackLastRewards?.totalUsd||0,t=Math.max(15,Math.min(50,Math.floor(e/50)));spawnExplosionCoins("btc",t/4),spawnExplosionCoins("eth",t/4),spawnExplosionCoins("doge",t/4),spawnExplosionCoins("usd",t/4)}}function getManualHashBonus(){const e=(btcUpgrades[0]?.level||0)+(ethUpgrades[0]?.level||0)+(dogeUpgrades[0]?.level||0),t=100*(Math.pow(1.1,e)-1);return{totalUpgrades:e,bonusPercent:t,displayText:t>0?`+${t.toFixed(1)}%`:"0%"}}function initNetworkMinigame(){if(!("undefined"!=typeof metaUpgrades&&metaUpgrades.minigame_unlock&&metaUpgrades.minigame_unlock.purchased)&&lifetimeEarnings<2e4)return void alert(`üîí Network Stress Test Locked!\n\nRequires $20,000 lifetime earnings to unlock.\n\nCurrent: $${lifetimeEarnings.toFixed(2)}`);networkGameActive=!0,networkGameStartTime=Date.now(),networkGameTotalDamage=0,networkGameClickDamageTotal=0;const e=Math.pow(1.3,networkGameGamesWon);networkGameMaxHP=Math.floor(200*e),networkGameCurrentHP=networkGameMaxHP;const t=getManualHashBonus();networkGameClickDamage=Math.floor(20*Math.pow(1.1,t.totalUpgrades));const n=.05+.015*networkGameGamesPlayed,a=document.getElementById("network-modal");if(!a)return;a.style.display="flex",document.body.classList.add("modal-open");const o=document.getElementById("network-game-info"),i=document.getElementById("network-results-message"),s=document.getElementById("network-close-btn");o&&(o.style.display="block"),i&&(i.style.display="none"),s&&(s.style.display="none"),document.getElementById("network-difficulty-display").textContent=`RUN #${networkGameGamesPlayed+1}`,document.getElementById("network-hp-display").textContent=networkGameMaxHP,document.getElementById("network-hp-max-display").textContent=networkGameMaxHP,document.getElementById("network-time-display").textContent="10s";const l=getManualHashBonus();document.getElementById("network-total-damage-display").textContent=l.displayText,document.getElementById("network-click-damage-display").textContent=`+${networkGameClickDamage} damage/click`,networkStartGame(n)}function networkStartGame(e){networkGameInterval=setInterval(()=>{const e=Date.now()-networkGameStartTime,t=Math.max(0,networkGameTimeLimit-e),n=Math.ceil(t/1e3),a=document.getElementById("network-time-display");a&&(a.textContent=n+"s");const o=btcPerSec*btcPrice+ethPerSec*ethPrice+dogePerSec*dogePrice,i=o/10;if(networkGameActive){networkGameCurrentHP-=i,networkGameTotalDamage+=i;const e=document.getElementById("network-hp-display");e&&(e.textContent=Math.max(0,Math.floor(networkGameCurrentHP)));const t=document.getElementById("network-total-damage-display");if(t){const e=getManualHashBonus();t.textContent=e.displayText}const n=document.getElementById("network-passive-dps-display");n&&(n.textContent=o<.01?o.toFixed(4):o<1?o.toFixed(2):Math.floor(o));const a=document.getElementById("network-hp-bar");if(a){const e=Math.max(0,Math.min(100,networkGameCurrentHP/networkGameMaxHP*100));a.style.width=e+"%"}updateNetworkRewardsPreview(),networkGameCurrentHP<=0&&endNetworkGame(!0)}t<=0&&endNetworkGame(networkGameCurrentHP<=0)},100)}function networkClickAttack(){if(!networkGameActive)return;networkGameCurrentHP-=networkGameClickDamage,networkGameTotalDamage+=networkGameClickDamage,networkGameClickDamageTotal+=networkGameClickDamage;const e=document.getElementById("network-hp-display");e&&(e.textContent=Math.max(0,Math.floor(networkGameCurrentHP)));const t=document.getElementById("network-total-damage-display");t&&(t.textContent=Math.floor(networkGameClickDamageTotal));const n=document.getElementById("network-hp-bar");if(n){const e=Math.max(0,Math.min(100,networkGameCurrentHP/networkGameMaxHP*100));n.style.width=e+"%"}const a=document.getElementById("network-click-btn");a&&(a.style.transform="scale(0.95)",setTimeout(()=>{a.style.transform="scale(1)"},100)),playClickSound(),networkGameCurrentHP<=0&&endNetworkGame(!0)}function updateNetworkRewardsPreview(){const e=5e3*Math.pow(1.39,networkGameGamesWon),t=.4*e/btcPrice,n=.35*e/ethPrice,a=.2*e/dogePrice,o=.05*e,i=document.getElementById("network-reward-btc-preview");i&&(i.textContent=t>=1?t.toFixed(4):t.toFixed(8));const s=document.getElementById("network-reward-eth-preview");s&&(s.textContent=n>=1?n.toFixed(4):n.toFixed(8));const l=document.getElementById("network-reward-doge-preview");l&&(l.textContent=a>=1?a.toFixed(4):a.toFixed(8));const r=document.getElementById("network-reward-usd-preview");var c;r&&(r.textContent="$"+((c=o)>=1e12?(c/1e12).toFixed(2)+"T":c>=1e9?(c/1e9).toFixed(2)+"B":c>=1e6?(c/1e6).toFixed(2)+"M":c>=1e3?(c/1e3).toFixed(2)+"K":c.toFixed(0)))}function endNetworkGame(e){networkGameActive=!1,networkGameInterval&&clearInterval(networkGameInterval);let t=0;if(e){networkGameWonThisRound=!0,networkGameGamesPlayed++,networkGameGamesWon++;const e="undefined"!=typeof ascensionLevel?ascensionLevel:0,n=5e3*Math.pow(1.39,networkGameGamesWon)*(.5+1.5*Math.min(1,networkGameTotalDamage/(1.5*networkGameMaxHP)))*Math.pow(1.15,e),a=.4*n/btcPrice;btcBalance+=a,btcLifetime+=a;const o=.35*n/ethPrice;ethBalance+=o,ethLifetime+=o;const i=.2*n/dogePrice;dogeBalance+=i,dogeLifetime+=i;const s=.05*n;addEarnings(s),t=n,networkGameTotalRewardsEarned+=n,lifetimeEarnings+=n,sessionEarnings+=n,networkLastRewards={btc:a,eth:o,doge:i,usd:s,totalUsd:n}}const n=document.getElementById("network-results-message");if(n)if(e){const e=e=>e>=1?e.toFixed(4):e.toFixed(8);n.innerHTML=`<span style="color: #00b4ff; font-size: 1.5rem;">‚úì NETWORK DESTROYED!</span><br>\n                    <div style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 6px;">\n                        <div style="color: #f7931a; font-weight: 700; margin-bottom: 8px;">Formula Breakdown:</div>\n                        <div style="color: #fff; font-size: 0.75rem; margin-bottom: 10px; text-align: left; line-height: 1.4;">\n                            <div>Damage Dealt: ${Math.floor(networkGameTotalDamage)}</div>\n                            <div>Base Reward: (Damage √ó $10) √ó Score Multiplier</div>\n                            <div>Games Won Bonus: ${networkGameGamesWon} consecutive wins</div>\n                            <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #666;">Total Multiplier: ${(Math.pow(1.15,ascensionLevel||0)*(1+(getSkillBonus?getSkillBonus("minigame_rewards"):0)/100)).toFixed(3)}x</div>\n                        </div>\n                        <div style="color: #f7931a; font-weight: 700; margin-bottom: 5px;">Rewards Earned:</div>\n                        <div style="color: #fff; font-size: 0.9rem;">\n                            ‚Çø ${e(networkLastRewards.btc)} BTC<br>\n                            Œû ${e(networkLastRewards.eth)} ETH<br>\n                            √ê ${e(networkLastRewards.doge)} DOGE<br>\n                            üíµ $${networkLastRewards.usd.toFixed(2)}\n                        </div>\n                        <div style="font-size: 0.75rem; color: #aaa; margin-top: 10px; margin-bottom: 5px; font-style: italic;">\n                            Paid as: 40% BTC ‚Ä¢ 35% ETH ‚Ä¢ 20% DOGE ‚Ä¢ 5% Cash\n                        </div>\n                        <div style="font-size: 0.7rem; color: #888; margin-bottom: 0px;">\n                            Base Reward: $10 per damage dealt\n                        </div>\n                    </div>`}else n.innerHTML=`<span style="color: #ff3344; font-size: 1.5rem;">‚úó TIME'S UP!</span><br>\n                    <span style="color: #888;">Network HP remaining: ${Math.max(0,Math.floor(networkGameCurrentHP))}<br>You dealt ${Math.floor(networkGameTotalDamage)} damage!</span>`;const a=document.getElementById("network-game-info"),o=document.getElementById("network-close-btn");a&&(a.style.display="none"),n&&(n.style.display="block"),o&&(o.style.display="block"),updateUI(),saveGame()}function closeNetworkModal(){const e=document.getElementById("network-modal");if(e&&(e.style.display="none"),document.body.classList.remove("modal-open"),vfxEnabled&&networkGameWonThisRound&&"function"==typeof spawnExplosionCoins){const e=networkLastRewards?.totalUsd||0,t=Math.max(20,Math.min(50,Math.floor(e/50)));spawnExplosionCoins("btc",t/4),spawnExplosionCoins("eth",t/4),spawnExplosionCoins("doge",t/4),spawnExplosionCoins("usd",t/4)}networkGameWonThisRound=!1}function updatePowerDisplay(){const e=document.getElementById("power-used");if(e){const t=getTotalPowerAvailableWithBonus();e.innerText=formatPower(totalPowerUsed)+" / "+formatPower(t);const n=t>0?totalPowerUsed/t*100:0;e.style.color=n>100?"#ff3344":n>80?"#ff9500":n>60?"#ffdd00":"#00ff88"}const t=document.getElementById("power-bar-fill");if(t){const e=getTotalPowerAvailableWithBonus(),n=e>0?totalPowerUsed/e*100:0;t.style.width=Math.min(n,100)+"%",t.style.background=n>100?"#ff3344":n>80?"#ff9500":n>60?"#ffdd00":"#00ff88"}powerUpgrades.forEach(e=>{const t=e.currentUsd,n=document.querySelector(`#pow-${e.id} > div:first-child > div:first-child`);if(n){const t=formatLevelTag(e.level);n.innerHTML=n.innerHTML.replace(/\s*<span style="color:#888;font-size:0\.85rem">\[.*?\]<\/span>/g,"")+` <span style="color:#888;font-size:0.85rem">${t}</span>`}const a=document.getElementById(`pow-current-${e.id}`);a&&(a.innerText=`+${formatPower(e.currentPower)} - Current Power`);const o=document.getElementById(`pow-power-${e.id}`);o&&(o.innerText=`+${formatPower(e.basePower)} Produced per level`);const i=document.getElementById(`pow-usd-${e.id}`);i&&(i.innerText=`$${formatNumberForDisplay(e.currentUsd)}`);const s=document.getElementById(`pow-afford-${e.id}`);if(s){let n=dollarBalance,a=0,o=t,i=e.level;for(;n>=o;)n-=o,a++,i++,o=e.baseUsd*Math.pow(1.15,i);s.innerText=`x${a}`,s.style.color=a>0?"#00ff88":"#666"}const l=document.getElementById(`pow-${e.id}`);l&&(dollarBalance<t?(l.style.opacity="0.2",l.style.cursor="not-allowed",l.disabled=!0):(l.style.opacity="1",l.style.cursor="pointer",l.disabled=!1))})}function updateAutoSellButtonUI(){const e=document.getElementById("auto-sell-toggle-btn"),t=document.getElementById("auto-sell-status");if(!e||!t)return;const n=void 0!==window.metaUpgrades?window.metaUpgrades:null,a=void 0!==window.upgradeToggleState?window.upgradeToggleState:null;if(n&&n.auto_sell&&n.auto_sell.purchased){const n=a&&!0===a.auto_sell;e.disabled=!1,e.removeAttribute("disabled"),e.title="Click to toggle automatic crypto to USD conversion",t.innerText=n?"ON":"OFF";const o=n?"üü¢":"‚≠ï";e.innerHTML=o+' Auto-Sell: <span id="auto-sell-status">'+(n?"ON":"OFF")+"</span>"}else e.disabled=!0,e.setAttribute("disabled","disabled"),t.innerText="LOCKED",e.title='Purchase "Auto-Sell Crypto to Cash" upgrade to enable',e.innerHTML='üîí Auto-Sell: <span id="auto-sell-status">LOCKED</span>'}function toggleAutoSellButton(){const e=void 0!==window.metaUpgrades?window.metaUpgrades:null;e&&e.auto_sell&&e.auto_sell.purchased?"function"==typeof toggleAutoSell&&(toggleAutoSell(),updateAutoSellButtonUI()):alert('Purchase the "Auto-Sell Crypto to Cash" upgrade first!')}function flashCryptoBar(e){const t=document.getElementById(e);t&&(t.classList.contains("bar-flash")?(t.classList.remove("bar-flash"),setTimeout(()=>{t.classList.add("bar-flash")},10)):t.classList.add("bar-flash"))}function manualHash(){"function"==typeof pauseCoinRain&&(pauseCoinRain(),setTimeout(()=>{"function"==typeof resumeCoinRain&&resumeCoinRain()},50));const e="function"==typeof getClickBonus?getClickBonus():1,t="undefined"!=typeof ascensionLevel&&ascensionLevel>0?1+.01*ascensionLevel:1;let n=btcClickValue*e*t;if("undefined"!=typeof metaUpgrades){let e=0;Object.entries(metaUpgrades).forEach(([t,n])=>{if(n.purchased&&t.includes("click_hashrate")){const n=parseInt(t.match(/\d+$/)[0]);e+=.5*Math.pow(1.15,n-1)}}),e>0&&(n+=btcPerSec*(e/100))}"undefined"!=typeof metaUpgrades&&metaUpgrades.hash_rate_memory&&metaUpgrades.hash_rate_memory.purchased&&(n+=.01*btcPerSec);tryAutoSellCrypto("btc",n)||(btcBalance+=n),btcLifetime+=n;const a=n*btcPrice;lifetimeEarnings+=a,sessionEarnings+=a;const o=Date.now();manualHashClickTime=o,manualHashCooldownEnd=o+1e3,clickTimestamps.push(o),clickTimestamps.length>60&&clickTimestamps.shift(),spawnCoinsForClick("btc",a),flashCryptoBar("btc-bar"),playClickSound(),requestAnimationFrame(()=>{updateUI()})}function manualEthHash(){"function"==typeof pauseCoinRain&&(pauseCoinRain(),setTimeout(()=>{"function"==typeof resumeCoinRain&&resumeCoinRain()},50));const e="function"==typeof getClickBonus?getClickBonus():1,t="undefined"!=typeof ascensionLevel&&ascensionLevel>0?1+.01*ascensionLevel:1;let n=ethClickValue*e*t;if("undefined"!=typeof metaUpgrades){let e=0;Object.entries(metaUpgrades).forEach(([t,n])=>{if(n.purchased&&t.includes("click_hashrate")){const n=parseInt(t.match(/\d+$/)[0]);e+=.5*Math.pow(1.15,n-1)}}),e>0&&(n+=ethPerSec*(e/100))}"undefined"!=typeof metaUpgrades&&metaUpgrades.hash_rate_memory&&metaUpgrades.hash_rate_memory.purchased&&(n+=.01*ethPerSec);tryAutoSellCrypto("eth",n)||(ethBalance+=n),ethLifetime+=n;const a=n*ethPrice;lifetimeEarnings+=a,sessionEarnings+=a;const o=Date.now();manualHashClickTime=o,manualHashCooldownEnd=o+1e3,clickTimestamps.push(o),clickTimestamps.length>60&&clickTimestamps.shift(),spawnCoinsForClick("eth",a),flashCryptoBar("eth-bar"),playClickSound(),requestAnimationFrame(()=>{updateUI()})}function manualDogeHash(){"function"==typeof pauseCoinRain&&(pauseCoinRain(),setTimeout(()=>{"function"==typeof resumeCoinRain&&resumeCoinRain()},50));const e="function"==typeof getClickBonus?getClickBonus():1,t="undefined"!=typeof ascensionLevel&&ascensionLevel>0?1+.01*ascensionLevel:1;let n=dogeClickValue*e*t;if("undefined"!=typeof metaUpgrades){let e=0;Object.entries(metaUpgrades).forEach(([t,n])=>{if(n.purchased&&t.includes("click_hashrate")){const n=parseInt(t.match(/\d+$/)[0]);e+=.5*Math.pow(1.15,n-1)}}),e>0&&(n+=dogePerSec*(e/100))}"undefined"!=typeof metaUpgrades&&metaUpgrades.hash_rate_memory&&metaUpgrades.hash_rate_memory.purchased&&(n+=.01*dogePerSec);tryAutoSellCrypto("doge",n)||(dogeBalance+=n),dogeLifetime+=n;const a=n*dogePrice;lifetimeEarnings+=a,sessionEarnings+=a;const o=Date.now();manualHashClickTime=o,manualHashCooldownEnd=o+1e3,clickTimestamps.push(o),clickTimestamps.length>60&&clickTimestamps.shift(),spawnCoinsForClick("doge",a),flashCryptoBar("doge-bar"),playClickSound(),requestAnimationFrame(()=>{updateUI()})}function spawnCoinsForClick(e,t){if(!vfxEnabled)return;const n=Date.now();if(n-lastCoinSpawnTime<100)return;if(lastCoinSpawnTime=n,void 0===window.coinRainSystem||!window.coinRainSystem){if("function"!=typeof initializeCoinRain)return;initializeCoinRain()}let a;"usd"===e?(a=t<1?1:t<10?Math.floor(Math.min(3,t)):t<1e3?3+Math.floor((t-10)/330):t<1e4?4+Math.floor((t-1e3)/2250):t<1e5?5+Math.floor((t-1e4)/22500):t<1e6?6+Math.floor((t-1e5)/225e3):t<1e7?7+Math.floor((t-1e6)/1285714):t<1e8?8+Math.floor((t-1e7)/1e7):10,a=Math.max(1,Math.min(10,a))):a=1;let o=["usd"];"usd"===e&&(t>=1e5?(o=["usd","usd_stack","usd_stack_2"],a=Math.ceil(.8*a)):t>=1e4&&(o=["usd","usd_stack"],a=Math.ceil(.9*a)));for(let t=0;t<a;t++)setTimeout(()=>{let t=e;"usd"===e&&(t=o[Math.floor(Math.random()*o.length)]),window.coinRainSystem.spawnCoin(t,!0)},t*(5+25*Math.random()))}function spawnPacketInterceptorRewardCoins(){if(void 0===window.coinRainSystem||!window.coinRainSystem){if("function"!=typeof initializeCoinRain)return;initializeCoinRain()}if(void 0===packetLastRewards||!packetLastRewards||packetLastRewards.totalUsd<=0)return;if(void 0!==vfxEnabled&&!vfxEnabled)return;const e=packetLastRewards,t=e.totalUsd;let n;n=t>=1e5?Math.min(6,Math.floor(t/5e5)):t>=1e4?Math.min(5,Math.floor(t/5e4)):Math.min(4,Math.floor(t/1e4)+2),n=Math.max(1,n);const a=Math.min(5,Math.max(1,Math.floor(100*e.btc))),o=Math.min(5,Math.max(1,Math.floor(10*e.eth))),i=Math.min(5,Math.max(1,Math.floor(e.doge/1e3))),s=(e,n)=>{let a=null;"usd"===e&&(a=t>=1e5?["usd","usd_stack","usd_stack_2"]:t>=1e4?["usd","usd_stack"]:["usd"]);for(let t=0;t<n;t++)setTimeout(()=>{let t=e;"usd"===e&&a&&(t=a[Math.floor(Math.random()*a.length)]),window.coinRainSystem.spawnCoin(t,!0)},t*(10+30*Math.random()))};s("usd",n),s("btc",a),s("eth",o),s("doge",i)}function buyLevel(e){const t=upgrades[e],n=t.currentUsd/btcPrice;if(btcBalance>=n){const e=equipmentPowerReqs[t.id]||0,a=totalPowerUsed+e,o=getTotalPowerAvailableWithBonus();if(a>o&&e>0)return void alert(`Insufficient power! This upgrade requires ${e.toLocaleString()}W per level.\nYou need ${Math.ceil(a-o).toLocaleString()}W more power capacity.`);btcBalance-=n,hardwareEquity+=t.currentUsd,t.level++,0===t.id||t.isClickUpgrade?(btcClickValue*=1.12,t.currentUsd=Math.floor(t.baseUsd*Math.pow(1.15,t.level)),document.getElementById("btc-hash-value").innerText=`+${btcClickValue.toFixed(8)} ‚Çø`):(t.currentYield=calculateMinerYield(t),t.currentUsd=Math.floor(t.baseUsd*Math.pow(1.15,t.level)));const i="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;btcPerSec=upgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+i),updateUI(),saveGame(),playUpgradeSound()}}function buyLevelMultiple(e,t){const n=upgrades[e],a=equipmentPowerReqs[n.id]||0;let o=0;for(let e=0;e<t;e++){const e=n.currentUsd;if(dollarBalance<e)break;if(a>0){if(totalPowerUsed+a>getTotalPowerAvailableWithBonus())break}dollarBalance-=e,hardwareEquity+=n.currentUsd,n.level++,0===n.id||n.isClickUpgrade?(btcClickValue*=1.12,n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level))):(n.currentYield=calculateMinerYield(n),n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level))),o++,calculateTotalPowerUsed()}o>0&&((0===n.id||n.isClickUpgrade)&&(document.getElementById("btc-hash-value").innerText=`+${btcClickValue.toFixed(8)} ‚Çø`),btcPerSec=upgrades.reduce((e,t)=>e+(t.currentYield||0),0),1===n.id&&"function"==typeof trackUSBMinerPurchase&&trackUSBMinerPurchase(),lastUIUpdateTime=0,updateUI(),saveGame(),playUpgradeSound())}function restorePermanentMilestoneDoublings(){function e(e){if(0===e.id||e.isClickUpgrade)return;let t=0;e.milestoneDoublings&&"object"==typeof e.milestoneDoublings&&(t=Object.values(e.milestoneDoublings).filter(e=>!0===e).length),e.doubleMultiplier=Math.pow(2,t)}upgrades.forEach(t=>{if(e(t),"function"==typeof getPermanentDoubleMultiplier){const e=getPermanentDoubleMultiplier("btc")||1;e>1&&0!==t.id&&!t.isClickUpgrade&&(t.doubleMultiplier*=e)}}),ethUpgrades.forEach(t=>{if(e(t),"function"==typeof getPermanentDoubleMultiplier){const e=getPermanentDoubleMultiplier("eth")||1;e>1&&0!==t.id&&!t.isClickUpgrade&&(t.doubleMultiplier*=e)}}),dogeUpgrades.forEach(t=>{if(e(t),"function"==typeof getPermanentDoubleMultiplier){const e=getPermanentDoubleMultiplier("doge")||1;e>1&&0!==t.id&&!t.isClickUpgrade&&(t.doubleMultiplier*=e)}})}function calculateMinerYield(e){if(0===e.id||e.isClickUpgrade)return 0;const t=e.baseYield*e.level;let n=e.doubleMultiplier;return btcUpgrades.includes(e)?n*=Math.pow(2,btcMultiplierLevel):ethUpgrades.includes(e)?n*=Math.pow(2,ethMultiplierLevel):dogeUpgrades.includes(e)&&(n*=Math.pow(2,dogeMultiplierLevel)),t*n}function purchaseGlobalBTCMultiplier(){const e=getNextMultiplierCost(btcMultiplierLevel);if(dollarBalance<e)return;dollarBalance-=e,hardwareEquity+=e,btcMultiplierLevel++;const t="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;upgrades.forEach(e=>{e.isClickUpgrade||(e.currentYield=calculateMinerYield(e))}),btcPerSec=upgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+t),lastUIUpdateTime=0,initBtcShop(),updateUI(),saveGame(),playUpgradeSound()}function purchaseGlobalETHMultiplier(){const e=getNextMultiplierCost(ethMultiplierLevel);if(dollarBalance<e)return void console.log(`[DEBUG] Cannot afford ETH multiplier. Cost: $${e}, Balance: $${dollarBalance}`);dollarBalance-=e,hardwareEquity+=e,ethMultiplierLevel++,console.log(`[DEBUG] Purchased ETH multiplier ${ethMultiplierLevel}! Next cost: $${getNextMultiplierCost(ethMultiplierLevel)}`);const t="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;ethUpgrades.forEach(e=>{e.isClickUpgrade||(e.currentYield=calculateMinerYield(e))}),ethPerSec=ethUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+t),window.ethPerSec=ethPerSec,lastUIUpdateTime=0,initEthShop(),updateUI(),saveGame(),playUpgradeSound()}function purchaseGlobalDogeMultiplier(){const e=getNextMultiplierCost(dogeMultiplierLevel);if(dollarBalance<e)return void console.log(`[DEBUG] Cannot afford DOGE multiplier. Cost: $${e}, Balance: $${dollarBalance}`);dollarBalance-=e,hardwareEquity+=e,dogeMultiplierLevel++,console.log(`[DEBUG] Purchased DOGE multiplier ${dogeMultiplierLevel}! Next cost: $${getNextMultiplierCost(dogeMultiplierLevel)}`);const t="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;dogeUpgrades.forEach(e=>{e.isClickUpgrade||(e.currentYield=calculateMinerYield(e))}),dogePerSec=dogeUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+t),window.dogePerSec=dogePerSec,lastUIUpdateTime=0,initDogeShop(),updateUI(),saveGame(),playUpgradeSound()}function purchaseBTCManualHashRate(){const e=getManualHashRateCost(btcManualHashRateLevel);if(dollarBalance<e)return;dollarBalance-=e,hardwareEquity+=e,btcManualHashRateLevel++,btcClickValue*=10;const t=upgrades.find(e=>"Manual Hash Rate"===e.name);t&&(t.clickIncrease=btcClickValue);const n=document.getElementById("btc-hash-value");n&&(n.innerText=`+${btcClickValue.toFixed(8)} ‚Çø`);const a=document.getElementById("btc-manual-hash-rate-btn");if(a){const e=getManualHashRateCost(btcManualHashRateLevel),t=dollarBalance>=e,n=1+.5*btcManualHashRateLevel;document.getElementById("btc-mhr-cost").innerHTML=`$${formatNumberForDisplay(e)}`,document.getElementById("btc-mhr-multi").innerHTML=`${n.toFixed(1)}x`,t?(a.style.setProperty("display","flex","important"),a.style.cursor="pointer",a.disabled=!1):(a.style.setProperty("display","none","important"),a.disabled=!0)}saveGame(),playUpgradeSound()}function purchaseETHManualHashRate(){const e=getManualHashRateCost(ethManualHashRateLevel);if(dollarBalance<e)return;dollarBalance-=e,hardwareEquity+=e,ethManualHashRateLevel++,ethClickValue*=10;const t=ethUpgrades.find(e=>"Manual Hash Rate"===e.name);t&&(t.clickIncrease=ethClickValue);const n=document.getElementById("eth-hash-value");n&&(n.innerText=`+${ethClickValue.toFixed(8)} Œû`);const a=document.getElementById("eth-manual-hash-rate-btn");if(a){const e=getManualHashRateCost(ethManualHashRateLevel),t=dollarBalance>=e,n=1+.5*ethManualHashRateLevel;document.getElementById("eth-mhr-cost").innerHTML=`$${formatNumberForDisplay(e)}`,document.getElementById("eth-mhr-multi").innerHTML=`${n.toFixed(1)}x`,t?(a.style.setProperty("display","flex","important"),a.style.cursor="pointer",a.disabled=!1):(a.style.setProperty("display","none","important"),a.disabled=!0)}saveGame(),playUpgradeSound()}function purchaseDOGEManualHashRate(){const e=getManualHashRateCost(dogeManualHashRateLevel);if(dollarBalance<e)return;dollarBalance-=e,hardwareEquity+=e,dogeManualHashRateLevel++,dogeClickValue*=10;const t=dogeUpgrades.find(e=>"Manual Hash Rate"===e.name);t&&(t.clickIncrease=dogeClickValue);const n=document.getElementById("doge-hash-value");n&&(n.innerText=`+${dogeClickValue.toFixed(8)} √ê`);const a=document.getElementById("doge-manual-hash-rate-btn");if(a){const e=getManualHashRateCost(dogeManualHashRateLevel),t=dollarBalance>=e,n=1+.5*dogeManualHashRateLevel;document.getElementById("doge-mhr-cost").innerHTML=`$${formatNumberForDisplay(e)}`,document.getElementById("doge-mhr-multi").innerHTML=`${n.toFixed(1)}x`,t?(a.style.setProperty("display","flex","important"),a.style.cursor="pointer",a.disabled=!1):(a.style.setProperty("display","none","important"),a.disabled=!0)}saveGame(),playUpgradeSound()}function updateGlobalMultiplierButtons(){const e=document.getElementById("btc-global-multiplier-btn");if(e){const t=getNextMultiplierCost(btcMultiplierLevel),n=dollarBalance>=t,a=Math.pow(2,btcMultiplierLevel),o=document.getElementById("btc-multiplier-cost"),i=`Cost: $${formatNumberForDisplay(t)}`;o&&o.textContent!==i&&(o.textContent=i);const s=document.getElementById("btc-multiplier-level"),l=`Multiplier: ${a}x`;s&&s.textContent!==l&&(s.textContent=l),n?(e.style.opacity="1",e.style.cursor="pointer",e.disabled=!1):(e.style.opacity="0.45",e.style.cursor="not-allowed",e.disabled=!0)}const t=document.getElementById("eth-global-multiplier-btn");if(t){const e=getNextMultiplierCost(ethMultiplierLevel),n=dollarBalance>=e,a=Math.pow(2,ethMultiplierLevel),o=document.getElementById("eth-multiplier-cost"),i=`Cost: $${formatNumberForDisplay(e)}`;o&&o.textContent!==i&&(o.textContent=i);const s=document.getElementById("eth-multiplier-level"),l=`Multiplier: ${a}x`;s&&s.textContent!==l&&(s.textContent=l),n?(t.style.opacity="1",t.style.cursor="pointer",t.disabled=!1):(t.style.opacity="0.45",t.style.cursor="not-allowed",t.disabled=!0)}const n=document.getElementById("doge-global-multiplier-btn");if(n){const e=getNextMultiplierCost(dogeMultiplierLevel),t=dollarBalance>=e,a=Math.pow(2,dogeMultiplierLevel),o=document.getElementById("doge-multiplier-cost"),i=`Cost: $${formatNumberForDisplay(e)}`;o&&o.textContent!==i&&(o.textContent=i);const s=document.getElementById("doge-multiplier-level"),l=`Multiplier: ${a}x`;s&&s.textContent!==l&&(s.textContent=l),t?(n.style.opacity="1",n.style.cursor="pointer",n.disabled=!1):(n.style.opacity="0.45",n.style.cursor="not-allowed",n.disabled=!0)}}function updateManualHashRateButtons(){const e=document.getElementById("btc-manual-hash-rate-btn");if(e){const t=getManualHashRateCost(btcManualHashRateLevel),n=dollarBalance>=t,a=1+.5*btcManualHashRateLevel;document.getElementById("btc-mhr-cost").innerHTML=`$${formatNumberForDisplay(t)}`,document.getElementById("btc-mhr-multi").innerHTML=`${a.toFixed(1)}x`,n?(e.style.setProperty("display","flex","important"),e.style.cursor="pointer",e.disabled=!1):(e.style.setProperty("display","none","important"),e.disabled=!0)}const t=document.getElementById("eth-manual-hash-rate-btn");if(t){const e=getManualHashRateCost(ethManualHashRateLevel),n=dollarBalance>=e,a=1+.5*ethManualHashRateLevel;document.getElementById("eth-mhr-cost").innerHTML=`$${formatNumberForDisplay(e)}`,document.getElementById("eth-mhr-multi").innerHTML=`${a.toFixed(1)}x`,n?(t.style.setProperty("display","flex","important"),t.style.cursor="pointer",t.disabled=!1):(t.style.setProperty("display","none","important"),t.disabled=!0)}const n=document.getElementById("doge-manual-hash-rate-btn");if(n){const e=getManualHashRateCost(dogeManualHashRateLevel),t=dollarBalance>=e,a=1+.5*dogeManualHashRateLevel;document.getElementById("doge-mhr-cost").innerHTML=`$${formatNumberForDisplay(e)}`,document.getElementById("doge-mhr-multi").innerHTML=`${a.toFixed(1)}x`,t?(n.style.setProperty("display","flex","important"),n.style.cursor="pointer",n.disabled=!1):(n.style.setProperty("display","none","important"),n.disabled=!0)}}function buyEthLevel(e,t){const n=ethUpgrades[e],a=equipmentPowerReqs[n.id]||0;let o=0;for(let e=0;e<t;e++){const e=n.currentUsd;if(dollarBalance<e)break;if(a>0){if(totalPowerUsed+a>getTotalPowerAvailableWithBonus())break}dollarBalance-=e,hardwareEquity+=n.currentUsd,n.level++,0===n.id||n.isClickUpgrade?(ethClickValue*=1.12,n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level)),document.getElementById("eth-hash-value").innerText=`+${ethClickValue.toFixed(8)} Œû`):(n.currentYield=calculateMinerYield(n),n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level))),o++,calculateTotalPowerUsed()}if(o>0){const e="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;ethPerSec=ethUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+e),window.ethPerSec=ethPerSec,1===n.id&&"function"==typeof trackGPURigPurchase&&trackGPURigPurchase(),lastUIUpdateTime=0,updateUI(),saveGame(),playUpgradeSound()}}function buyDogeLevel(e,t){const n=dogeUpgrades[e],a=equipmentPowerReqs[n.id]||0;let o=0;for(let e=0;e<t;e++){const e=n.currentUsd;if(dollarBalance<e)break;if(a>0){if(totalPowerUsed+a>getTotalPowerAvailableWithBonus())break}dollarBalance-=e,hardwareEquity+=n.currentUsd,n.level++,0===n.id||n.isClickUpgrade?(dogeClickValue*=1.12,n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level)),document.getElementById("doge-hash-value").innerText=`+${dogeClickValue.toFixed(8)} √ê`):(n.currentYield=calculateMinerYield(n),n.currentUsd=Math.floor(n.baseUsd*Math.pow(1.15,n.level))),o++,calculateTotalPowerUsed()}if(o>0){const e="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0;dogePerSec=dogeUpgrades.reduce((e,t)=>e+(t.currentYield||0),0)*(1+e),window.dogePerSec=dogePerSec,lastUIUpdateTime=0,updateUI(),saveGame(),playUpgradeSound(),1===n.id&&"function"==typeof trackScryptMinerPurchase&&trackScryptMinerPurchase()}}let hoveredMarkerIndex=-1;function updateChartDateTracker(e){const t=document.getElementById("chart-marker-tooltip"),n=document.getElementById("chart-date-tracker");if(hoveredMarkerIndex=-1,t&&(t.style.display="none"),n&&(n.textContent="--"),e&&nwChart&&chartMarkers.length>0){const a=document.getElementById("nwChart");if(!a)return;const o=a.getBoundingClientRect(),i=e.clientX-o.left,s=e.clientY-o.top;if(!Chart.helpers.getRelativePosition(e,nwChart))return;const l=nwChart.scales.x,r=nwChart.scales.y;for(let e=0;e<chartMarkers.length;e++){const a=chartMarkers[e],o=l.getPixelForValue(a.index),c=r.getPixelForValue(a.value);if(Math.sqrt((i-o)**2+(s-c)**2)<=15){hoveredMarkerIndex=e;const i={month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1},s=new Date(a.time).toLocaleDateString("en-US",i);let l="$0";a.value>=1e9?l="$"+(a.value/1e9).toFixed(1)+"B":a.value>=1e6?l="$"+(a.value/1e6).toFixed(1)+"M":a.value>=1e3?l="$"+(a.value/1e3).toFixed(1)+"k":a.value>0&&(l="$"+a.value.toFixed(2)),t&&(t.textContent=l,t.style.display="block",t.style.left=o-t.offsetWidth/2+"px",t.style.top=c-40+"px"),n&&(n.textContent=s);break}}}}function updateSessionStats(){const e=Date.now(),t=Math.floor((e-sessionStartTime)/1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60);let o="";n>0&&(o+=n+"h "),a>0&&(o+=a+"m "),o+=t%60+"s",document.getElementById("session-time").innerText=o;const i=document.getElementById("session-earning");i&&(i.innerText=formatCurrencyAbbreviated(sessionEarnings,1));const s=document.getElementById("lifetime-earning");if(s){const e=(window.rugpullState?.lifetimeEarningsDisplay||0)+lifetimeEarnings;s.innerText="$"+abbreviateNumber(e,3)}}function abbreviateNumber(e,t=3){if(e instanceof BigNumber){const n=e.toNumber();if(isFinite(n))return abbreviateNumber(n,t);for(let t=0;t<ABBREVIATIONS.length;t++){const n=Math.floor(Math.log10(ABBREVIATIONS[t].threshold));if(e.exponent===n){return e.mantissa.toFixed(2).replace(/\.?0+$/,"")+ABBREVIATIONS[t].suffix}}return e.mantissa.toFixed(2).replace(/\.?0+$/,"")+" √ó 10^"+e.exponent}if("string"==typeof e){if("‚àû"===e)return"‚àû";e=parseFloat(e)}if("number"!=typeof e||isNaN(e))return"0";const n=Math.abs(e);if(!isFinite(n))return"‚àû";for(let a=0;a<ABBREVIATIONS.length;a++)if(n>=ABBREVIATIONS[a].threshold){return(e/ABBREVIATIONS[a].threshold).toFixed(t).replace(/\.?0+$/,"")+String(ABBREVIATIONS[a].suffix||"")}return n>=1?e===Math.floor(e)?Math.floor(e).toString():e.toFixed(t).replace(/\.?0+$/,""):e.toFixed(t)}function formatNumberForDisplay(e){return abbreviateNumber(e,3)}function formatCryptoYield(e){const t=Math.abs(e);return t<1e3?e.toFixed(8):t>=1e30?(e/1e30).toFixed(2)+"N":t>=1e27?(e/1e27).toFixed(2)+"O":t>=1e24?(e/1e24).toFixed(2)+"Sep":t>=1e21?(e/1e21).toFixed(2)+"S":t>=1e18?(e/1e18).toFixed(2)+"Qa":t>=1e15?(e/1e15).toFixed(2)+"Q":t>=1e12?(e/1e12).toFixed(2)+"T":t>=1e9?(e/1e9).toFixed(2)+"B":t>=1e6?(e/1e6).toFixed(2)+"M":t>=1e3?(e/1e3).toFixed(2)+"K":e.toFixed(8)}function formatLevelTag(e){return 0===e?"[0]":e>=1e3?"["+abbreviateNumber(e,1)+"]":"["+e+"]"}function formatCryptoPrice(e){const t=Math.abs(e);return t<1?e.toFixed(8):t>=1e30?(e/1e30).toFixed(1)+"N":t>=1e27?(e/1e27).toFixed(1)+"O":t>=1e24?(e/1e24).toFixed(1)+"Sep":t>=1e21?(e/1e21).toFixed(1)+"S":t>=1e18?(e/1e18).toFixed(1)+"Qa":t>=1e15?(e/1e15).toFixed(1)+"Q":t>=1e12?(e/1e12).toFixed(1)+"T":t>=1e9?(e/1e9).toFixed(1)+"B":t>=1e6?(e/1e6).toFixed(1)+"M":t>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(1)}function formatCurrencyAbbreviated(e,t=1){const n=Math.abs(e);for(let a=0;a<ABBREVIATIONS.length;a++)if(n>=ABBREVIATIONS[a].threshold)return"$"+(e/ABBREVIATIONS[a].threshold).toFixed(t)+ABBREVIATIONS[a].suffix;return n<1e3?"$"+e.toFixed(2):"$"+Math.floor(e).toLocaleString()}function formatCryptoAmount(e,t=8){const n=Math.abs(e);if(n<1)return e.toFixed(t);for(let t=0;t<ABBREVIATIONS.length;t++)if(n>=ABBREVIATIONS[t].threshold)return(e/ABBREVIATIONS[t].threshold).toFixed(2)+ABBREVIATIONS[t].suffix;return e.toFixed(2)}function formatPower(e){return e>=1e3?abbreviateNumber(e,2)+"W":e.toFixed(2)+"W"}function initBars(){const e=document.getElementById("btc-bar"),t=document.getElementById("eth-bar"),n=document.getElementById("doge-bar");return e&&t&&n?(updateCryptoBars(),!0):(console.warn("Crypto bar elements not found"),!1)}function updateCryptoBars(){const e=btcBalance*btcPrice,t=ethBalance*ethPrice,n=dogeBalance*dogePrice,a=e+t+n;let o=0,i=0,s=0;a>0&&(o=e/a*100,i=t/a*100,s=n/a*100);const l=document.getElementById("btc-bar"),r=document.getElementById("eth-bar"),c=document.getElementById("doge-bar");l&&(l.style.width=o+"%"),r&&(r.style.width=i+"%"),c&&(c.style.width=s+"%"),document.getElementById("btc-bar-percent").textContent=o.toFixed(1)+"%",document.getElementById("eth-bar-percent").textContent=i.toFixed(1)+"%",document.getElementById("doge-bar-percent").textContent=s.toFixed(1)+"%"}function updateHashrateBars(){const e=btcPerSec*totalMiningMultiplier,t=ethPerSec*totalMiningMultiplier,n=dogePerSec*totalMiningMultiplier,a=e*btcPrice,o=t*ethPrice,i=n*dogePrice,s=a+o+i;let l=0,r=0,c=0;s>0&&(l=a/s*100,r=o/s*100,c=i/s*100);const d=document.getElementById("btc-hashrate-bar"),u=document.getElementById("eth-hashrate-bar"),h=document.getElementById("doge-hashrate-bar");d&&(d.style.width=l+"%"),u&&(u.style.width=r+"%"),h&&(h.style.width=c+"%");const m=document.getElementById("btc-hashrate-percent"),g=document.getElementById("eth-hashrate-percent"),p=document.getElementById("doge-hashrate-percent");m&&(m.textContent=formatCurrencyAbbreviated(a)+"/sec"),g&&(g.textContent=formatCurrencyAbbreviated(o)+"/sec"),p&&(p.textContent=formatCurrencyAbbreviated(i)+"/sec")}function updateRugpullProgressDisplay(){let e=0;"undefined"!=typeof lifetimeEarningsThisRugpull?e=lifetimeEarningsThisRugpull:void 0!==window.lifetimeEarningsThisRugpull&&(e=window.lifetimeEarningsThisRugpull);const t=("undefined"!=typeof ascensionLevel?ascensionLevel:0)+1,n=1e6*Math.pow(t,3),a=e=>e>=1e9?"$"+(e/1e9).toFixed(1)+"B":e>=1e6?"$"+(e/1e6).toFixed(1)+"M":e>=1e3?"$"+(e/1e3).toFixed(1)+"K":"$"+Math.floor(e).toLocaleString(),o=a(e)+" / "+a(n),i=Math.min(100,e/n*100);[document.getElementById("rugpull-progress-text"),document.getElementById("rugpull-progress-text-mobile"),document.getElementById("rugpull-progress-text-desktop")].forEach(e=>{e&&(e.textContent=o)});[document.getElementById("rugpull-progress-fill-mobile"),document.getElementById("rugpull-progress-fill-desktop")].forEach(e=>{e&&(e.style.width=i+"%")})}function updateUI(){const e=Date.now();if(e-lastUIUpdateTime<150)return;lastUIUpdateTime=e;try{updateGlobalMultiplierButtons(),updateManualHashRateButtons()}catch(e){console.error("Error updating global multiplier buttons:",e)}if(e-lastShopReinitTime>=100)try{updateDoublingButtons(),lastShopReinitTime=e}catch(e){console.error("Error updating doubling buttons:",e)}const t=sessionEarnings-lastSyncedSessionEarnings;t>0&&"function"==typeof window.rugpullAddEarnings&&(window.rugpullAddEarnings(t),lastSyncedSessionEarnings=sessionEarnings),e-lastAscensionUIUpdateTime>=1e4&&(lastAscensionUIUpdateTime=e,"function"==typeof window.updateAscensionUI?window.updateAscensionUI():updateRugpullProgressDisplay()),e-lastAchievementCheckTime>=1e3&&(lastAchievementCheckTime=e,"function"==typeof checkAchievements&&checkAchievements(totalPowerUsed));let n=btcBalance*btcPrice+ethBalance*ethPrice+dogeBalance*dogePrice;if(window.innerWidth<=768&&n>=1e3||n>1e8){const e=abbreviateNumber(n,3);document.getElementById("nw-val").innerText="$"+e}else document.getElementById("nw-val").innerText="$"+n.toLocaleString(void 0,{minimumFractionDigits:2});if(document.getElementById("nw-breakdown")){const e=formatCryptoAmount(btcBalance,8),t=formatCryptoAmount(ethBalance,8),n=formatCryptoAmount(dogeBalance,8);document.getElementById("nw-btc").innerText=e,document.getElementById("nw-eth").innerText=t,document.getElementById("nw-doge").innerText=n;const a=document.querySelector(".btc-amount"),o=document.querySelector(".eth-amount"),i=document.querySelector(".doge-amount");a&&(a.innerText=e),o&&(o.innerText=t),i&&(i.innerText=n)}const a=(e,t=8)=>e>=1e3?abbreviateNumber(e,2):e.toFixed(t);document.getElementById("bal-btc")&&(document.getElementById("bal-btc").innerText=a(btcBalance)),document.getElementById("bal-eth")&&(document.getElementById("bal-eth").innerText=a(ethBalance)),document.getElementById("bal-doge")&&(document.getElementById("bal-doge").innerText=a(dogeBalance)),updateCryptoBars(),updateHashrateBars();const o="undefined"!=typeof ascensionLevel&&ascensionLevel>0?1+.01*ascensionLevel:1,i=1+("function"==typeof getSkillBonus?getSkillBonus("click_speed"):0);let s=0;"undefined"!=typeof metaUpgrades&&Object.entries(metaUpgrades).forEach(([e,t])=>{if(t.purchased&&e.includes("click_hashrate")){const t=parseInt(e.match(/\d+$/)[0]);s+=.5*Math.pow(1.15,t-1)}});const l=document.getElementById("btc-hash-value");if(l){const e=btcClickValue*i*o+btcPerSec*(s/100);l.innerText=`+${e.toFixed(8)} ‚Çø`}const r=document.getElementById("eth-hash-value");if(r){const e=ethClickValue*i*o+ethPerSec*(s/100);r.innerText=`+${e.toFixed(8)} Œû`}const c=document.getElementById("doge-hash-value");if(c){const e=dogeClickValue*i*o+dogePerSec*(s/100);c.innerText=`+${e.toFixed(8)} √ê`}document.getElementById("asset-usd").innerText=formatCurrencyAbbreviated(hardwareEquity,1);const d=e=>e>=1e3?abbreviateNumber(e,2)+"/s":e.toFixed(8)+"/s",u="function"==typeof getSkillBonus?1+getSkillBonus("mining_speed"):1,h=getHackingSpeedBoost(),m=u*h;window.totalMiningMultiplier=m,window.btcPrice=btcPrice,window.ethPrice=ethPrice,window.dogePrice=dogePrice;const g=h>1;if(vfxEnabled&&"function"==typeof updateCoinRain){updateCoinRain(btcPerSec*m*btcPrice,ethPerSec*m*ethPrice,dogePerSec*m*dogePrice)}else vfxEnabled||"function"!=typeof updateCoinRain||updateCoinRain(0,0,0);const p=document.getElementById("yield-btc"),f=document.getElementById("yield-eth"),y=document.getElementById("yield-doge");p&&(p.innerText=d(btcPerSec*m),g?(p.style.color="#00ff88",p.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",p.style.fontWeight="bold"):(p.style.color="",p.style.textShadow="",p.style.fontWeight="")),f&&(f.innerText=d(ethPerSec*m),g?(f.style.color="#00ff88",f.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",f.style.fontWeight="bold"):(f.style.color="",f.style.textShadow="",f.style.fontWeight="")),y&&(y.innerText=d(dogePerSec*m),g?(y.style.color="#00ff88",y.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",y.style.fontWeight="bold"):(y.style.color="",y.style.textShadow="",y.style.fontWeight=""));const w=document.getElementById("yield-btc-display"),b=document.getElementById("yield-eth-display"),k=document.getElementById("yield-doge-display");w&&(w.innerText=d(btcPerSec*m),g?(w.style.color="#00ff88",w.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",w.style.fontWeight="bold"):(w.style.color="",w.style.textShadow="",w.style.fontWeight="")),b&&(b.innerText=d(ethPerSec*m),g?(b.style.color="#00ff88",b.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",b.style.fontWeight="bold"):(b.style.color="",b.style.textShadow="",b.style.fontWeight="")),k&&(k.innerText=d(dogePerSec*m),g?(k.style.color="#00ff88",k.style.textShadow="0 0 10px #00ff88, 0 0 20px #00ff88",k.style.fontWeight="bold"):(k.style.color="",k.style.textShadow="",k.style.fontWeight="")),document.getElementById("btc-price").innerText="$"+formatCryptoPrice(btcPrice),document.getElementById("eth-price").innerText="$"+formatCryptoPrice(ethPrice),document.getElementById("doge-price").innerText="$"+formatCryptoPrice(dogePrice);let C=dollarBalance;"number"==typeof dollarBalance&&!isFinite(dollarBalance)&&dollarBalance>0?C=new BigNumber(1,500):"number"!=typeof dollarBalance||isFinite(dollarBalance)||(C="‚àû");const E="$"+abbreviateNumber(C,2),v=document.getElementById("dollar-balance");v&&(v.innerText=E);const x=document.getElementById("dollar-balance-btc");x&&(x.innerText=E);const B=document.getElementById("dollar-balance-eth");B&&(B.innerText=E);const M=document.getElementById("dollar-balance-doge");M&&(M.innerText=E);const S=document.getElementById("dollar-balance-power");S&&(S.innerText=E);const T=document.getElementById("dollar-balance-exchange");T&&(T.innerText=E);const I=document.getElementById("market-btc-price"),P=document.getElementById("market-eth-price"),H=document.getElementById("market-doge-price");I&&(I.innerText=formatCryptoPrice(btcPrice)),P&&(P.innerText=formatCryptoPrice(ethPrice)),H&&(H.innerText=formatCryptoPrice(dogePrice)),updateSessionStats(),calculateTotalPowerUsed(),updatePowerDisplay();const R=document.getElementById("hacking-tab-btn");R&&(lifetimeEarnings<1e4?(R.style.opacity="0.5",R.style.cursor="not-allowed",R.innerHTML=`üîí HACKING<br><span style="font-size: 0.6rem;">($${lifetimeEarnings.toFixed(0)}/$10,000)</span>`,R.onclick=function(e){e.preventDefault(),alert(`üîí Hacking Feature Locked!\n\nRequires $10,000 lifetime earnings to unlock.\n\nCurrent: $${lifetimeEarnings.toFixed(2)}`)}):(R.style.opacity="1",R.style.cursor="pointer",R.textContent="HACKING",R.onclick=function(){switchTab("hacking")}));const U="undefined"!=typeof metaUpgrades&&metaUpgrades.minigame_unlock&&metaUpgrades.minigame_unlock.purchased,L=document.getElementById("hacking-easy-btn"),D=document.getElementById("hacking-medium-btn"),G=document.getElementById("hacking-hard-btn");if(L&&(!U&&lifetimeEarnings<1e4?(L.style.opacity="0.5",L.style.cursor="not-allowed"):(L.style.opacity="1",L.style.cursor="pointer")),D)if(!U&&lifetimeEarnings<5e4){D.style.opacity="0.5",D.style.cursor="not-allowed";const e=lifetimeEarnings>=1e3?"$"+(lifetimeEarnings/1e3).toFixed(1)+"K":"$"+lifetimeEarnings.toFixed(0);D.innerHTML=`<div style="margin-bottom: 5px;">üîí MEDIUM</div>\n                    <div style="font-size: 0.65rem; font-weight: 400;">${e}/$50K</div>`}else D.style.opacity="1",D.style.cursor="pointer",D.innerHTML='<div style="margin-bottom: 5px;">MEDIUM</div>\n                    <div style="font-size: 0.7rem; font-weight: 400;">4 bugs | 20s | 8 lives</div>\n                    <div style="font-size: 0.65rem; margin-top: 5px;">+25% speed for 2min</div>';if(G)if(!U&&lifetimeEarnings<1e5){G.style.opacity="0.5",G.style.cursor="not-allowed";const e=lifetimeEarnings>=1e3?"$"+(lifetimeEarnings/1e3).toFixed(1)+"K":"$"+lifetimeEarnings.toFixed(0);G.innerHTML=`<div style="margin-bottom: 5px;">üîí HARD</div>\n                    <div style="font-size: 0.65rem; font-weight: 400;">${e}/$100K</div>`}else G.style.opacity="1",G.style.cursor="pointer",G.innerHTML='<div style="margin-bottom: 5px;">HARD</div>\n                    <div style="font-size: 0.7rem; font-weight: 400;">5 bugs | 12s | 10 lives</div>\n                    <div style="font-size: 0.65rem; margin-top: 5px;">+50% speed for 2min</div>';btcUpgrades.forEach(e=>{const t=e.currentUsd,n=document.querySelector(`#up-${e.id} > div:first-child > div:first-child`);if(n){const t=formatLevelTag(e.level);n.innerHTML=n.innerHTML.replace(/\s*<span style="color:#888;font-size:0\.85rem">\[.*?\]<\/span>/g,"")+` <span style="color:#888;font-size:0.85rem">${t}</span>`}const a=document.getElementById(`yield-${e.id}`);if(a)if(e.isClickUpgrade)a.innerText="+10% MANUAL HASH RATE";else{const t="function"==typeof getSkillBonus?getSkillBonus("btc_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,o="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield*e.level,s=Math.pow(2,btcMultiplierLevel),l=i*(1+n+t+o)*e.doubleMultiplier*s;a.innerText=`+${formatCryptoYield(l)} ‚Çø/s - Current Speed`}const o=document.getElementById(`increase-${e.id}`);if(o)if(e.isClickUpgrade)o.style.display="none";else{const t="function"==typeof getSkillBonus?getSkillBonus("btc_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,a="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield,s=Math.pow(2,btcMultiplierLevel),l=i*(1+n+t+a)*e.doubleMultiplier*s;o.innerText=`+${formatCryptoYield(l)} ‚Çø/s per level`,o.style.display="block"}const i=document.getElementById(`usd-${e.id}`);if(i){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;i.innerText=`$${formatNumberForDisplay(Math.floor(t))}`}const s=document.getElementById(`power-${e.id}`);if(s){const t=equipmentPowerReqs[e.id]||0;if(t>0){const e=getEffectivePowerRequirement(t);s.innerText=`${formatPower(e)} Consumed per level`}}const l=document.getElementById(`afford-${e.id}`);if(l){let n=dollarBalance,a=0,o=t,i=e.level;for(;n>=o;)n-=o,a++,i++,o=(e.isClickUpgrade,e.baseUsd*Math.pow(1.15,i));l.innerText=`x${a}`,l.style.color=a>0?"#00ff88":"#666"}const r=document.getElementById(`up-${e.id}`);if(r){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;const a=dollarBalance>=t,o=equipmentPowerReqs[e.id]||0,i=totalPowerUsed+o*buyQuantity,s=getTotalPowerAvailableWithBonus(),l=i<=s||0===o,c=!(a&&l);if(r.disabled=c,c?(r.style.opacity="0.2",r.style.cursor="not-allowed"):(r.style.opacity="1",r.style.cursor="pointer"),"absolute"!==r.style.position&&"fixed"!==r.style.position&&(r.style.position="relative"),!a&&!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more cash AND ${Math.ceil(i-s).toLocaleString()}W more power`}else if(a)if(!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE POWER":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE POWER",r.appendChild(e)),r.title=`Insufficient power! This requires ${o.toLocaleString()}W per level. Need ${Math.ceil(i-s).toLocaleString()}W more power capacity.`}else{let e=r.querySelector(".power-overlay");e&&e.remove(),r.title=""}else{let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more`}}const c=document.getElementById(`doubling-cost-${e.id}`);if(c){const t=calculateMilestoneDoublingCost(e);c.innerText=`$${Math.floor(t).toLocaleString()}`}const d=document.getElementById(`doubling-${e.id}`);if(d){const t=calculateMilestoneDoublingCost(e),n=dollarBalance>=t;d.style.opacity=n?"1":"0.6"}}),ethUpgrades.forEach(e=>{const t=e.currentUsd,n=document.querySelector(`#eth-up-${e.id} > div:first-child > div:first-child`);if(n){const t=formatLevelTag(e.level);n.innerHTML=n.innerHTML.replace(/\s*<span style="color:#888;font-size:0\.85rem">\[.*?\]<\/span>/g,"")+` <span style="color:#888;font-size:0.85rem">${t}</span>`}const a=document.getElementById(`eth-yield-${e.id}`);if(a)if(e.isClickUpgrade)a.innerText="+10% MANUAL ETH RATE";else{const t="function"==typeof getSkillBonus?getSkillBonus("eth_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,o="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield*e.level,s=Math.pow(2,ethMultiplierLevel),l=i*(1+n+t+o)*e.doubleMultiplier*s;a.innerText=`+${formatCryptoYield(l)} Œû/s - Current Speed`}const o=document.getElementById(`eth-increase-${e.id}`);if(o)if(e.isClickUpgrade)o.style.display="none";else{const t="function"==typeof getSkillBonus?getSkillBonus("eth_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,a="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield,s=Math.pow(2,ethMultiplierLevel),l=i*(1+n+t+a)*e.doubleMultiplier*s;o.innerText=`+${formatCryptoYield(l)} Œû/s per level`,o.style.display="block"}const i=document.getElementById(`eth-usd-${e.id}`);if(i){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;i.innerText=`$${formatNumberForDisplay(Math.floor(t))}`}const s=document.getElementById(`eth-power-${e.id}`);if(s){const t=equipmentPowerReqs[e.id]||0;if(t>0){const e=getEffectivePowerRequirement(t);s.innerText=`${formatPower(e)} Consumed per level`}}const l=document.getElementById(`eth-afford-${e.id}`);if(l){let n=dollarBalance,a=0,o=t,i=e.level;for(;n>=o;)n-=o,a++,i++,o=(e.isClickUpgrade,e.baseUsd*Math.pow(1.15,i));l.innerText=`x${a}`,l.style.color=a>0?"#00ff88":"#666"}const r=document.getElementById(`eth-up-${e.id}`);if(r){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;const a=dollarBalance>=t,o=equipmentPowerReqs[e.id]||0,i=totalPowerUsed+o*buyQuantity,s=getTotalPowerAvailableWithBonus(),l=i<=s||0===o,c=!(a&&l);if(r.disabled=c,c?(r.style.opacity="0.2",r.style.cursor="not-allowed"):(r.style.opacity="1",r.style.cursor="pointer"),"absolute"!==r.style.position&&"fixed"!==r.style.position&&(r.style.position="relative"),!a&&!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more cash AND ${Math.ceil(i-s).toLocaleString()}W more power`}else if(a)if(!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE POWER":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE POWER",r.appendChild(e)),r.title=`Insufficient power! This requires ${o.toLocaleString()}W per level. Need ${Math.ceil(i-s).toLocaleString()}W more power capacity.`}else{let e=r.querySelector(".power-overlay");e&&e.remove(),r.title=""}else{let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more`}}const c=document.getElementById(`eth-doubling-cost-${e.id}`);if(c){const t=calculateMilestoneDoublingCost(e);c.innerText=`$${Math.floor(t).toLocaleString()}`}const d=document.getElementById(`eth-doubling-${e.id}`);if(d){const t=calculateMilestoneDoublingCost(e);d.disabled=dollarBalance<t}}),dogeUpgrades.forEach(e=>{const t=e.currentUsd,n=document.querySelector(`#doge-up-${e.id} > div:first-child > div:first-child`);if(n){const t=formatLevelTag(e.level);n.innerHTML=n.innerHTML.replace(/\s*<span style="color:#888;font-size:0\.85rem">\[.*?\]<\/span>/g,"")+` <span style="color:#888;font-size:0.85rem">${t}</span>`}const a=document.getElementById(`doge-yield-${e.id}`);if(a)if(e.isClickUpgrade)a.innerText="+10% MANUAL DOGE RATE";else{const t="function"==typeof getSkillBonus?getSkillBonus("doge_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,o="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield*e.level,s=Math.pow(2,dogeMultiplierLevel),l=i*(1+n+t+o)*e.doubleMultiplier*s;a.innerText=`+${formatCryptoYield(l)} √ê/s - Current Speed`}const o=document.getElementById(`doge-increase-${e.id}`);if(o)if(e.isClickUpgrade)o.style.display="none";else{const t="function"==typeof getSkillBonus?getSkillBonus("doge_mining_speed"):0,n="function"==typeof getSkillBonus?getSkillBonus("mining_speed"):0,a="function"==typeof getAscensionMiningBonus?getAscensionMiningBonus():0,i=e.baseYield,s=Math.pow(2,dogeMultiplierLevel),l=i*(1+n+t+a)*e.doubleMultiplier*s;o.innerText=`+${formatCryptoYield(l)} √ê/s per level`,o.style.display="block"}const i=document.getElementById(`doge-usd-${e.id}`);if(i){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;i.innerText=`$${formatNumberForDisplay(Math.floor(t))}`}const s=document.getElementById(`doge-power-${e.id}`);if(s){const t=equipmentPowerReqs[e.id]||0;if(t>0){const e=getEffectivePowerRequirement(t);s.innerText=`${formatPower(e)} Consumed per level`}}const l=document.getElementById(`doge-afford-${e.id}`);if(l){let n=dollarBalance,a=0,o=t,i=e.level;for(;n>=o;)n-=o,a++,i++,o=(e.isClickUpgrade,e.baseUsd*Math.pow(1.15,i));l.innerText=`x${a}`,l.style.color=a>0?"#00ff88":"#666"}const r=document.getElementById(`doge-up-${e.id}`);if(r){let t=0,n=e.level;for(let a=0;a<buyQuantity;a++)e.isClickUpgrade,t+=e.baseUsd*Math.pow(1.15,n),n++;const a=dollarBalance>=t,o=equipmentPowerReqs[e.id]||0,i=totalPowerUsed+o*buyQuantity,s=getTotalPowerAvailableWithBonus(),l=i<=s||0===o,c=!(a&&l);if(r.disabled=c,c?(r.style.opacity="0.2",r.style.cursor="not-allowed"):(r.style.opacity="1",r.style.cursor="pointer"),"absolute"!==r.style.position&&"fixed"!==r.style.position&&(r.style.position="relative"),!a&&!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more cash AND ${Math.ceil(i-s).toLocaleString()}W more power`}else if(a)if(!l&&o>0){let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE POWER":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE POWER",r.appendChild(e)),r.title=`Insufficient power! This requires ${o.toLocaleString()}W per level. Need ${Math.ceil(i-s).toLocaleString()}W more power capacity.`}else{let e=r.querySelector(".power-overlay");e&&e.remove(),r.title=""}else{let e=r.querySelector(".power-overlay");e?e.innerHTML="YOU NEED MORE CASH":(e=document.createElement("div"),e.className="power-overlay",e.style.position="absolute",e.style.inset="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.5)",e.style.borderRadius="10px",e.style.color="#999",e.style.fontWeight="bold",e.style.fontSize="1.1rem",e.style.textAlign="center",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML="YOU NEED MORE CASH",r.appendChild(e)),r.title=`Need $${(t-dollarBalance).toLocaleString()} more`}}const c=document.getElementById(`doge-doubling-cost-${e.id}`);if(c){const t=calculateMilestoneDoublingCost(e);c.innerText=`$${Math.floor(t).toLocaleString()}`}const d=document.getElementById(`doge-doubling-${e.id}`);if(d){const t=calculateMilestoneDoublingCost(e);d.disabled=dollarBalance<t}}),"function"==typeof window.updateStakingUI&&window.updateStakingUI(),"function"==typeof window.updateAscensionUI&&window.updateAscensionUI(),"function"==typeof window.updateStoreButtonVisibility&&window.updateStoreButtonVisibility()}function initializeGame(){document.body.style.overflow="auto",document.body.style.position="static";try{localStorage.setItem("test","test"),localStorage.removeItem("test"),console.log("localStorage is available and working")}catch(e){console.error("localStorage is NOT available:",e),alert("WARNING: Browser storage is disabled! Your game progress will not be saved. Please enable cookies/storage in your browser settings.")}try{initBtcShop(),initEthShop(),initDogeShop(),initPowerShop()}catch(e){console.error("Error initializing shops:",e)}"function"==typeof initAchievements&&(initAchievements(),console.log("‚úì Achievements system initialized")),loadGame(),updateAutoClickerButtonState(),setBuyQuantity(1),updateAutoSellButtonUI(),initStaking(),updateStakingUI(),"function"==typeof initTutorial&&(initTutorial(),console.log("üéì Tutorial system initialized")),0===hackingNextNotificationTime&&(scheduleHackingNotification(),console.log("‚ö° Hacking minigame notification scheduled")),["EASY","MEDIUM","HARD"].forEach(e=>{const t=document.getElementById(`hacking-${e.toLowerCase()}-btn`);if(t){const n=hackingCooldowns[e]||0;t.dataset.onCooldown=Date.now()<n?"true":"false",t.style.filter=Date.now()<n?"brightness(0.5)":""}const n=document.getElementById(`whack-${e.toLowerCase()}-btn`);if(n){const t=whackCooldowns[e]||0;n.dataset.onCooldown=Date.now()<t?"true":"false",n.style.filter=Date.now()<t?"brightness(0.5)":""}}),updateHackingStats(),updateWhackStats(),updateNetworkStats(),updateMinigamesTab();const e=document.querySelectorAll("#manual-hash-btc-btn"),t=document.querySelectorAll("#manual-hash-eth-btn"),n=document.querySelectorAll("#manual-hash-doge-btn"),a=(e,t,n)=>{e.forEach(e=>{let a=!1,o=null;const i=()=>{o&&clearTimeout(o),e.classList.remove("active"),e.offsetWidth,e.classList.add("active"),o=setTimeout(()=>{e.classList.remove("active"),o=null},150)};e.addEventListener("touchstart",()=>{a=!0,i(),n(),t()}),e.addEventListener("click",()=>{a||(i(),n(),t()),a=!1})})};a(e,manualHash,trackManualHashClick),a(t,manualEthHash,trackManualHashClick),a(n,manualDogeHash,trackManualHashClick);[{id:"btc-manual-hash-rate-btn",name:"BTC"},{id:"eth-manual-hash-rate-btn",name:"ETH"},{id:"doge-manual-hash-rate-btn",name:"DOGE"}].forEach(e=>{const t=document.getElementById(e.id);if(t){let e=null;t.addEventListener("touchstart",n=>{e&&clearTimeout(e),t.classList.add("button-pressed"),e=setTimeout(()=>{t.classList.remove("button-pressed"),e=null},200)}),t.addEventListener("touchend",n=>{e&&(clearTimeout(e),e=setTimeout(()=>{t.classList.remove("button-pressed"),e=null},50))})}});['button[onclick*="Sell"]','button[onclick*="Stake"]','button[onclick*="quickUnstake"]'].forEach(e=>{document.querySelectorAll(e).forEach(e=>{let t=null;e.addEventListener("touchstart",n=>{t&&clearTimeout(t),e.classList.remove("active"),e.offsetWidth,e.classList.add("active"),t=setTimeout(()=>{e.classList.remove("active"),t=null},150)}),e.addEventListener("click",n=>{t&&clearTimeout(t),e.classList.remove("active"),e.offsetWidth,e.classList.add("active"),t=setTimeout(()=>{e.classList.remove("active"),t=null},150)},!0)})});["network-play-btn","packet-play-btn","whack-play-btn","packet-easy-btn","packet-medium-btn","packet-hard-btn","whack-easy-btn","whack-medium-btn","whack-hard-btn"].forEach(e=>{const t=document.getElementById(e);if(t){let e=null;t.addEventListener("touchstart",n=>{e&&clearTimeout(e),t.classList.remove("active"),t.offsetWidth,t.classList.add("active"),e=setTimeout(()=>{t.classList.remove("active"),e=null},150)}),t.addEventListener("click",n=>{e&&clearTimeout(e),t.classList.remove("active"),t.offsetWidth,t.classList.add("active"),e=setTimeout(()=>{t.classList.remove("active"),e=null},150)},!0)}});[{id:"btc-global-multiplier-btn",name:"BTC"},{id:"eth-global-multiplier-btn",name:"ETH"},{id:"doge-global-multiplier-btn",name:"DOGE"}].forEach(e=>{const t=document.getElementById(e.id);if(t){let e=null;t.addEventListener("touchstart",n=>{e&&clearTimeout(e),t.classList.add("button-pressed"),e=setTimeout(()=>{t.classList.remove("button-pressed"),e=null},200)}),t.addEventListener("touchend",n=>{e&&(clearTimeout(e),e=setTimeout(()=>{t.classList.remove("button-pressed"),e=null},50))})}});const o="true"===localStorage.getItem("tutorialCompleted"),i=!localStorage.getItem("gameStarted"),s="undefined"!=typeof tutorialData&&!tutorialData.completed;if(!i&&!s&&!o&&"true"!==localStorage.getItem("instructionsDismissed")){if(!("undefined"!=typeof ascensionLevel&&ascensionLevel>0)){const e=document.getElementById("game-instructions");e&&(e.style.display="flex")}}console.log("=== MODAL CHECK ==="),console.log("window.offlineEarningsToShow:",window.offlineEarningsToShow),console.log("Type:",typeof window.offlineEarningsToShow),window.offlineEarningsToShow?(console.log("‚úì SHOWING OFFLINE EARNINGS MODAL"),console.log("Data:",window.offlineEarningsToShow),setTimeout(()=>{console.log("Calling showOfflineEarningsModal function..."),showOfflineEarningsModal(window.offlineEarningsToShow.btc||0,window.offlineEarningsToShow.eth||0,window.offlineEarningsToShow.doge||0,window.offlineEarningsToShow.stakingCash||0,window.offlineEarningsToShow.corruptTokens||0,window.offlineEarningsToShow.seconds,window.offlineEarningsToShow.wasCapped||!1,window.offlineEarningsToShow.cappedSeconds||window.offlineEarningsToShow.seconds),window.offlineEarningsToShow=null,setTimeout(()=>{showBackupReminder()},6e5)},500)):(console.log("‚úó No offline earnings data - modal will not show"),setTimeout(()=>{showBackupReminder()},6e5));const l=document.getElementById("nwChart");if(console.log("Canvas element:",l),!l)return void console.error("ERROR: Canvas element not found!");let r=null,c=!1;const d=()=>{if(r=(()=>{const e=btcBalance*btcPrice+ethBalance*ethPrice+dogeBalance*dogePrice;if(console.log("=== CHART DEBUG ==="),console.log("btcBalance:",btcBalance,"btcPrice:",btcPrice),console.log("ethBalance:",ethBalance,"ethPrice:",ethPrice),console.log("dogeBalance:",dogeBalance,"dogePrice:",dogePrice),console.log("hardwareEquity:",hardwareEquity),console.log("Current net worth for chart:",e),0===chartHistory.length){const e=btcBalance*btcPrice,t=ethBalance*ethPrice,n=dogeBalance*dogePrice,a=e+t+n+dollarBalance;chartHistory.push(a),btcChartHistory.push(e),ethChartHistory.push(t),dogeChartHistory.push(n),cashChartHistory.push(dollarBalance),chartTimestamps.push({time:Date.now(),value:a,cash:dollarBalance,btc:btcBalance,eth:ethBalance,doge:dogeBalance})}if(console.log("Chart history length:",chartHistory.length,"Data:",chartHistory),"undefined"==typeof Chart)return console.error("ERROR: Chart.js library not loaded!"),document.querySelector(".chart-wrapper").innerHTML='<div style="color: #ff3344; padding: 20px; text-align: center; font-size: 0.8rem;">Chart.js failed to load<br>Check internet connection</div>',null;let t;console.log("Chart.js loaded");try{const e=document.getElementById("nwChart");return e?(t=new Chart(e,{type:"line",data:{labels:chartTimestamps.map(e=>new Date(e.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),datasets:[{label:"BTC",data:btcChartHistory,borderColor:"#f7931a",backgroundColor:"transparent",borderWidth:2.5,fill:!1,tension:0,spanGaps:!0,pointRadius:0,pointBackgroundColor:"#f7931a",pointBorderColor:"transparent",pointBorderWidth:0,pointHoverRadius:5,pointHoverBackgroundColor:"#f7931a",pointHoverBorderColor:"transparent",pointHoverBorderWidth:0},{label:"ETH",data:ethChartHistory,borderColor:"#627eea",backgroundColor:"transparent",borderWidth:2.5,fill:!1,tension:0,spanGaps:!0,pointRadius:0,pointBackgroundColor:"#627eea",pointBorderColor:"transparent",pointBorderWidth:0,pointHoverRadius:5,pointHoverBackgroundColor:"#627eea",pointHoverBorderColor:"transparent",pointHoverBorderWidth:0},{label:"DOGE",data:dogeChartHistory,borderColor:"#c2a633",backgroundColor:"transparent",borderWidth:2.5,fill:!1,tension:0,spanGaps:!0,pointRadius:0,pointBackgroundColor:"#c2a633",pointBorderColor:"transparent",pointBorderWidth:0,pointHoverRadius:5,pointHoverBackgroundColor:"#c2a633",pointHoverBorderColor:"transparent",pointHoverBorderWidth:0},{label:"CASH",data:cashChartHistory,borderColor:"#00ff88",backgroundColor:"transparent",borderWidth:2.5,fill:!1,tension:0,spanGaps:!0,pointRadius:0,pointBackgroundColor:"#00ff88",pointBorderColor:"transparent",pointBorderWidth:0,pointHoverRadius:5,pointHoverBackgroundColor:"#00ff88",pointHoverBorderColor:"transparent",pointHoverBorderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,align:"center",labels:{color:"#999",font:{size:window.innerWidth<=448?10:window.innerWidth<=932?12:16},boxWidth:14,boxHeight:12,padding:8},padding:{top:10,bottom:5}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#00ff88",bodyColor:"#ffffff",borderColor:"#00ff88",borderWidth:1,padding:10,displayColors:!0,callbacks:{title:function(e){if(e.length>0){const t=e[0].dataIndex;return chartTimestamps[t]?new Date(chartTimestamps[t].time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):""}return""},labelColor:function(e){return{borderColor:e.dataset.borderColor,backgroundColor:e.dataset.borderColor,borderWidth:0,borderRadius:0}},label:function(e){const t=parseFloat(e.parsed.y)||0;return e.dataset.label+": $"+abbreviateNumber(t,2)}}},decimation:{enabled:!0,algorithm:"lttb",samples:600}},scales:{x:{display:!0,grid:{display:!1,drawBorder:!1},ticks:{color:"transparent",font:{size:11},maxTicksLimit:6}},y:{display:!0,position:"left",min:0,max:(()=>{if(null!==userLockedChartMax)return userLockedChartMax;const e=[...btcChartHistory,...ethChartHistory,...dogeChartHistory,...cashChartHistory].filter(e=>null!=e);return e.length>0?Math.max(...e):100})(),grace:0,grid:{color:"rgba(255, 255, 255, 0.05)",drawBorder:!1},ticks:{color:"#999",font:{size:11},callback:function(e){return"$"+abbreviateNumber(e,1)}}}}}}),console.log("Chart object created:",t),console.log("Chart initialized with data:",chartHistory),t):(console.error("Canvas element not found"),null)}catch(e){return console.error("ERROR creating chart:",e),document.querySelector(".chart-wrapper").innerHTML='<div style="color: #ff3344; padding: 20px; text-align: center; font-size: 0.8rem;">Chart Error: '+e.message+"<br><small>Try refreshing the page</small></div>",null}})(),r){if(c=!0,console.log("Chart successfully initialized"),0===chartHistory.length){const e=Date.now(),t=btcBalance*btcPrice+ethBalance*ethPrice+dogeBalance*dogePrice+dollarBalance;chartHistory.push(t),btcChartHistory.push(btcBalance*btcPrice),ethChartHistory.push(ethBalance*ethPrice),dogeChartHistory.push(dogeBalance*dogePrice),cashChartHistory.push(dollarBalance),chartTimestamps.push({time:e,value:t,cash:dollarBalance,btc:btcBalance*btcPrice,eth:ethBalance*ethPrice,doge:dogeBalance*dogePrice}),chartStartTime=e,trimChartData(),console.log("Chart initialized with current data point")}updateChartDateTracker()}};window.innerWidth;setTimeout(()=>{d(),console.log("Initializing hash rate chart...");initializeHashRateChart()||(console.log("Hash rate chart init failed, will retry..."),setTimeout(()=>{console.log("Retrying hash rate chart initialization..."),initializeHashRateChart()},200)),console.log("Initializing crypto bars..."),initBars()&&console.log("Crypto bars successfully initialized"),c||(console.log("Chart init failed, retrying with delays..."),setTimeout(d,200),setTimeout(d,500),setTimeout(d,1e3),setTimeout(d,2e3),setTimeout(d,3e3))},100);let u;(()=>{const e=window.innerWidth>1200,t=document.getElementById("desktop-rugpull-section"),n=document.getElementById("mobile-rugpull-section");t&&n&&(t.style.display=e?"flex":"none",n.style.display=e?"none":"flex")})(),window.addEventListener("resize",()=>{clearTimeout(u),u=setTimeout(()=>{const e=window.innerWidth>1200,t=document.getElementById("desktop-rugpull-section"),n=document.getElementById("mobile-rugpull-section");t&&n&&(t.style.display=e?"flex":"none",n.style.display=e?"none":"flex"),r&&(console.log("Window resized, re-rendering net worth chart..."),r.resize()),e&&hashRateChartInstance?(console.log("Window resized to desktop, re-rendering hash rate chart..."),hashRateChartInstance.resize()):e&&!hashRateChartInstance&&(console.log("Window resized to desktop, initializing hash rate chart..."),initializeHashRateChart())},300)});const h=document.getElementById("y-axis-scale-slider"),m=document.getElementById("y-axis-scale-value");h&&(h.addEventListener("input",e=>{const t=parseFloat(e.target.value),n=[...btcChartHistory,...ethChartHistory,...dogeChartHistory,...cashChartHistory].filter(e=>null!=e),a=n.length>0?Math.max(...n):100,o=1-t/100,i=10*Math.pow(a/10,o);if(chartYAxisScaleMultiplier=t,userControllingZoom=!0,t<=10?(userHasSetZoom=!1,userLockedChartMax=null):(userHasSetZoom=!0,userLockedChartMax=i),t>0&&t<=10)m.innerText="FIXED";else{const e=Math.round(t);m.innerText=e+"%"}r&&(r.options.scales.y.max=t<=10?void 0:i,r.options.scales.y.min=0,r.update("none"))}),h.addEventListener("change",()=>{userControllingZoom=!1,r&&userHasSetZoom&&null!==userLockedChartMax&&(r.options.scales.y.min=0,r.options.scales.y.max=userLockedChartMax,r.update("none"))}));let g=0;Date.now();setInterval(()=>{if(!r)return void(c||d());const e=document.getElementById("chart-time-slider"),t=e?parseInt(e.value):100,n=Date.now(),a=btcBalance*btcPrice+ethBalance*ethPrice+dogeBalance*dogePrice;calculateTotalPowerUsed();cumulativePowerUsed+=totalPowerUsed*((n-lastHashRateChartUpdateTime)/1e3);const o=getTotalPowerAvailableWithBonus();o>maxPowerCapacity&&(maxPowerCapacity=o);const i=totalPowerUsed/o*100,s=i>50?"#ff3333":"#00ff88";lastHashRateChartUpdateTime=n,powerChartHistory.length>0&&hashRateChartTimestamps.length>0&&(powerChartHistory[powerChartHistory.length-1]=i,powerChartColors[powerChartColors.length-1]=s),n-lastMarkerTime>=6e4&&(chartMarkers.push({index:chartHistory.length-1,time:n,value:a}),lastMarkerTime=n,chartMarkers.length>50&&chartMarkers.splice(20,10));const l=0===chartHistory.length;chartHistory.push(a),btcChartHistory.push(btcBalance*btcPrice),ethChartHistory.push(ethBalance*ethPrice),dogeChartHistory.push(dogeBalance*dogePrice),cashChartHistory.push(dollarBalance),chartTimestamps.push({time:n,value:a,cash:dollarBalance,btc:btcBalance,eth:ethBalance,doge:dogeBalance}),hashRateChartHistory.push(btcPerSec*totalMiningMultiplier),ethHashRateChartHistory.push(ethPerSec*totalMiningMultiplier),dogeHashRateChartHistory.push(dogePerSec*totalMiningMultiplier);if((l||n-lastChartUpdateTime>=1e3)&&r&&chartTimestamps.length>0){lastChartUpdateTime=n;const e=chartTimestamps.map(e=>new Date(e.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}));if(r.data.labels=e,r.data.datasets[0].data=btcChartHistory,r.data.datasets[1].data=ethChartHistory,r.data.datasets[2].data=dogeChartHistory,r.data.datasets[3].data=cashChartHistory,r.update("none"),userHasSetZoom&&null!==userLockedChartMax&&(r.options.scales.y.min=0,r.options.scales.y.max=userLockedChartMax),!userControllingZoom&&(btcChartHistory.length>0||ethChartHistory.length>0||dogeChartHistory.length>0||cashChartHistory.length>0)){const e=btcChartHistory.length+ethChartHistory.length+dogeChartHistory.length+cashChartHistory.length;if(e!==lastCachedChartLength){lastCachedChartLength=e;let t=0;if(btcChartHistory.length>0)for(let e=0;e<btcChartHistory.length;e++)btcChartHistory[e]>t&&(t=btcChartHistory[e]);if(ethChartHistory.length>0)for(let e=0;e<ethChartHistory.length;e++)ethChartHistory[e]>t&&(t=ethChartHistory[e]);if(dogeChartHistory.length>0)for(let e=0;e<dogeChartHistory.length;e++)dogeChartHistory[e]>t&&(t=dogeChartHistory[e]);if(cashChartHistory.length>0)for(let e=0;e<cashChartHistory.length;e++)cashChartHistory[e]>t&&(t=cashChartHistory[e]);cachedChartMax=t}if(userHasSetZoom&&null!==userLockedChartMax);else if(!userHasSetZoom){let e;if(0===chartYAxisScaleMultiplier)e=cachedChartMax;else{e=cachedChartMax*(1+(10-chartYAxisScaleMultiplier)/100)}r.options.scales.y.min=0,r.options.scales.y.max=e}}r.update("none")}if(hashRateChartInstance&&hashRateChartHistory.length>0&&hashRateChartTimestamps.length>0){const e=Math.min(hashRateChartHistory.length,ethHashRateChartHistory.length,dogeHashRateChartHistory.length,hashRateChartTimestamps.length),n=Math.max(3,Math.ceil(e*(t/100))),a=Math.max(0,e-n),o=Math.max(3,e-a),i=hashRateChartHistory.slice(a,a+o).map(e=>e*btcPrice),s=ethHashRateChartHistory.slice(a,a+o).map(e=>e*ethPrice),l=dogeHashRateChartHistory.slice(a,a+o).map(e=>e*dogePrice),r=hashRateChartTimestamps.slice(a,a+o).map(e=>{const t=e?.time||Date.now();return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})});hashRateChartInstance.data.labels=r,hashRateChartInstance.data.datasets[0].data=i,hashRateChartInstance.data.datasets[1].data=s,hashRateChartInstance.data.datasets[2].data=l,hashRateChartInstance.update("none")}updateChartDateTracker(),updateUI(),g++,g%10==0&&console.log("Chart:",chartTimestamps.length,"points | BTC:",btcChartHistory.length,"ETH:",ethChartHistory.length,"DOGE:",dogeChartHistory.length,"CASH:",cashChartHistory.length)},1e3);const p=document.getElementById("nwChart");p&&(p.addEventListener("mousemove",e=>{updateChartDateTracker(e)}),p.addEventListener("mouseleave",()=>{hoveredMarkerIndex=-1,updateChartDateTracker()}));const f=document.getElementById("chart-time-label"),y=document.querySelectorAll(".chart-interval-btn");y.length>0&&y.forEach(e=>{e.addEventListener("click",e=>{const t=parseFloat(e.target.getAttribute("data-interval"));chartIntervalMinutes=t,y.forEach(e=>{e.style.background="rgba(100,100,100,0.2)",e.style.borderColor="#666",e.style.color="#999"}),e.target.style.background="rgba(0,255,136,0.2)",e.target.style.borderColor="#00ff88",e.target.style.color="#00ff88";f.textContent={.0167:"1s",.0833:"5s",.5:"30s",1:"1m",5:"5m",10:"10m",30:"30m",60:"1h",240:"4h",1440:"1d"}[t]+" interval",r&&r.update("none")})});document.getElementById("chart-time-slider");window.swapChartView=function(){if(window.innerWidth<=1200){const e=document.getElementById("nw-chart-container"),t=document.getElementById("hr-chart-container"),n=document.getElementById("swap-chart-btn");"networth"===currentChartView?(currentChartView="hashrate",e.style.cssText="display: none !important;",t.style.cssText="display: block !important;",n.textContent="SWAP CHARTS (NET WORTH)",setTimeout(()=>{hashRateChartInstance?hashRateChartInstance.resize():initializeHashRateChart()},50)):(currentChartView="networth",e.style.cssText="display: block !important;",t.style.cssText="display: none !important;",n.textContent="SWAP CHARTS",setTimeout(()=>{r&&r.resize()},50))}},window.initializeHashRateChart=function(){try{const e=document.getElementById("hashRateChart");if(!e)return console.warn("Hash rate chart canvas not found in DOM yet"),!1;const t=e.getContext("2d");if(!t)return console.warn("Could not get canvas context for hash rate chart"),!1;if(hashRateChartInstance&&hashRateChartInstance.destroy(),0===hashRateChartHistory.length)if(chartHistory.length>0&&chartTimestamps.length>0)for(let e=0;e<chartHistory.length;e++){hashRateChartHistory.push(btcPerSec*totalMiningMultiplier),ethHashRateChartHistory.push(ethPerSec*totalMiningMultiplier),dogeHashRateChartHistory.push(dogePerSec*totalMiningMultiplier);const t=getTotalPowerAvailableWithBonus(),n=t>0?totalPowerUsed/t*100:0;powerChartHistory.push(n);const a=n>50?"#ff3333":"#00ff88";powerChartColors.push(a),hashRateChartTimestamps.push(chartTimestamps[e])}else{hashRateChartHistory.push(btcPerSec*totalMiningMultiplier),ethHashRateChartHistory.push(ethPerSec*totalMiningMultiplier),dogeHashRateChartHistory.push(dogePerSec*totalMiningMultiplier);const e=getTotalPowerAvailableWithBonus(),t=e>0?totalPowerUsed/e*100:0;powerChartHistory.push(t);const n=t>50?"#ff3333":"#00ff88";powerChartColors.push(n),hashRateChartTimestamps.push({time:Date.now()})}const n=document.getElementById("chart-time-slider"),a=n?parseInt(n.value):100,o=Math.min(hashRateChartHistory.length,ethHashRateChartHistory.length,dogeHashRateChartHistory.length,hashRateChartTimestamps.length),i=Math.max(0,o-Math.max(1,Math.ceil(o*(a/100)))),s=Math.max(1,o-i),l=hashRateChartHistory.slice(i,i+s).map(e=>e*btcPrice),r=ethHashRateChartHistory.slice(i,i+s).map(e=>e*ethPrice),c=dogeHashRateChartHistory.slice(i,i+s).map(e=>e*dogePrice),d=hashRateChartTimestamps.slice(i,i+s).map(e=>{const t=e?.time||Date.now();return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})});return hashRateChartInstance=new Chart(t,{type:"line",data:{labels:d,datasets:[{label:"BTC",data:l,borderColor:"#f7931a",backgroundColor:"rgba(247, 147, 26, 0.1)",pointBackgroundColor:"#f7931a",pointBorderColor:"#f7931a",pointRadius:0,pointHoverRadius:0,yAxisID:"y",tension:0,fill:!1,borderWidth:2},{label:"ETH",data:r,borderColor:"#627eea",backgroundColor:"rgba(98, 126, 234, 0.1)",pointBackgroundColor:"#627eea",pointBorderColor:"#627eea",pointRadius:0,pointHoverRadius:0,yAxisID:"y",tension:0,fill:!1,borderWidth:2},{label:"DOGE",data:c,borderColor:"#c2a633",backgroundColor:"rgba(194, 166, 51, 0.1)",pointBackgroundColor:"#c2a633",pointBorderColor:"#c2a633",pointRadius:0,pointHoverRadius:0,yAxisID:"y",tension:0,fill:!1,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{legend:{display:!0,labels:{color:"#999",font:{size:window.innerWidth<=448?6:window.innerWidth<=932?8:12}}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#00ff88",bodyColor:"#ffffff",borderColor:"#00ff88",borderWidth:1,padding:10,displayColors:!0,callbacks:{title:function(e){if(e.length>0){const t=e[0].dataIndex;return hashRateChartTimestamps[t]?new Date(hashRateChartTimestamps[t].time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):""}return""},labelColor:function(e){return{borderColor:e.dataset.borderColor,backgroundColor:e.dataset.borderColor,borderWidth:0,borderRadius:0}},label:function(e){const t="$"+abbreviateNumber(parseFloat(e.parsed.y)||0,2);return e.dataset.label+": "+t}}}},scales:{x:{display:!0,grid:{display:!1,drawBorder:!1},ticks:{color:"#999",font:{size:11},maxTicksLimit:6}},y:{type:"linear",display:!0,position:"left",beginAtZero:!1,ticks:{color:"#999",font:{size:10},callback:function(e){return formatCurrencyAbbreviated(e,1)}},grid:{color:"rgba(255, 255, 255, 0.05)",drawBorder:!1},title:{display:!0,text:"USD Value per Second",color:"#999"}}}}}),console.log("‚úÖ Hash rate chart initialized successfully"),!0}catch(e){return console.error("Error creating hash rate chart:",e),!1}},window.initializePowerChart=function(){try{const e=document.getElementById("powerChart");if(!e)return console.warn("Power chart canvas not found in DOM yet"),!1;const t=e.getContext("2d");if(!t)return console.warn("Could not get canvas context for power chart"),!1;if(powerChartInstance&&powerChartInstance.destroy(),0===powerChartHistory.length){const e=getTotalPowerAvailableWithBonus(),t=totalPowerUsed/e*100,n=t>50?"#ff3333":"#00ff88",a=Math.max(hashRateChartTimestamps.length,10);for(let e=0;e<a;e++)powerChartHistory.push(t),powerChartColors.push(n)}if(0===powerChartHistory.length)return!1;let n=0,a=Math.max(powerChartHistory.length,1);if(hashRateChartInstance&&hashRateChartInstance.data.labels&&hashRateChartInstance.data.labels.length>0){const e=hashRateChartInstance.data.labels.length;n=Math.max(0,powerChartHistory.length-e),a=Math.min(e,powerChartHistory.length-n)}const o=powerChartHistory.slice(n,n+a);if(0===o.length)return!1;const i=o,s=[],l=hashRateChartTimestamps.slice(n,n+a);if(l.length>=a)for(let e=0;e<a;e++){const t=l[e],n=t?.time||Date.now();s.push(new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))}else for(let e=0;e<a;e++)s.push("");return console.log("üîã Creating power chart with data:",{labels:s.length,powerDataPercent:i.length,dataPoints:i.slice(0,5),startIndex:n,sliceLength:a,powerChartHistoryLength:powerChartHistory.length,hashRateTimestampsLength:hashRateChartTimestamps.length,totalPowerUsed:totalPowerUsed,availablePower:getTotalPowerAvailableWithBonus()}),powerChartInstance=new Chart(t,{type:"line",data:{labels:s,datasets:[{label:"Power Usage",data:i,borderColor:"#00ff88",backgroundColor:"rgba(0, 0, 0, 0)",pointRadius:0,pointHoverRadius:5,borderWidth:2,fill:!1,stepped:"middle",spanGaps:!0,segment:{borderColor:function(e){const t=e.p0DataIndex,n=e.p1DataIndex;if(e.dataset&&e.dataset.data&&void 0!==t&&void 0!==n){const a=e.dataset.data[t],o=e.dataset.data[n];return a>50||o>50?"#ff3333":"#00ff88"}return"#00ff88"}}}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:5,bottom:5,left:0,right:0}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",padding:10,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},borderColor:"#00ff88",borderWidth:1,mode:"index",intersect:!1,callbacks:{label:function(e){return e.parsed.y.toFixed(1)+"%"}}}},interaction:{mode:"index",intersect:!1},scales:{x:{display:!0,grid:{display:!1,drawBorder:!1},ticks:{color:"#999",font:{size:11},maxTicksLimit:6}},y:{grid:{color:"rgba(255,255,255,0.05)",drawBorder:!1},min:0,max:100,ticks:{color:"#999",font:{size:10},stepSize:25,callback:function(e){return e.toFixed(0)+"%"}}}}}}),powerChartInstance._powerDataPercent=i,powerChartInstance._powerData=o,powerChartInstance._powerChartColors=powerChartColors.slice(n,n+i.length),console.log("‚úÖ Power chart initialized successfully",{instance:!!powerChartInstance,dataLength:i.length,minValue:Math.min(...i),maxValue:Math.max(...i)}),!0}catch(e){return console.error("Error creating power chart:",e),!1}},setInterval(saveGame,1500),setInterval(()=>{"function"==typeof checkTutorialProgress&&checkTutorialProgress(),hackingNextNotificationTime>0&&Date.now()>=hackingNextNotificationTime&&(hackingNextNotificationTime=0,lifetimeEarnings>=1e4&&displayHackingNotification()),document.getElementById("hacking-tab")&&document.getElementById("hacking-tab").classList.contains("active")&&updateHackingStats(),updateHackingCooldownDisplays(),updateWhackCooldownDisplays(),updatePacketCooldownDisplays(),updateMinigameCardLocks()},1e3),priceSwingsStarted||(priceSwingsStarted=!0,btcTinySwing(),btcFrequentSwing(),btcBigSwing(),setTimeout(ethTinySwing,700),setTimeout(ethFrequentSwing,1200),setTimeout(ethBigSwing,1500),setTimeout(dogeTinySwing,1400),setTimeout(dogeFrequentSwing,2100),setTimeout(dogeBigSwing,2800))}function acceptAgeAndTerms(){localStorage.setItem("ageDisclaimerAccepted","true"),localStorage.setItem("termsAccepted","true"),document.getElementById("age-terms-modal").style.display="none"}function openAgeAndTermsModal(){document.getElementById("age-terms-modal").style.display="flex"}function openPrivacyModal(){document.getElementById("privacy-modal").style.display="flex"}function closePrivacyModal(){document.getElementById("privacy-modal").style.display="none"}function showBackupReminder(){if("true"===localStorage.getItem("backupReminderDismissed"))return;const e=document.getElementById("backup-reminder-modal");e&&(e.style.display="flex"),window.backupReminderShownThisSession||(window.backupReminderShownThisSession=!0,setInterval(()=>{if("true"!==localStorage.getItem("backupReminderDismissed")){const e=document.getElementById("backup-reminder-modal");e&&(e.style.display="flex")}},6e5))}function dismissBackupReminderPermanently(){localStorage.setItem("backupReminderDismissed","true"),closeBackupReminder()}function closeBackupReminder(){const e=document.getElementById("backup-reminder-modal");e&&(e.style.display="none")}setInterval(()=>{const e=Date.now(),t=(e-lastTickTime)/1e3;lastTickTime=e;const n="function"==typeof getSkillBonus?1+getSkillBonus("mining_speed"):1,a=getHackingSpeedBoost();if(btcPerSec>0){let e=btcPerSec*t*n*a,o=e*getEffectiveCryptoPrice(btcPrice);tryAutoSellCrypto("btc",e)||(btcBalance+=e),btcLifetime+=e,lifetimeEarnings+=o,sessionEarnings+=o}if(ethPerSec>0){let e=ethPerSec*t*n*a,o=e*getEffectiveCryptoPrice(ethPrice);tryAutoSellCrypto("eth",e)||(ethBalance+=e),ethLifetime+=e,lifetimeEarnings+=o,sessionEarnings+=o}if(dogePerSec>0){let e=dogePerSec*t*n*a,o=e*getEffectiveCryptoPrice(dogePrice);tryAutoSellCrypto("doge",e)||(dogeBalance+=e),dogeLifetime+=e,lifetimeEarnings+=o,sessionEarnings+=o}const o="function"==typeof getTokenGenerationRate?getTokenGenerationRate():0;if(o>0&&"undefined"!=typeof rugpullCurrency){rugpullCurrency+=o*t}if(window.gameState.lifetimeEarnings=lifetimeEarnings,window.gameState.dollarBalance=dollarBalance,updateUI(),e-lastStatsUpdateTime>=250&&(updateAutoClickerButtonState(),updateWhackStats(),updateNetworkStats(),updateMinigamesTab(),lastStatsUpdateTime=e),!rugpullMilestoneAnnounced&&e-lastMilestoneCheckTime>=2e3){lastMilestoneCheckTime=e;const t="function"==typeof window.checkRugpullMilestone,n="function"==typeof window.getRugpullRequirement,a=window.lifetimeEarningsThisRugpull;if(a>0&&a%5e6<1e5&&console.log("[MILESTONE-DEBUG] Check func: "+t+", Req func: "+n+", Earnings: $"+a.toFixed(0)),t&&(window.checkRugpullMilestone(),n)){const e=window.getRugpullRequirement();a>0&&a%1e6<1e5&&console.log("[MILESTONE-CHECK] Earnings: $"+a.toFixed(0)+" vs Requirement: $"+e.toFixed(0)+" | Flag: "+rugpullMilestoneAnnounced),a>=e&&a>0&&(rugpullMilestoneAnnounced=!0,console.log("‚úÖ RUGPULL MILESTONE ANNOUNCED - Earnings: $"+a.toFixed(0)+" >= Requirement: $"+e.toFixed(0)),console.log("üéØ Stopping milestone checks to save CPU - flag is now true"))}}},100),document.addEventListener("visibilitychange",function(){if(document.hidden){console.log("Page hidden - saving game state");try{saveGame(),console.log("Save successful on visibility change")}catch(e){console.error("Save failed on visibility change:",e)}}else{console.log("Page visible - checking saved data exists");localStorage.getItem("satoshiTerminalSave")?console.log("Save data confirmed in localStorage"):console.error("WARNING: No save data found in localStorage!")}}),window.addEventListener("beforeunload",function(e){console.log("Page unloading - saving game state");try{saveGame(),console.log("Save successful on beforeunload")}catch(e){console.error("Save failed on beforeunload:",e)}}),window.addEventListener("pagehide",function(e){console.log("Page hide event - saving game state");try{saveGame(),console.log("Save successful on pagehide")}catch(e){console.error("Save failed on pagehide:",e)}}),window.addEventListener("freeze",function(e){console.log("Page freeze event - saving game state");try{saveGame(),console.log("Save successful on freeze")}catch(e){console.error("Save failed on freeze:",e)}}),window.acceptAgeAndTerms=acceptAgeAndTerms,window.openAgeAndTermsModal=openAgeAndTermsModal,window.openPrivacyModal=openPrivacyModal,window.closePrivacyModal=closePrivacyModal,window.showBackupReminder=showBackupReminder,window.closeBackupReminder=closeBackupReminder,window.dismissBackupReminderPermanently=dismissBackupReminderPermanently,window.openExportImportModal=openExportImportModal,window.closeExportImportModal=closeExportImportModal,window.exportSaveToClipboard=exportSaveToClipboard,window.exportSaveToFile=exportSaveToFile,window.importSaveFromText=importSaveFromText,window.importSaveFromFile=importSaveFromFile,window.initHackingMinigame=initHackingMinigame,window.closeHackingModal=closeHackingModal,window.dismissHackingNotification=dismissHackingNotification,window.initWhackMinigame=initWhackMinigame,window.closeWhackMidGame=closeWhackMidGame,window.closeWhackModal=closeWhackModal,window.closeWhackResultsModal=closeWhackResultsModal,window.initNetworkMinigame=initNetworkMinigame,window.closeNetworkModal=closeNetworkModal,window.networkClickAttack=networkClickAttack,window.openMetaUpgradesModal=function(){const e=document.getElementById("meta-upgrades-modal");e?(e.style.display="flex",console.log("‚úì Meta-upgrades modal opened")):alert("Meta-upgrades modal not found in HTML")},window.closeMetaUpgradesModal=function(){const e=document.getElementById("meta-upgrades-modal");e&&(e.style.display="none",console.log("‚úì Meta-upgrades modal closed"))},window.handleRugpullButtonClick=function(){console.log("Rugpull button clicked"),"function"==typeof window._rugpullImpl?.handleRugpullButtonClick?window._rugpullImpl.handleRugpullButtonClick():window.openMetaUpgradesModal()},window.setTestEarnings=function(e){lifetimeEarnings=e,sessionEarnings=e,addEarnings(e),console.log("TEST: Set lifetimeEarnings to $"+e.toLocaleString())},window.test1Billion=function(){lifetimeEarnings=1e9,dollarBalance=1e9,sessionEarnings=1e9,"function"==typeof window.rugpullAddEarnings&&window.rugpullAddEarnings(1e9),console.log("‚úì TEST: Set earnings to $1,000,000,000"),console.log("‚úì Rugpull eligible! First rugpull reward: ~20 tokens"),updateUI(),"function"==typeof showRugpullOffer&&setTimeout(()=>showRugpullOffer(),500)},window.testRugpullEarnings=function(e){console.log(`TEST: Adding $${e.toLocaleString()} to rugpull progress`),addEarnings(e),updateUI()},window.debugCheckSave=function(){const e=localStorage.getItem("satoshiTerminalSave");if(!e)return console.log("NO SAVE DATA IN LOCALSTORAGE"),void alert("No save data found in localStorage!");try{const t=JSON.parse(e);console.log("=== LOCALSTORAGE CONTENTS ==="),console.log("BTC Balance:",t.btcBalance),console.log("ETH Balance:",t.ethBalance),console.log("DOGE Balance:",t.dogeBalance),console.log("Dollar Balance:",t.dollarBalance),console.log("Hardware Equity:",t.hardwareEquity),console.log("Lifetime Earnings:",t.lifetimeEarnings),console.log("Full data:",t),alert("Check console for localStorage contents.\nBTC: "+t.btcBalance+"\nETH: "+t.ethBalance+"\nDOGE: "+t.dogeBalance+"\n$: "+t.dollarBalance)}catch(e){console.error("Error parsing save:",e),alert("Error parsing save data: "+e.message)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){initializeGame(),document.addEventListener("touchstart",function(e){if(e.target){const t=e.target.closest("button");t&&(t.style.WebkitTapHighlightColor="transparent")}}),document.addEventListener("touchend",function(e){if(e.target){const t=e.target.closest("button");t&&(t.blur(),document.body.focus())}})}):(initializeGame(),document.addEventListener("touchstart",function(e){if(e.target){const t=e.target.closest("button");t&&(t.style.WebkitTapHighlightColor="transparent")}}),document.addEventListener("touchend",function(e){if(e.target){const t=e.target.closest("button");t&&(t.blur(),document.body.focus())}}));